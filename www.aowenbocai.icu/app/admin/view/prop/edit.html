{include file='common/head' /}
<script src="__STATIC__/js/reszieimg.js"></script>
<style media="screen">
  .form{
    margin:20px;
    width: 400px;
  }
  .form textarea{
    width: 100%;
    height: 7rem;
  }
</style>
<nav class="plugin_nav">
  <a class="" href="{:url('prop/index')}">道具管理</a>
  <a class="nav_active"  href="{:url('user_bag/index')}">玩家道具</a>
  <a class=""  href="{:url('add')}">添加道具</a>
</nav>
<div class="box-padding">
  <div class="breadcrumb">
    <ol>
      <li><i class="glyphicon glyphicon-link"></i> 道具管理</li>
      <li class="active"> 修改用户道具</li>
    </ol>
  </div>
  <div id="app">
    <div>
      <form class="form" action="{:url('edit')}" method="post">
        <input type="file" class="hidden select_photo">
        <input type="hidden" name="id" value="{$info.id}">
        <div class="form-group">
          <label>名称</label>
          <input type="text" class="form-control" value="{$info.name}" placeholder="输入图片名称" name="name">
        </div>
        <div class="form-group">
          <label>变量</label>
          <input type="text" class="form-control" value="{$info.param_name}" disabled  placeholder="输入关联变量名称" name="param_name">
        </div>
        <div class="form-group" style="height: 80px;">
          <label>图片</label>
          <span class="user_r_text" style="height: 80px;justify-content: flex-start; display: block;">
            <img class="user_photo" width="60" height="60" src="{$info.img_url}" alt="">
            <input type="hidden" name="img_url" value="{$info.img_url}">
            <button type="button" class="btn btn-success btn_select_photo">上传图片</button>
          </span>
        </div>
        <div class="form-group">
          <label>类型</label>
          <select name="type" class="form-control" >
            {$type_option}
          </select>
        </div>
        <div class="form-group">
          <label>模块</label>
          <select name="ext_name" class="form-control" >
            {$ext_option}
          </select>
        </div>
        <div class="form-group">
          <label>描述</label>
          <textarea class="form-control" name="desc">{$info.desc}</textarea>
        </div>
        <button type="submit" class="btn btn-default">提交</button>
      </form>
    </div>
  </div>
</div>


<script>
    $(function () {
        $('.btn_select_photo').click(function () {
            $('.select_photo').trigger('click')
        });
        $('.select_photo').localResizeIMG({
            // maxSize: 480,
            success: function (result) {
                $('.btn_save').attr('disabled', 'disabled');
                $('.user_photo').attr('src', result.base64);
                $.post("{:url('base64Upload')}", {'base64_data': result.base64}, function(res) {
                    $('input[name=img_url]').attr('value', res.data);
                    $('.btn_save').attr('disabled', null);
                }, 'json');
            }
        });
    });

</script>
{include file='common/foot' /}
