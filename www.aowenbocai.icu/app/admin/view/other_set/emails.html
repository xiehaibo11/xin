{include file='common/head' /}
<script src="__STATIC__/js/reszieimg.js"></script>
<link rel="stylesheet" href="__STATIC__/bootstrap-switch/css/bootstrap-switch.min.css"/>
<script src="__STATIC__/bootstrap-switch/js/bootstrap-switch.min.js"></script>

<nav class="plugin_nav">
    <a href="{:url('admin/SystemSet/index')}">基础设置</a>
    <a href="{:url('admin/SystemSet/setRecharge')}">充值兑换</a>
    <a href="{:url('admin/SystemSet/user')}">会员设置</a>
    <a href="{:url('admin/SystemSet/company')}">联系方式</a>
    <!--<a class="nav_active"  href="#">API接口</a>-->
	<div role="presentation" class="dropdown nav_active" style="display: inline-block">
		<a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false"  style="color: #39aef5;">
			API接口<span class="caret"></span>
		</a>
		<ul class="dropdown-menu">
			<li><a href="{:url('index')}">短信验证接口</a></li>
			<li><a href="{:url('emails')}">邮箱验证接口</a></li>
			<li><a href="{:url('qqConnect')}">快速登录接口</a></li>
			<li><a href="{:url('shareImg')}">微信分享接口</a></li>
		</ul>
	</div>
</nav>
<div class="box-padding">
	<div class="breadcrumb">
		<ol>
			<li class="active"><i class="glyphicon glyphicon-link"></i> 网站设置</li>
			<li>邮箱接口</li>
		</ol>
	</div>
    <div class="form-horizontal form_max">
		<div class="form-group">
				<label class="col-sm-2 control-label">邮箱验证</label>
				<div  class="col-sm-5">
					<input id="email-state" type="checkbox" name="email_checked"/>
				</div>
		</div>
		<div class="form-group">
		  <label class="col-sm-2 control-label">SMTP服务器</label>
		  <div class="col-sm-5">
			<input type="text" class="form-control" placeholder="SMTP服务器" name="smptserver" value="{$setting['smptserver']}">
		  </div>
		</div>
		<div class="form-group">
				<label class="col-sm-2 control-label">SMTP服务器端口</label>
				<div class="col-sm-5">
						<input type="text" class="form-control"  placeholder="SMTP服务器端口：默认25端口" name="smptport" value="{$setting['smptport']}">
				</div>
		</div>
		<div class="form-group">
				<label class="col-sm-2 control-label">发件人名</label>
				<div class="col-sm-5">
						<input type="text" class="form-control"  placeholder="发件人名" name="smptuser" value="{$setting['smptuser']}">
				</div>
		</div>
		<div class="form-group">
			<label class="col-sm-2 control-label">SMTP用户邮箱</label>
			<div class="col-sm-5">
			  <input type="text" class="form-control" placeholder="SMTP用户邮箱" name="smptusermail" value="{$setting['smptusermail']}">
			</div>
		  </div>
		<div class="form-group">
		  <label class="col-sm-2 control-label">SMTP用户密码</label>
		  <div class="col-sm-5">
			<input type="text" class="form-control" placeholder="SMTP用户密码（该邮箱在第三方邮件客户端登录密码）" name="smptpass" value="{$setting['smptpass']}">
		  </div>
		  <div class="col-sm-4"  style="padding-top:7px;float:left">
		  </div>
		</div>
      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
          <button type="submit" class="btn btn-primary btn_save">保存设置</button>
        </div>
      </div>
    </div>
</div>
<script src="__STATIC__/bootstrap-switch/js/bootstrap-switch-init.js"></script>
<script>
$(function(){
    //微信快速登录信息 - 微信验证
    var emailState ="{$setting['email_checked']}" == 1 ? true : false;
    var emailValue;
    $('#email-state').bootstrapSwitch('state', emailState);
    $('#email-state').on('switchChange.bootstrapSwitch', function (event,state) {
        emailValue = state ? '1' : '0';
    });

	$('.btn_save').click(function() {
      $.post('{:url("set")}', {
        data: JSON.stringify({
					email_checked :emailValue,
					smptserver: $('input[name=smptserver]').val(),
					smptport: $('input[name=smptport]').val(),
					smptusermail: $('input[name=smptusermail]').val(),
					smptpass: $('input[name=smptpass]').val(),
					smptuser: $('input[name=smptuser]').val(),
        })
      }, function() {
        $.modal.alert('修改成功');
      });
    });
})
</script>
{include file='common/foot' /}
