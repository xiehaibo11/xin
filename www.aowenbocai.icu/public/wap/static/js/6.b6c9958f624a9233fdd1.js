webpackJsonp([6],{"5jp3":function(t,s,e){"use strict";var i={render:function(){var t=this.$createElement;return(this._self._c||t)("em",[this._v("1"+this._s(this.unit)+"="+this._s(this.scaleLottery)+this._s(this.coin))])},staticRenderFns:[]};var a=e("VU/8")({name:"unitConvert",data:function(){return{}},computed:{coin:function(){return this.$store.state.coinName},unit:function(){return this.$store.state.setting.lottery_unit},scaleLottery:function(){return this.$store.state.setting.coin_lottery}}},i,!1,function(t){e("Z2t9")},"data-v-728eb508",null);s.a=a.exports},"J+r3":function(t,s){},VFnh:function(t,s,e){"use strict";var i={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{on:{click:this.showTips}},[s("mt-button",{staticClass:"stop-btn",attrs:{size:"small",type:"danger"}},[this._v("停止")])],1)},staticRenderFns:[]};var a=e("VU/8")({props:["lotteryId","id","orderId"],data:function(){return{}},computed:{},methods:{showTips:function(){var t=this;this.$messagebox.confirm("确定对该期停止追号吗？").then(function(){t.stopChase()}).catch(function(t){})},stopChase:function(){var t=this;this.$axios.post("/web/orders/stopLottery",{lottery_id:this.lotteryId,id:this.id}).then(function(s){var e=s.data;t.$toast(e.msg),t.$axios.post("/web/orders/reloadExpect",{lottery_id:t.lotteryId,id:t.orderId}).then(function(s){var e=s.data;t.$emit("reload-expect",e.data)})})}}},i,!1,function(t){e("cPwj")},"data-v-d9e484d2",null);s.a=a.exports},Z2t9:function(t,s){},cPwj:function(t,s){},owvf:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("VFnh"),a=e("XYHu"),r=e("5jp3"),n={name:"joinBuy",components:{inputNumber:a.a,unitConvert:r.a},props:{max:{type:Number,default:1/0},orderInfo:{type:Object}},data:function(){return{value:1,orderVisible:!1,loading:!1}},computed:{unit:function(){return this.$store.state.setting.lottery_unit},money:function(){return this.$store.state.userinfo.money}},methods:{submitOrder:function(){var t=this;this.$store.commit("setLoadStatus",!0),this.$axios("/index/moblie/checkLogin").then(function(s){var e=s.data;t.$store.commit("setBauth",e.status),t.$store.commit("setLoadStatus",!1),e.status?(t.$store.dispatch("getUserInfo"),t.orderVisible=!0):t.$router.replace({path:"/login",query:{redirect:t.$router.currentRoute.fullPath}})})},goPay:function(){this.$router.replace({path:"/pay",query:{redirect:this.$router.currentRoute.fullPath}})},payment:function(){var t=this;this.loading=!0,this.$axios.post("/web/orders/buyJoin",{buy_id:this.orderInfo.id,lottery_id:this.orderInfo.lottery_id,money:this.value}).then(function(s){var e=s.data;e.err||(t.value=1,t.$store.dispatch("getUserInfo")),t.orderVisible=!1,t.loading=!1,setTimeout(function(){t.$messagebox({title:"提示",message:e.msg})},200),t.$emit("update-join-list")}).catch(function(t){console.log(t)})}}},o={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"join-buy flex-box"},[e("input-number",{attrs:{max:t.max,min:1,step:1},model:{value:t.value,callback:function(s){t.value=s},expression:"value"}}),t._v(" "),e("em",{staticClass:"f-mini c-3",staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.unit))]),t._v(" "),e("mt-button",{staticClass:"btn-buy",attrs:{type:"danger",size:"small"},nativeOn:{click:function(s){return t.submitOrder(s)}}},[t._v("购买")]),t._v(" "),e("mt-popup",{attrs:{position:"bottom"},model:{value:t.orderVisible,callback:function(s){t.orderVisible=s},expression:"orderVisible"}},[t.orderVisible?e("div",{staticClass:"orders-info"},[e("div",{staticClass:"order-title org border-bottom-1px"},[t._v("订单信息确认")]),t._v(" "),e("div",{staticClass:"order-info"},[e("div",[e("span",{staticClass:"name"},[t._v("投注彩种:")]),t._v(" "),e("span",{staticClass:"info"},[t._v(t._s(t.orderInfo.title))])]),t._v(" "),e("div",[e("span",{staticClass:"name"},[t._v("投注方式:")]),t._v(" "),e("span",{staticClass:"info"},[t._v("参与合买")])]),t._v(" "),e("div",[e("span",{staticClass:"name"},[t._v("认购金额:")]),t._v(" "),e("span",{staticClass:"info"},[e("b",{staticClass:"red f-large"},[t._v(t._s(t.value))]),t._v(" "+t._s(t.unit))])]),t._v(" "),e("div",[e("span",{staticClass:"name"},[t._v("账户余额:")]),t._v(" "),e("span",{staticClass:"info"},[e("em",[t._v(t._s(t.money))]),t._v(" "+t._s(t.unit))]),t._v(" "),t.money<t.value?e("span",{staticClass:"tips tc",staticStyle:{"font-size":"14px",color:"#333"}},[e("b",{staticClass:"red"},[t._v("（余额不足，请充值!）")])]):t._e()])]),t._v(" "),e("div",{staticClass:"order-footer tr"},[e("mt-button",{staticClass:"cancel",attrs:{size:"small"},on:{click:function(s){t.orderVisible=!1}}},[t._v("取消")]),t._v(" "),t.money<t.value?e("mt-button",{attrs:{type:"primary",size:"small"},on:{click:t.goPay}},[t._v("立即充值")]):e("mt-button",{attrs:{type:"primary",size:"small"},on:{click:t.payment}},[t.loading?e("mt-spinner",{staticClass:"btn-loading",attrs:{slot:"icon",type:3,size:15,color:"#fff"},slot:"icon"}):t._e(),t._v("\n                    确定购买\n                ")],1)],1)]):t._e()])],1)},staticRenderFns:[]};var c=e("VU/8")(n,o,!1,function(t){e("J+r3")},"data-v-8a966de0",null).exports,l={components:{stopChase:i.a,joinBuy:c},data:function(){return{loading:!0,orders:{},isShow:!0,chaseShow:!0,isrefresh:!0}},computed:{contentH:function(){return this.$store.state.clientHeight-40},lottery_id:function(){return this.$route.query.lottery_id},id:function(){return this.$route.query.id},lotteryUnit:function(){return this.$store.state.setting.lottery_unit},chaseIssue:function(){return this.orders.expect.length},mulTotal:function(){var t=0;for(var s in this.orders.expect)t+=this.orders.expect[s].multiple;return t}},methods:{updateExpect:function(t){this.$set(this.orders,"expect",t)},cancelOrder:function(t){var s=this;this.$messagebox.confirm("确定要撤销该订单吗?").then(function(){s.$axios.get("/web/orders/returnTicket",{params:{lottery_id:t}}).then(function(t){var e=t.data;e.err?s.$messagebox("提示",e.msg):s.$messagebox.alert(e.msg).then(function(t){s.orders.status=8})})}).catch(function(t){})}},created:function(){var t=this;this.orders={},this.loading=!0,this.$axios.get("/web/orders/getDetails",{params:{id:this.id,lottery_id:this.lottery_id}}).then(function(s){var e=s.data;t.$set(t,"orders",e),t.loading=!1})}},d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[t.loading?e("div",{staticClass:"loading"},[e("mt-spinner",{attrs:{type:3}})],1):t._e(),t._v(" "),!t.loading&&t.isrefresh?e("div",{staticClass:"contentH",style:{height:t.contentH+"px"}},[e("div",{staticClass:"order-header pd-sm"},[e("span",[e("img",{attrs:{src:t.orders.image,alt:"",width:"35"}})]),t._v(" "),e("b",[t._v(t._s(t.orders.title))]),t._v(" "),e("span",{staticClass:"c-3 f-mini"},[t.orders.ischase?[t._v("自购追号 共追号"+t._s(t.chaseIssue)+"期")]:t._e()],2),t._v(" "),t.orders.status<1?e("span",{staticClass:"fr"},[e("mt-button",{attrs:{type:"danger",size:"small"},nativeOn:{click:function(s){return s.target!==s.currentTarget?null:(s.stopPropagation(),t.cancelOrder(t.orders.lottery_id))}}},[t._v("撤单")])],1):t._e(),t._v(" "),e("div",{staticClass:"flex-box f-sm c-3 win-info"},[e("div",{staticClass:"tc"},[e("p",{staticClass:"c-1"},[t._v(t._s(t.orders.total_money)+" "),e("em",{staticClass:"f-mini"},[t._v(t._s(t.lotteryUnit))])]),t._v(" "),e("p",{staticClass:"f-mini"},[t._v("订单金额")])])])]),t._v(" "),e("div",{staticClass:"order-cont border-bottom-1px"},[e("div",[e("span",{staticClass:"title"},[t._v("订单状态：")]),t._v(" "),e("span",[e("em",{domProps:{innerHTML:t._s(t.orders.status_txt)}}),e("em",{staticClass:"f-mini c-2"},[t._v("（详情查看追号详情）")])])])]),t._v(" "),e("div",{staticClass:"order-detail card border-bottom-1px"},[e("div",{staticClass:"title flex-box",class:{"border-bottom-1px":t.isShow},on:{click:function(s){t.isShow=!t.isShow}}},[e("span",{staticClass:"join-title"},[t._v("方案内容")]),t._v(" "),e("span",[t._v(" 共"+t._s(t.orders.betting.length)+"条")]),t._v(" "),e("span",{staticClass:"flex tr"},[e("i",{staticClass:"iconfont icon-xiajiantou c-3",class:{hide:!t.isShow}})])]),t._v(" "),e("ul",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"chose-code c-3"},t._l(t.orders.betting,function(s){return e("li",[e("span",{domProps:{innerHTML:t._s(s)}})])}),0)]),t._v(" "),t.orders.ischase?e("div",{staticClass:"order-detail card border-bottom-1px"},[e("div",{staticClass:"title flex-box",class:{"border-bottom-1px":t.chaseShow},on:{click:function(s){t.chaseShow=!t.chaseShow}}},[e("span",{staticClass:"join-title"},[t._v("追号详情")]),t._v(" "),e("span",[t._v("共追号"+t._s(t.chaseIssue)+"期")]),t._v(" "),e("span",{staticClass:"flex tr"},[e("i",{staticClass:"iconfont icon-xiajiantou c-3",class:{hide:!t.chaseShow}})])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.chaseShow,expression:"chaseShow"}],staticClass:"c-3 chase-detail"},[e("table",{attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[e("tr",[e("th",{staticStyle:{"text-align":"left","padding-left":"2px"},attrs:{width:"22%"}},[t._v("期号")]),t._v(" "),e("th",{staticStyle:{"text-align":"left","padding-left":"2px"},attrs:{width:"20%"}},[t._v("开奖号码")]),t._v(" "),e("th",{attrs:{width:"10%"}},[t._v("倍数")]),t._v(" "),e("th",{attrs:{width:"15%"}},[t._v("金额")]),t._v(" "),e("th",{attrs:{width:"15%"}},[t._v("奖金/状态")]),t._v(" "),t.orders.fristBuy?e("th",{attrs:{width:"13%"}},[t._v("操作")]):t._e()]),t._v(" "),t._l(t.orders.expect,function(s,i){return e("tr",{key:i},[e("td",{staticStyle:{"text-align":"left","padding-left":"2px"},attrs:{width:"22%"}},[t._v(t._s(s.expect))]),t._v(" "),e("td",{staticStyle:{"text-align":"left","padding-left":"2px","word-wrap":"break-word",width:"85px",display:"block",height:"auto",padding:"5px 0"},attrs:{width:"20%"}},[s.code.length?t._l(s.code,function(i,a){return e("em",{staticClass:"red"},[t._v(t._s(i)),a!==s.code.length-1?e("i",[t._v(",")]):t._e()])}):[t._v("--")]],2),t._v(" "),e("td",{attrs:{width:"10%"}},[t._v(t._s(s.multiple))]),t._v(" "),e("td",{attrs:{width:"15%"}},[t._v(t._s(t.orders.total_money/t.mulTotal*s.multiple)+t._s(t.lotteryUnit))]),t._v(" "),e("td",{attrs:{width:"15%"}},[0==s.newStatus?e("span",[t._v("未出票")]):t._e(),t._v(" "),1==s.newStatus?e("span",[t._v("已出票")]):t._e(),t._v(" "),2==s.newStatus?e("span",[s.bonus>0?e("b",{class:{red:s.bonus>0}},[t._v(t._s(s.bonus))]):e("em",[t._v("未中奖")])]):t._e(),t._v(" "),3==s.newStatus?e("span",[t._v("中奖停止")]):t._e(),t._v(" "),4==s.newStatus?e("span",[t._v("进行中")]):t._e(),t._v(" "),5==s.newStatus?e("span",[t._v("停止追号")]):t._e(),t._v(" "),6==s.newStatus?e("span",[t._v("流产撤单")]):t._e(),t._v(" "),7==s.newStatus?e("span",[t._v("系统撤单")]):t._e(),t._v(" "),8==s.newStatus?e("span",[t._v("用户撤单")]):t._e()]),t._v(" "),t.orders.fristBuy?e("td",{attrs:{width:"13%"}},[0==s.newStatus?[e("stop-chase",{attrs:{"lottery-id":t.orders.lottery_id,"order-id":t.orders.id,id:s.id},on:{"reload-expect":t.updateExpect}})]:[t._v("--")]],2):t._e()])})],2)])]):t._e(),t._v(" "),e("div",{staticClass:"order-foot"},[e("p",[t._v("投注时间："+t._s(t.orders.create_time))]),t._v(" "),t.orders.ischase?e("p",[t._v("追号设置：\n                "),t.orders.is_stop?e("em",[t._v("中奖后停止追号")]):e("em",[t._v("中奖后继续追号")])]):t._e(),t._v(" "),e("p",[t._v("订单编号："+t._s(t.orders.lottery_id))])])]):t._e()])},staticRenderFns:[]};var u=e("VU/8")(l,d,!1,function(t){e("pB7m")},"data-v-18e670a9",null);s.default=u.exports},pB7m:function(t,s){}});