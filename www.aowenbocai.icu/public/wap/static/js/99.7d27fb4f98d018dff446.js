webpackJsonp([99],{"0fNy":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("9a9e"),n=a("BK5K"),i={name:"agentMember",components:{pageItem:s.a,InputSearch:n.a},data:function(){return{isrefresh:!0,sheetVisible:!1,rebateVisible:!1,rowData:"",rebateInfo:{ssc:"0.0",ks:"0.0",syxw:"0.0",pk10:"0.0",pc28:"0.0"},value:"",name:""}},computed:{agentRecharge:function(){return 1==this.$store.state.setting.agent_recharge},agentid:function(){return this.$route.query.id||""},names:function(){return this.$route.query.name||""},title:function(){var t=this.names?" ("+this.names+")":"( 我的会员)";return this.$route.meta.title+t},contentH:function(){return this.$store.state.clientHeight-95},url:function(){return"/web/agent/get_member"+(this.agentid?"?id="+this.agentid:"")+(this.name?"&name="+this.name:"")},lotteryList:function(){return this.$store.state.lotteryShow},actions:function(){var t=[{name:"投注明细",method:this.toBetRecord},{name:"资金明细",method:this.toBillRecord},{name:"注册时间："+this.rowData.create_time,method:""},{name:"最后登录："+this.rowData.action_time,method:""}];return this.agentRecharge&&!this.agentid&&t.unshift({name:"给Ta充值",method:this.handleAgentRecharge}),""!==this.rowData.rebate&&t.unshift({name:"查看返点",method:this.viewRebateInfo}),t}},methods:{doSearch:function(){this.name=this.value},getRowData:function(t){this.rowData=t,this.sheetVisible=!0,t.rebate?this.rebateInfo=JSON.parse(t.rebate):this.rebateInfo={ssc:"0.0",ks:"0.0",syxw:"0.0",pk10:"0.0",pc28:"0.0"}},viewRebateInfo:function(){this.rebateVisible=!0},toSubMember:function(t,e){this.$set(this,"value",""),this.$set(this,"name",""),this.$router.push({path:"/agent/member",query:{id:t,name:e}})},toBetRecord:function(){this.$router.push({path:"/agent/betRecord",query:{id:Number(this.rowData.id),name:this.rowData.nickname}})},toBillRecord:function(){this.$router.push({path:"/agent/billRecord",query:{id:Number(this.rowData.id),name:this.rowData.nickname}})},handleAgentRecharge:function(){var t=this;this.$messagebox.prompt("请输入充值金额").then(function(e){var a=e.value;e.action;t.$axios.post("/web/agent/change_money",{userid:t.rowData.id,money:a}).then(function(e){var a=e.data;t.$messagebox("提示",a.msg),a.err||(t.isrefresh=!1,t.$nextTick(function(){t.isrefresh=!0}))})}).catch(function(){})},goBack:function(){this.$router.isBack=!0,this.$router.push({path:this.$route.query.redirect?this.$route.query.redirect:window.history.go(-1)})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mt-header",{attrs:{title:t.title}},[t.agentid?a("mt-button",{attrs:{slot:"left",icon:"back"},nativeOn:{click:function(e){return t.$router.goBack(-1)}},slot:"left"},[t._v("返回上一级")]):a("mt-button",{attrs:{slot:"left",icon:"back"},nativeOn:{click:function(e){return t.goBack(e)}},slot:"left"}),t._v(" "),t.agentid?a("mt-button",{attrs:{slot:"right"},slot:"right"},[a("router-link",{attrs:{to:"/agent/member",tag:"span"}},[t._v("我的")])],1):t._e()],1),t._v(" "),a("input-search",{attrs:{placeholder:"账号/昵称查询"},on:{search:t.doSearch},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),a("div",{staticClass:"contentH",style:{height:t.contentH+"px"}},[t.isrefresh?a("page-item",{attrs:{url:t.url},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"table-member"},[a("div",{staticClass:"table-member-head"},[a("span",{staticClass:"username"},[t._v("账号")]),t._v(" "),a("span",{staticClass:"type"},[t._v("类型")]),t._v(" "),a("span",{staticClass:"num"},[t._v("下级人数")]),t._v(" "),a("span",{staticClass:"yue"},[t._v("账户余额")])]),t._v(" "),t._l(e.data,function(e,s){return a("div",{staticClass:"table-member-list card"},[a("span",{staticClass:"username"},[e.agents_num>0?a("a",{staticClass:"link",on:{click:function(a){return t.toSubMember(e.id,e.nickname)}}},[t._v(t._s(e.nickname))]):a("a",{staticClass:"c-2"},[t._v(t._s(e.nickname))])]),t._v(" "),a("span",{staticClass:"type"},[1==e.type?a("em",{staticClass:"el-tag el-tag--success"},[t._v("普通会员")]):t._e(),t._v(" "),2==e.type?a("em",{staticClass:"el-tag el-tag--danger"},[t._v("代理会员")]):t._e(),t._v(" "),0==e.type?a("em",{staticClass:"el-tag el-tag--info"},[t._v("测试会员")]):t._e()]),t._v(" "),a("span",{staticClass:"num"},[2==e.type||0==e.type?[a("em",{class:{red:e.agents_num>0}},[t._v(t._s(e.agents_num))])]:[a("em",{staticClass:"c-4"},[t._v("--")])]],2),t._v(" "),a("span",{staticClass:"yue"},[t._v(t._s(e.agents_money))]),t._v(" "),a("span",{staticClass:"mint-cell-allow-right",on:{click:function(a){return t.getRowData(e)}}})])})],2)]}}],null,!1,4113242914)}):t._e(),t._v(" "),a("mt-actionsheet",{attrs:{actions:t.actions},model:{value:t.sheetVisible,callback:function(e){t.sheetVisible=e},expression:"sheetVisible"}}),t._v(" "),a("mt-popup",{staticClass:"tc",attrs:{position:"bottom"},model:{value:t.rebateVisible,callback:function(e){t.rebateVisible=e},expression:"rebateVisible"}},[a("div",{staticClass:"rebate-info"},[a("div",{staticClass:"visible-title border-bottom-1px"},[t._v("返点详情 ("+t._s(t.rowData.nickname)+")")]),t._v(" "),t._l(t.lotteryList,function(e,s){return[a("div",{key:s,staticClass:"flex-box border-bottom-1px rebate-info-item"},[a("span",{staticClass:"tl label"},[t._v(t._s(e.label))]),t._v(" "),a("span",[t._v(t._s(t.rebateInfo[e.type]))])])]})],2)])],1)],1)},staticRenderFns:[]};var o=a("VU/8")(i,r,!1,function(t){a("G+WE")},"data-v-02f97a74",null);e.default=o.exports},"G+WE":function(t,e){}});