webpackJsonp([79],{"2M27":function(t,e){},fUoh:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("V/qW"),a=s("fviT"),n={components:{SafeCheck:i.a,GetSms:a.a},data:function(){return{checkWay:Number(this.$store.state.setting.tel_checked)&&1!==this.$store.state.lockInfo.tel?1:2,loading:!1,steps:Number(this.$store.state.setting.tel_checked)||Number(this.$store.state.setting.email_checked)?1:2,options:{yzm:"",num:""},telYzm:"",emailYzm:""}},computed:{lockTel:function(){return 1!==this.$store.state.lockInfo.tel},lockEmail:function(){return 1!==this.$store.state.lockInfo.email},isYzm:function(){return!!Number(this.$store.state.setting.tel_checked)},isEmail:function(){return!!Number(this.$store.state.setting.email_checked)},isChose:function(){return!(!this.isYzm&&!this.isEmail)}},methods:{toNext:function(){var t=this,e=1==this.checkWay?this.telYzm:this.emailYzm;e?(this.loading=!0,this.$axios.post("/web/user/checkOldEmail",{changeWay:this.checkWay,yzm:e}).then(function(e){var s=e.data;s.err?t.$toast({message:s.msg,duration:1e3}):t.steps=2,t.loading=!1}).catch(function(t){console.log(t)})):this.$toast("验证码不能为空！")},checkTel:function(){var t=this;this.lockTel?this.checkWay=1:this.$messagebox.confirm("您还未绑定手机，立即去绑定?").then(function(){t.$router.push({path:"/setTel"})}).catch(function(t){})},checkEmail:function(){var t=this;this.lockEmail?this.checkWay=2:this.$messagebox.confirm("您还未绑定邮箱，立即去绑定?").then(function(){t.$router.push({path:"/setEmail"})}).catch(function(t){})},sumbit:function(){var t=this;this.loading=!0;var e={};e=this.isEmail?{email:this.options.num,yzm:this.options.yzm}:{email:this.options.num},this.$axios.post("/web/user/checkNewEmail",e).then(function(e){var s=e.data;s.err||setTimeout(function(){t.$router.goBack(-1)},1e3),t.$toast({message:s.msg,duration:1e3}),t.loading=!1}).catch(function(t){console.log(t)})}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isChose?s("div",{staticClass:"steps"},[s("span",{class:{active:t.steps>=1}}),t._v(" "),s("span",{class:{active:t.steps>=2}})]):t._e(),t._v(" "),1==t.steps?s("div",{staticClass:"step1"},[s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.checkWay,expression:"checkWay == 1"}]},[s("div",{staticClass:"input-title"},[t._v("安全验证")]),t._v(" "),s("safe-check",{attrs:{url:"/web/user/sendMsgEmail","check-way":1},model:{value:t.telYzm,callback:function(e){t.telYzm=e},expression:"telYzm"}})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.checkWay,expression:"checkWay == 2"}]},[s("div",{staticClass:"input-title"},[t._v("安全验证")]),t._v(" "),s("safe-check",{attrs:{url:"/web/user/sendOldEmail","check-way":2},model:{value:t.emailYzm,callback:function(e){t.emailYzm=e},expression:"emailYzm"}})],1),t._v(" "),s("div",{staticClass:"btn-box"},[s("mt-button",{attrs:{type:"danger",size:"large"},nativeOn:{click:function(e){return t.toNext(e)}}},[t.loading?s("mt-spinner",{staticClass:"btn-loading",attrs:{slot:"icon",type:3,size:15,color:"#fff"},slot:"icon"}):t._e(),t._v("\n                下一步\n            ")],1)],1),t._v(" "),s("div",{staticClass:"tc"},[1==t.checkWay&&t.isEmail?s("a",{staticClass:"link f-sm",staticStyle:{"text-decoration":"underline"},on:{click:t.checkEmail}},[t._v("使用已绑定邮箱进行验证")]):t._e(),t._v(" "),2==t.checkWay&&t.isYzm?s("a",{staticClass:"link f-sm",staticStyle:{"text-decoration":"underline"},on:{click:t.checkTel}},[t._v("使用已绑定手机进行验证")]):t._e()])]):t._e(),t._v(" "),2==t.steps?s("div",{staticClass:"step2"},[s("div",{staticClass:"input-title"},[t._v("重置邮箱")]),t._v(" "),s("get-sms",{attrs:{"get-way":2,url:"/web/user/sendNewEmail"},model:{value:t.options,callback:function(e){t.options=e},expression:"options"}}),t._v(" "),s("div",{staticClass:"btn-box"},[s("mt-button",{attrs:{type:"danger",size:"large"},nativeOn:{click:function(e){return t.sumbit(e)}}},[t.loading?s("mt-spinner",{staticClass:"btn-loading",attrs:{slot:"icon",type:3,size:15,color:"#fff"},slot:"icon"}):t._e(),t._v("\n                确认重置\n            ")],1)],1)],1):t._e()])},staticRenderFns:[]};var o=s("VU/8")(n,c,!1,function(t){s("2M27")},"data-v-3c7078fe",null);e.default=o.exports}});