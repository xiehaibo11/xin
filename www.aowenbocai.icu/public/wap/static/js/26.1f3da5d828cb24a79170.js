webpackJsonp([26],{"3Nyy":function(t,e){},LqAC:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"transform",data:function(){return{loading:!1,type:1,num:"",err:"",sucMsg:""}},watch:{type:function(t){this.checkNum(this.num)}},computed:{contentH:function(){return this.$store.state.clientHeight-70},scale:function(){return this.$store.state.setting.recharge_award},gameMoney:function(){return this.$store.state.userinfo.game_money},money:function(){return this.$store.state.userinfo.money},gameUnit:function(){return this.$store.state.setting.game_unit},lotteryUnit:function(){return this.$store.state.setting.lottery_unit}},methods:{checkNum:function(t){if(this.err="",this.sucMsg="",t){var e=this.scale.length-1;this.num=1==this.type?this.$base.formateSmallNumber(t,e):parseInt(t);var s={1:this.money,2:this.gameMoney};if(Number(this.num)>s[this.type])return void(this.err="账户余额不足");if(Number(this.num)<=0)return void(this.err="金额不能为0");this.sucMsg=1==this.type?"可转换"+this.$base.formatMoney(this.$bet.accMul(this.num,this.scale))+this.gameUnit:"可转换"+this.$base.formatMoney(this.$bet.accDiv(this.num,this.scale))+this.lotteryUnit}},choseMoney:function(t){this.num=t,this.checkNum(this.num)},clear:function(){this.num="",this.err="",this.sucMsg=""},sumbit:function(){var t=this;this.err.length?this.$messagebox("提示",this.err):(this.loading=!0,this.$axios.post("/web/user/transform",{type:this.type,num:this.num}).then(function(e){var s=e.data;s.err||(t.$store.dispatch("getUserInfo"),t.clear()),t.$messagebox("提示",s.msg),t.loading=!1}).catch(function(t){console.log(t)}))}},created:function(){this.$store.commit("setKeepAlivePage","transform")},beforeRouteLeave:function(t,e,s){"/transformDetail"==t.path||"/pay"==t.path?this.$store.commit("setKeepAlivePage","transform"):this.$store.commit("delKeepAlivePage","transform"),s()}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("mt-header",{attrs:{title:"转账"}},[s("mt-button",{attrs:{slot:"left",icon:"back"},nativeOn:{click:function(e){return t.$router.goBack(-1)}},slot:"left"}),t._v(" "),s("router-link",{attrs:{slot:"right",to:"/transformDetail"},slot:"right"},[s("div",{staticClass:"f-sm"},[t._v("转账明细")])])],1),t._v(" "),s("div",{staticClass:"tips"},[t._v("\n        1"+t._s(t.lotteryUnit)+" = "+t._s(t.scale)+t._s(t.gameUnit)+"\n    ")]),t._v(" "),s("div",{staticClass:"transform-box contentH",style:{height:t.contentH+"px"}},[s("div",{staticClass:"icon mt",on:{click:function(e){t.type=1==t.type?2:1}}},[s("i",{staticClass:"iconfont icon-zhuanhuan"}),t._v(" 交换")]),t._v(" "),s("div",[s("a",{staticClass:"mint-cell mint-field"},[s("div",{staticClass:"mint-cell-wrapper"},[t._m(0),t._v(" "),s("div",{staticClass:"mint-cell-value"},[1==t.type?s("span",[s("em",[t._v("账户余额")]),t._v(" "),s("em",{staticClass:"f-sm"},[t._v("(余额:"+t._s(t.money)+t._s(t.lotteryUnit)+")")])]):t._e(),t._v(" "),2==t.type?s("span",[s("em",[t._v("游戏账户")]),t._v(" "),s("em",{staticClass:"f-sm"},[t._v("(余额:"+t._s(t.gameMoney)+t._s(t.gameUnit)+")")])]):t._e()])])]),t._v(" "),s("a",{staticClass:"mint-cell mint-field"},[s("div",{staticClass:"mint-cell-wrapper"},[t._m(1),t._v(" "),s("div",{staticClass:"mint-cell-value"},[1==t.type?s("span",[s("em",[t._v("游戏账户")]),t._v(" "),s("em",{staticClass:"f-sm"},[t._v("(余额:"+t._s(t.gameMoney)+t._s(t.gameUnit)+")")])]):t._e(),t._v(" "),2==t.type?s("span",[s("em",[t._v("账户余额")]),t._v(" "),s("em",{staticClass:"f-sm"},[t._v("(余额:"+t._s(t.money)+t._s(t.lotteryUnit)+")")])]):t._e()])])]),t._v(" "),s("mt-field",{staticClass:"num",attrs:{label:"转账数额",placeholder:"请输入转账数额",value:t.num,type:"text"},on:{change:t.checkNum}})],1),t._v(" "),s("div",{staticClass:"fast-chsoe mt tr"},[s("span",{staticClass:"c-3 f-sm"},[t._v("快捷选择：")]),t._v(" "),s("mt-button",{attrs:{size:"small"},nativeOn:{click:function(e){return t.choseMoney(1==t.type?t.money:t.gameMoney)}}},[t._v("全部")]),t._v(" "),s("mt-button",{attrs:{size:"small"},nativeOn:{click:function(e){return t.choseMoney(1==t.type?100:t.scale)}}},[t._v(t._s(1==t.type?100:t.scale))]),t._v(" "),s("mt-button",{attrs:{size:"small"},nativeOn:{click:function(e){return t.choseMoney(1==t.type?1e3:10*t.scale)}}},[t._v(t._s(1==t.type?1e3:10*t.scale))]),t._v(" "),s("mt-button",{attrs:{size:"small"},nativeOn:{click:function(e){return t.choseMoney(1==t.type?1e4:100*t.scale)}}},[t._v(t._s(1==t.type?1e4:100*t.scale))])],1),t._v(" "),s("div",{staticClass:"btn-box"},[s("mt-button",{attrs:{type:"danger",size:"large"},nativeOn:{click:function(e){return t.sumbit(e)}}},[t.loading?s("mt-spinner",{staticClass:"btn-loading",attrs:{slot:"icon",type:3,size:15,color:"#fff"},slot:"icon"}):t._e(),t._v("\n                确认转账\n            ")],1)],1),t._v(" "),s("div",{staticClass:"tc red"},[t._v(t._s(t.err))]),t._v(" "),s("div",{staticClass:"tc suc"},[t._v(t._s(t.sucMsg))])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mint-cell-title"},[e("span",{staticClass:"mint-cell-text"},[this._v("转出账户")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mint-cell-title"},[e("span",{staticClass:"mint-cell-text"},[this._v("转入账户")])])}]};var a=s("VU/8")(i,n,!1,function(t){s("3Nyy")},"data-v-fc7ae58e",null);e.default=a.exports}});