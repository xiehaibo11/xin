webpackJsonp([98],{fuqA:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"",data:function(){return{agreeVisible:!1,loading:!1,text:"获取验证码",countDown:120,yzmState:!1,tel:"",yzm:"",username:"",nickname:"",pwd:"",pwd2:"",check:!0,code:this.$route.query.code||"",qq:""}},watch:{tel:function(e){e&&(this.yzmState=!0)}},computed:{isYzm:function(){return 1==this.$store.state.setting.tel_checked},regWay:function(){return this.$store.state.setting.reg_way},user_web:function(){return this.$store.state.setting.user_web},codeStatus:function(){return 1==this.$store.state.setting.is_reg_code}},methods:{sendSms:function(){var e=this;return 120==this.countDown&&(this.$base.testTel(this.tel)?(this.yzmState=!1,this.text="发送中...",void this.$axios.get("/index/reg/sendsms",{params:{tel:this.tel}}).then(function(t){var s=t.data;if(s.err)e.$toast({message:s.msg,duration:1500}),e.text="获取验证码",e.yzmState=!0;else{e.text="重新发送("+e.countDown+"s)";var a=setInterval(function(){if(e.countDown=e.countDown-1,0==e.countDown)return e.text="获取验证码",e.yzmState=!0,e.countDown=120,void clearInterval(a);e.text="重新发送("+e.countDown+"s)"},1e3);e.$toast({message:"发送成功",duration:1500})}}).catch(function(e){console.log(e)})):(this.$toast({message:"请输入正确的手机号",duration:1500}),!1))},submit:function(){var e=this,t={1:{pattern:/^[a-zA-Z0-9]{3,25}$/,message:"用户名只能由3-25位字母或数字组成"},2:{pattern:/^[0-9]{2,10}$/,message:"用户昵称必须由2-10个不为纯数字的组成"},3:{pattern:/^\d+$/,message:"请输入正确的验证码"},4:{pattern:/^[1-9][0-9]{4,14}$/,message:"请输入正确的QQ号码"}};if(!this.codeStatus||this.code.length)if(this.username.length)if(t[1].pattern.test(this.username))if(this.nickname.length)if(t[2].pattern.test(this.nickname))this.$messagebox("提示",t[2].message);else if(this.pwd.length)if(this.pwd2.length)if(this.pwd===this.pwd2)if(!this.regWay.common||t[4].pattern.test(this.qq))if(!this.regWay.tel||this.$base.testTel(this.tel))if(this.regWay.tel&&this.isYzm&&!this.yzm.length)this.$messagebox("提示","请输入验证码!");else{var s={username:this.username,nickname:this.nickname,password:this.pwd,password2:this.pwd2};this.regWay.common&&(s.qq=this.qq),this.regWay.tel&&(s.tel=this.tel),this.regWay.tel&&this.isYzm&&(s.yzm=this.yzm),this.codeStatus&&(s.code=this.code),this.check?(this.loading=!0,this.$axios.post("/web/reg/reg",s).then(function(t){var s=t.data;s.err?e.$messagebox("提示",s.msg):(e.$store.dispatch("getUserInfo"),e.$base.setCookie("bAuth",!0),e.$store.dispatch("getLockInfo"),e.$store.dispatch("getTrueInfo"),e.$store.state.bAuth=!0,setTimeout(function(){var t=e.$route.query.redirect;t?e.$router.push({path:t}):e.$router.push({path:"/"})},1e3),e.$toast({message:"注册成功",iconClass:"iconfont icon-gou-copy",duration:1e3})),e.loading=!1}).catch(function(e){})):this.$toast("请阅读并同意相关协议!")}else this.$messagebox("提示","请输入正确的手机号!");else this.$messagebox("提示",t[4].message);else this.$messagebox("提示","两次输入的密码不相同!");else this.$messagebox("提示","请确认登录密码!");else this.$messagebox("提示","请输入登录密码!");else this.$messagebox("提示","请输入用户昵称!");else this.$messagebox("提示",t[1].message);else this.$messagebox("提示","请输入用户名!");else this.$messagebox("提示","请输入邀请码!")}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"form"},[s("div",{staticStyle:{"margin-top":"15px","margin-bottom":"8px"}},[e.codeStatus?[this.$route.query.code?[s("mt-field",{attrs:{label:"邀请码",placeholder:"请输入邀请码",disabled:""},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})]:[s("mt-field",{attrs:{label:"邀请码",placeholder:"请输入邀请码"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})]]:e._e(),e._v(" "),s("mt-field",{attrs:{label:"用户名",placeholder:"请输入3-25个字母或数字"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),s("mt-field",{attrs:{label:"用户昵称",placeholder:"请输入2-10个不为纯数字的用户昵称"},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}}),e._v(" "),s("mt-field",{attrs:{label:"登录密码",placeholder:"请输入密码（长度6-25）",type:"password"},model:{value:e.pwd,callback:function(t){e.pwd=t},expression:"pwd"}}),e._v(" "),s("mt-field",{attrs:{label:"确认密码",placeholder:"请再次输入密码（长度6-25）",type:"password"},model:{value:e.pwd2,callback:function(t){e.pwd2=t},expression:"pwd2"}}),e._v(" "),e.regWay.common?s("mt-field",{attrs:{label:"QQ号码",placeholder:"请输入QQ号码"},model:{value:e.qq,callback:function(t){e.qq=t},expression:"qq"}}):e._e(),e._v(" "),e.regWay.tel?s("mt-field",{attrs:{label:"手机号",placeholder:"请输入手机号"},model:{value:e.tel,callback:function(t){e.tel=t},expression:"tel"}}):e._e(),e._v(" "),e.regWay.tel&&e.isYzm?s("mt-field",{attrs:{label:"验证码",placeholder:"请输入验证码",type:"tel"},model:{value:e.yzm,callback:function(t){e.yzm=t},expression:"yzm"}},[s("div",{staticClass:"btn-yzm",class:e.yzmState?"abled":"disabled",on:{click:e.sendSms}},[e._v(e._s(e.text))])]):e._e()],2),e._v(" "),s("div",{staticClass:"tc mt f-sm c-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.check,expression:"check"}],attrs:{type:"checkbox",checked:""},domProps:{checked:Array.isArray(e.check)?e._i(e.check,null)>-1:e.check},on:{change:function(t){var s=e.check,a=t.target,i=!!a.checked;if(Array.isArray(s)){var n=e._i(s,null);a.checked?n<0&&(e.check=s.concat([null])):n>-1&&(e.check=s.slice(0,n).concat(s.slice(n+1)))}else e.check=i}}}),e._v(" 我已阅读并同意"),s("a",{staticClass:"link",on:{click:function(t){e.agreeVisible=!0}}},[e._v("《注册协议》")])]),e._v(" "),s("div",{staticClass:"btn-box"},[s("mt-button",{attrs:{type:"danger",size:"large"},nativeOn:{click:function(t){return e.submit(t)}}},[e.loading?s("mt-spinner",{staticClass:"btn-loading",attrs:{slot:"icon",type:3,size:15,color:"#fff"},slot:"icon"}):e._e(),e._v("\n            立即注册\n        ")],1),e._v(" "),s("div",{staticClass:"mt-sm"},[s("p",{staticClass:"tr flex f-sm"},[e._v("已有账号？"),s("router-link",{attrs:{to:"/login"}},[e._v("去登陆")])],1)])],1),e._v(" "),s("mt-popup",{staticClass:"agree-poput",attrs:{position:"right"},model:{value:e.agreeVisible,callback:function(t){e.agreeVisible=t},expression:"agreeVisible"}},[s("div",[s("mt-header",{attrs:{title:"注册协议"}},[s("mt-button",{attrs:{slot:"left",icon:"back"},nativeOn:{click:function(t){e.agreeVisible=!1}},slot:"left"},[e._v("关闭")])],1),e._v(" "),s("div",{staticClass:"service-cont",domProps:{innerHTML:e._s(e.user_web)}})],1)])],1)},staticRenderFns:[]};var n=s("VU/8")(a,i,!1,function(e){s("iD5W")},"data-v-06fccf56",null);t.default=n.exports},iD5W:function(e,t){}});