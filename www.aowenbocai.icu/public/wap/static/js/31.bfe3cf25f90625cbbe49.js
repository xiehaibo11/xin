webpackJsonp([31],{"/y+B":function(t,s){},VMSC:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("mvHQ"),a=e.n(i),n=e("XYHu"),o=e("iQLX"),c=e("ZyZy"),l={name:"zucaiOrder",components:{inputNumber:n.a,BetAgreeChecked:o.a,OrderJoinSet:c.a},data:function(){return{buyType:1,loading:!1,plan:this.$store.state.zucai.plan||{},multiple:1,checked:!0,orderVisible:!1,joinVisible:!1,join:{total_share:0,buy_share:0,bd_share:0,infoTitle:"完全公开",infoState:0,gain:"0",declaration:""},is_gendan:!0,gendan:{declaration:""}}},computed:{needGames:function(){return"sfc"==this.name?14:9},playMap:function(){return this.$store.state.zucai.playMap},money:function(){return this.$store.state.userinfo.money},name:function(){return this.$route.query.name},expect:function(){return this.$route.query.expect},endtime:function(){return this.$route.query.endtime},lotteryUnit:function(){return this.$store.state.setting.lottery_unit},title:function(){return this.$route.meta.title},tempMatchData:function(){return this.$store.state.zucai.tempMatchData},games:function(){return this.$_.size(this.plan)},contentH:function(){return this.$store.state.clientHeight-196},curOpt:function(){var t=this;return this.allVisible?function(s,e){return t.checkStatus(t.tempPlan,t.curData.mid,s,e)}:function(s,e,i){return t.checkStatus(t.plan,s,e,i)}},notes:function(){var t=[],s=0;for(var e in this.plan)t.push(this.$_.size(this.plan[e]));var i=[];for(var a in this.$bet.zucaiPlzh(0,1,t,"",this.needGames,i),i){var n=i[a].split("|"),o=1;for(var c in n)o*=Number(n[c]);s+=Number(o)}return this.games<this.needGames?0:s},totalMoney:function(){return 2*this.notes*this.multiple},isGain:function(){return this.$store.state.setting.isGain},joinOpen:function(){return 1==this.$store.state.setting.join_isOpen},perMoney:function(){return this.totalMoney?this.$bet.accDiv(this.totalMoney,this.join.total_share,3):0}},methods:{countShareMoney:function(t){return this.$bet.accMul(this.perMoney,t,3)},handleJoin:function(){this.notes<1?this.$toast("至少选择1注号码才能投注！"):this.checked?(this.buyType=2,this.joinVisible=!0):this.$toast("请仔细阅读并同意相关协议！")},doBuy:function(){this.buyType=1,this.submitOrder()},getJoinEmit:function(t){this.$set(this,"join",t),this.submitOrder()},clear:function(){this.$store.commit("clearZucaiBetData"),this.resetTypeOptions(),this.$set(this,"multiple",1),this.$set(this,"plan",{})},goHome:function(){var t=this;this.games>0?this.$messagebox.confirm("返回大厅将清空所有已选的号码").then(function(){t.$store.commit("delKeepAlivePage","zucai"),t.$store.commit("delKeepAlivePage","zucaiOrder"),t.$store.commit("clearZucaiBetData"),t.$router.isBack=!0,t.$router.push({path:"/jc"})}).catch(function(t){}):(this.$router.isBack=!0,this.$router.push({path:"/jc"}))},goBack:function(){this.$store.commit("setZucaiPlan",this.plan),this.$router.goBack(-1)},checkStatus:function(t,s,e){return!!t.hasOwnProperty(s)&&!!t[s].hasOwnProperty(e)},addPlan:function(t,s,e,i){t.hasOwnProperty(s)?t[s].hasOwnProperty(e)?(this.$delete(t[s],e),"{}"==a()(t[s])&&this.$delete(t,[s])):this.$set(t[s],[e],i):(this.$set(t,[s],{}),this.$set(t[s],[e],i))},selectDone:function(t,s,e){this.addPlan(this.plan,t,s,e),console.log(a()(this.plan))},deletMatch:function(t){this.$delete(this.plan,t),this.$delete(this.tempMatchData,t),this.$store.commit("setZucaiPlan",this.plan),this.$store.commit("setZucaiTempMatchData",this.tempMatchData)},submitOrder:function(){var t=this;this.notes<1?this.$toast("至少选择1注号码才能投注！"):this.checked?(this.$store.commit("setLoadStatus",!0),this.$axios("/index/moblie/checkLogin").then(function(s){var e=s.data;t.$store.commit("setBauth",e.status),t.$store.commit("setLoadStatus",!1),e.status?(t.$store.dispatch("getUserInfo"),t.orderVisible=!0):t.$router.replace({path:"/login",query:{redirect:t.$router.currentRoute.fullPath}})})):this.$toast("请仔细阅读并同意相关协议！")},goPay:function(){this.$router.replace({path:"/pay",query:{redirect:this.$router.currentRoute.fullPath}})},payment:function(){var t=this;if(1!=this.buyType||!this.is_gendan||this.gendan.declaration.length){this.loading=!0;var s={plan:a()(this.plan),multiple:this.multiple,name:this.name,notes:this.notes,total_money:this.totalMoney,expect:this.expect,is_hemai:2==this.buyType?1:0};1==this.buyType&&(s.is_gendan=this.is_gendan?1:0,this.is_gendan&&(s.gendan_declaration=this.gendan.declaration)),2==this.buyType&&(s.total_share=this.join.total_share,s.buy_share=this.join.buy_share,s.bd_share=this.join.bd_share,s.gain=this.join.gain,s.show=this.join.infoState,s.declaration=this.join.declaration||"这个家伙很懒，只想中大奖！"),this.$axios.post("/web/ssc/betting",s).then(function(s){var e=s.data;console.log(e),t.loading=!1})}else this.$messagebox("提示","请输入跟单宣言！")},resetData:function(){this.clear(),this.buyType=1,this.join={total_share:0,buy_share:0,bd_share:0,infoTitle:"完全公开",infoState:0,gain:"0",declaration:""}}},created:function(){}},r={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"jc-order-main"},[e("mt-header",{attrs:{title:t.title}},[e("mt-button",{attrs:{slot:"left",icon:"back"},nativeOn:{click:function(s){return t.goHome(s)}},slot:"left"},[t._v("返回大厅")])],1),t._v(" "),e("div",{staticClass:"tc border-bottom-1px btn-back flex-box",staticStyle:{padding:"0 5px"}},[e("div",{staticClass:"f-sm",on:{click:t.goBack}},[t._v("+选择比赛")]),t._v(" "),e("div",{staticClass:"flex tr f-mini"},[e("em",{staticClass:"c-3 f-mini"},[t._v(t._s(t.playMap[t.name])+","+t._s(t.games)+"场,第"+t._s(t.expect)+"期,"+t._s(t.endtime)+"截止")])])]),t._v(" "),e("div",{staticClass:"jc-bet-cont jc-order contentH",style:{height:t.contentH+"px"}},[Object.keys(t.tempMatchData).length?[e("div",{ref:"wrapper",staticClass:"zucai-cont jc-bet-cont contentH",style:{height:t.contentH+"px"}},t._l(t.tempMatchData,function(s,i,a){return e("div",{staticClass:"border-bottom-1px zucai-list"},[e("div",{staticClass:"flex-box jc-item"},[e("div",{staticClass:"jc-item-left",staticStyle:{"padding-top":"0","line-height":"1.2"}},[e("p",{staticClass:"f-sm"},[t._v(t._s(s.mdata.simpleleague))]),t._v(" "),e("p",[t._v(t._s(a+1))]),t._v(" "),e("p",[t._v(t._s(s.mdata.resultscore))])]),t._v(" "),e("div",{staticClass:"jc-item-right flex"},[e("div",{staticClass:"cf zucai-bet-item"},[e("div",{staticClass:"fl bet-win item",class:{active:t.curOpt(s.mdata.fid,"3")},on:{click:function(e){return t.selectDone(s.mdata.fid,"3",s.pdata.win)}}},[e("p",[Number(s.mdata.homestanding)>0?e("i",{staticClass:"c-4 f-mini"},[t._v("["+t._s(s.mdata.homestanding)+"]")]):t._e(),t._v(t._s(s.mdata.homename))]),t._v(" "),e("p",[e("em",{staticClass:"pl"},[t._v("主胜"+t._s(s.pdata.win))])])]),t._v(" "),e("div",{staticClass:"fl bet-draw item",class:{active:t.curOpt(s.mdata.fid,"0")},on:{click:function(e){return t.selectDone(s.mdata.fid,"0",s.pdata.draw)}}},[e("p",[t._v("vs")]),t._v(" "),e("p",[e("em",{staticClass:"pl"},[t._v("平"+t._s(s.pdata.draw))])])]),t._v(" "),e("div",{staticClass:"fl bet-lost item",class:{active:t.curOpt(s.mdata.fid,"1")},on:{click:function(e){return t.selectDone(s.mdata.fid,"1",s.pdata.lost)}}},[e("p",[t._v(t._s(s.mdata.awayname)),Number(s.mdata.awaystanding)>0?e("i",{staticClass:"c-4 f-mini"},[t._v("["+t._s(s.mdata.awaystanding)+"]")]):t._e()]),t._v(" "),e("p",[e("em",{staticClass:"pl"},[t._v("客胜"+t._s(s.pdata.lost))])])])])])])])}),0)]:[e("div",{staticClass:"jc-empty tc"},[e("p",{staticClass:"ft"},[e("svg",{staticClass:"icon",attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[e("use",{attrs:{"xlink:href":"#icon-zanwubisai"}})])]),t._v(" "),e("p",{staticClass:"tc c-4"},[t._v("未选择任何赛事")]),t._v(" "),e("mt-button",{staticClass:"mt",attrs:{size:"small"},nativeOn:{click:function(s){return t.goBack(s)}}},[t._v("+ 立即添加")])],1)]],2),t._v(" "),e("div",{staticClass:"jc-order-foot"},[e("div",{staticClass:"foot-agree flex-box"},[e("bet-agree-checked",{model:{value:t.checked,callback:function(s){t.checked=s},expression:"checked"}})],1),t._v(" "),e("div",{staticClass:"foot-set flex-box"},[e("div",{staticClass:"tc flex"},[e("em",[t._v("投")]),t._v(" "),e("input-number",{attrs:{min:1,step:1},model:{value:t.multiple,callback:function(s){t.multiple=s},expression:"multiple"}}),t._v(" "),e("em",[t._v("倍")])],1)]),t._v(" "),e("div",{staticClass:"bet-submit flex-box"},[t.joinOpen?e("button",{staticClass:"bet-btn btn-sure",staticStyle:{"font-size":"14px","margin-left":"0","background-color":"#607D8B",padding:"8px 8px"},on:{click:t.handleJoin}},[t._v("合买")]):t._e(),t._v(" "),e("div",{staticClass:"acount-award flex tr"},[e("p",{staticClass:"f-sm"},[t._v("投注金额"),e("b",{staticClass:"red"},[t._v(t._s(t.totalMoney))]),t._v(t._s(t.lotteryUnit))]),t._v(" "),e("p",{staticClass:"f-mini c-3"},[t._v("共"+t._s(t.notes)+"注")])]),t._v(" "),e("button",{staticClass:"bet-btn btn-sure",on:{click:t.doBuy}},[t._v("提交")])])]),t._v(" "),e("mt-popup",{attrs:{position:"bottom"},model:{value:t.orderVisible,callback:function(s){t.orderVisible=s},expression:"orderVisible"}},[t.orderVisible?e("div",{staticClass:"jc-orders-info"},[e("div",{staticClass:"order-title org border-bottom-1px"},[t._v("订单信息确认")]),t._v(" "),e("div",{staticClass:"order-info"},[e("div",[e("span",{staticClass:"name"},[t._v("投注彩种:")]),t._v(" "),e("span",{staticClass:"info"},[t._v(t._s(t.playMap[t.name]))])]),t._v(" "),2==t.buyType?e("div",[e("span",{staticClass:"name"},[t._v("购买方式:")]),t._v(" "),e("span",{staticClass:"info"},[t._v("发起合买")])]):t._e(),t._v(" "),1==t.buyType?e("div",{staticClass:"gendan-set"},[e("div",{staticClass:"flex-box"},[e("span",{staticClass:"name"},[t._v("发起跟单:")]),t._v(" "),e("span",{staticClass:"info gendan-btn"},[e("em",{class:{active:t.is_gendan},on:{click:function(s){t.is_gendan=!0}}},[t._v("发起")]),t._v(" "),e("em",{class:{active:!t.is_gendan},on:{click:function(s){t.is_gendan=!1}}},[t._v("不发起")])])]),t._v(" "),e("div",{staticClass:"c-3 f-mini mt-sm mf-sm",staticStyle:{"line-height":"1.2"}},[t._v("发起跟单开启，彩民跟单中奖盈利后您可获得一定比例的佣金。")]),t._v(" "),t.is_gendan?[e("div",{staticClass:"gendan-set-info"},[e("div",{staticClass:"gendan-tips tl mt-sm mf-sm"},[e("mt-button",{staticClass:"org",attrs:{size:"small"}},[t._v("本方案起跟金额："+t._s(2*t.notes)+t._s(t.lotteryUnit))])],1),t._v(" "),e("div",{staticClass:"flex-box",staticStyle:{"align-items":"flex-start"}},[e("div",{staticClass:"name"},[t._v("跟单宣言:")]),t._v(" "),e("div",{staticClass:"gendan-xy flex"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.gendan.declaration,expression:"gendan.declaration"}],attrs:{placeholder:"好的方案宣言能够帮您获得更多的跟单，字数在50字内!",rows:"3"},domProps:{value:t.gendan.declaration},on:{input:function(s){s.target.composing||t.$set(t.gendan,"declaration",s.target.value)}}})])])])]:t._e()],2):t._e(),t._v(" "),e("div",[e("span",{staticClass:"name"},[t._v("方案金额:")]),t._v(" "),e("span",{staticClass:"info"},[e("b",{staticClass:"red f-large"},[t._v(t._s(t.totalMoney))]),t._v(t._s(t.lotteryUnit)+"\n                        "),e("span",{staticClass:"join-tip"},[t._v("\n                                ("+t._s(t.notes)+"注 "),e("em",[t._v(t._s(t.multiple)+"倍")]),t._v(")\n                        ")])])]),t._v(" "),2==t.buyType?[e("div",[e("span",{staticClass:"name"},[t._v("认购金额:")]),t._v(" "),e("span",{staticClass:"info"},[e("b",{staticClass:"red f-large"},[t._v(t._s(t.countShareMoney(t.join.buy_share+t.join.bd_share)))]),t._v(" "+t._s(t.lotteryUnit)+" "),e("em",{staticClass:"c-3 f-mini"},[t._v("(认购"+t._s(t.countShareMoney(t.join.buy_share))+t._s(t.lotteryUnit)+"+保底"+t._s(t.countShareMoney(t.join.bd_share))+t._s(t.lotteryUnit)+")")])])]),t._v(" "),t.isGain?e("div",[e("span",{staticClass:"name"},[t._v("盈利佣金:")]),t._v(" "),e("span",{staticClass:"info"},[t._v(t._s(t.join.gain)+"%")])]):t._e()]:t._e(),t._v(" "),e("div",[e("span",{staticClass:"name"},[t._v("账户余额:")]),t._v(" "),e("span",{staticClass:"info"},[e("em",[t._v(t._s(t.money))]),t._v(" "+t._s(t.lotteryUnit))]),t._v(" "),t.money<t.totalMoney?e("span",{staticClass:"tips tc",staticStyle:{"font-size":"14px",color:"#333"}},[e("b",{staticClass:"red"},[t._v("（余额不足，请充值!）")])]):t._e()])],2),t._v(" "),e("div",{staticClass:"order-footer tr"},[e("mt-button",{staticClass:"cancel",attrs:{size:"small"},on:{click:function(s){t.orderVisible=!1}}},[t._v("取消")]),t._v(" "),t.money<t.totalMoney?e("mt-button",{attrs:{type:"primary",size:"small"},on:{click:t.goPay}},[t._v("立即充值")]):e("mt-button",{attrs:{type:"primary",size:"small"},on:{click:t.payment}},[t.loading?e("mt-spinner",{staticClass:"btn-loading",attrs:{slot:"icon",type:3,size:15,color:"#fff"},slot:"icon"}):t._e(),t._v("\n                    确定购买\n                ")],1)],1)]):t._e()]),t._v(" "),e("transition",{attrs:{name:"slide-left"}},[t.joinVisible?e("div",{staticClass:"join-visible"},[e("order-join-set",{attrs:{"total-money":t.totalMoney,multiple:t.multiple,"total-notes":t.notes},on:{"submit-order":t.getJoinEmit},model:{value:t.joinVisible,callback:function(s){t.joinVisible=s},expression:"joinVisible"}})],1):t._e()])],1)},staticRenderFns:[]};var u=e("VU/8")(l,r,!1,function(t){e("/y+B")},"data-v-e1507cbe",null);s.default=u.exports}});