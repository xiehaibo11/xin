webpackJsonp([64],{sp5z:function(e,t){},swIw:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{loading:!1,telYzm:"",emailYzm:"",changeWay:0,sheetVisible:!1,actions:[{name:"男",method:this.choseSex1},{name:"女",method:this.choseSex2},{name:"保密",method:this.choseSex3}],nickname:this.$store.state.userinfo.nickname||"",explan:this.$store.state.userinfo.explan||"",sex:this.$store.state.userinfo.sex||"",birth:this.$store.state.userinfo.birth||"1900-01-01",real_name:this.$store.state.lockInfo.is_name||"",qq:this.$store.state.userinfo.qq||""}},components:{SafeCheck:s("V/qW").a},computed:{userid:function(){return this.$store.state.userinfo.id},name:function(){return this.$store.state.userinfo.username},userinfo:function(){return this.$store.state.userinfo},lockTel:function(){return 1!==this.$store.state.lockInfo.tel},lockEmail:function(){return 1!==this.$store.state.lockInfo.email},isYzm:function(){return!!Number(this.$store.state.setting.tel_checked)},isEmail:function(){return!!Number(this.$store.state.setting.email_checked)},isChose:function(){return!(!this.isYzm&&!this.isEmail)},idname:function(){return this.$store.state.lockInfo.is_name||""},isQq:function(){return!!Number(this.$store.state.setting.reg_way.common)}},watch:{userinfo:function(e){e&&(this.$set(this,"nickname",e.nickname),this.$set(this,"explan",e.explan),this.$set(this,"sex",e.sex),this.$set(this,"birth",e.birth))}},methods:{choseSex1:function(){this.sex=1},choseSex2:function(){this.sex=2},choseSex3:function(){this.sex=3},checkTel:function(){var e=this;this.lockTel?this.changeWay=1:this.$messagebox.confirm("您还未绑定手机，立即去绑定?").then(function(){e.$router.push({path:"/setTel"})}).catch(function(e){})},checkEmail:function(){var e=this;this.lockEmail?this.changeWay=2:this.$messagebox.confirm("您还未绑定邮箱，立即去绑定?").then(function(){e.$router.push({path:"/setEmail"})}).catch(function(e){})},sumbit:function(){var e=this;if(this.nickname)if(this.idname.length||this.real_name.length){if(this.isChose){if(!this.changeWay)return void this.$messagebox("提示","请选择验证方式");if(1==this.changeWay&&!this.telYzm)return void this.$toast("验证码不能为空");if(2==this.changeWay&&!this.emailYzm)return void this.$toast("验证码不能为空")}this.loading=!0;var t=this.changeWay?1==this.changeWay?this.telYzm:this.emailYzm:"",s={changeWay:this.changeWay,yzm:t,nickname:this.nickname,explan:this.explan,sex:this.sex,birth:this.birth};this.idname.length||(s.real_name=this.real_name),this.isQq&&(s.qq=this.qq),this.$axios.post("/web/user/checkInfoChange",s).then(function(t){var s=t.data;s.err||(e.$store.dispatch("getUserInfo"),e.$store.dispatch("getLockInfo"),setTimeout(function(){e.$router.goBack(-1)},1e3)),e.$toast({message:s.msg,duration:1e3}),e.loading=!1}).catch(function(e){console.log(e)})}else this.$messagebox("提示","请填写真实姓名");else this.$messagebox("提示","昵称不能为空")}}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"form"},[s("div",{staticClass:"input-title"},[e._v("基本资料")]),e._v(" "),s("div",[s("mt-field",{attrs:{label:"用户ID",placeholder:"用户ID",value:e.userid,type:"text",disabled:""}}),e._v(" "),s("mt-field",{attrs:{label:"账号",placeholder:"账号",value:e.name,type:"text",disabled:""}}),e._v(" "),s("mt-field",{attrs:{label:"真实姓名",placeholder:"真实姓名",type:"text",disabled:!!e.idname.length},model:{value:e.real_name,callback:function(t){e.real_name=t},expression:"real_name"}},[e.idname.length?s("span",{staticClass:"red f-mini ml-sm"},[e._v("如需修改，请联系客服")]):e._e()]),e._v(" "),s("mt-field",{attrs:{label:"昵称",placeholder:"请输入昵称",type:"text"},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}}),e._v(" "),s("a",{staticClass:"mint-cell",on:{click:function(t){e.sheetVisible=!0}}},[s("div",{staticClass:"mint-cell-wrapper"},[e._m(0),e._v(" "),s("div",{staticClass:"mint-cell-value is-link"},[1==e.sex?s("div",{staticClass:"c-1"},[e._v("男")]):e._e(),e._v(" "),2==e.sex?s("div",{staticClass:"c-1"},[e._v("女")]):e._e(),e._v(" "),3==e.sex?s("div",{staticClass:"c-1"},[e._v("保密")]):e._e(),e._v(" "),1!==e.sex&&2!==e.sex&&3!==e.sex?s("div",{staticClass:"c-4"},[e._v("未设置")]):e._e()]),e._v(" "),s("i",{staticClass:"mint-cell-allow-right"})])]),e._v(" "),s("a",{staticClass:"mint-cell"},[s("div",{staticClass:"mint-cell-wrapper"},[e._m(1),e._v(" "),s("div",{staticClass:"mint-cell-value is-link flex"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.birth,expression:"birth"}],attrs:{type:"date"},domProps:{value:e.birth},on:{input:function(t){t.target.composing||(e.birth=t.target.value)}}})]),e._v(" "),s("i",{staticClass:"mint-cell-allow-right"})])]),e._v(" "),s("mt-field",{attrs:{label:"QQ号码",placeholder:"请输入QQ号码",type:"text"},model:{value:e.qq,callback:function(t){e.qq=t},expression:"qq"}}),e._v(" "),s("mt-field",{attrs:{label:"签名",placeholder:"请输入个性签名",type:"text"},model:{value:e.explan,callback:function(t){e.explan=t},expression:"explan"}})],1),e._v(" "),s("mt-actionsheet",{attrs:{actions:e.actions},model:{value:e.sheetVisible,callback:function(t){e.sheetVisible=t},expression:"sheetVisible"}}),e._v(" "),[s("div",{staticClass:"relative"},[e.isChose?s("div",{staticClass:"input-title"},[e._v("安全验证")]):e._e(),e._v(" "),e.isChose&&0==e.changeWay?s("div",{},[e.isYzm?s("mt-cell",{attrs:{title:"验证已绑定手机",label:"已绑定手机且该手机能接收短信","is-link":""},nativeOn:{click:function(t){return e.checkTel(t)}}},[s("i",{staticClass:"iconfont icon-ai-bind-cel",attrs:{slot:"icon"},slot:"icon"})]):e._e(),e._v(" "),e.isEmail?s("mt-cell",{attrs:{title:"验证已绑定邮箱",label:"已绑定邮箱且该邮箱能接收邮件","is-link":""},nativeOn:{click:function(t){return e.checkEmail(t)}}},[s("i",{staticClass:"iconfont icon-mail",attrs:{slot:"icon"},slot:"icon"})]):e._e()],1):e._e(),e._v(" "),e.changeWay?s("a",{staticClass:"link f-sm change-way-link",staticStyle:{"text-decoration":"underline"},on:{click:function(t){e.changeWay=0}}},[e._v("更换验证方式")]):e._e(),e._v(" "),[s("safe-check",{directives:[{name:"show",rawName:"v-show",value:1==e.changeWay,expression:"changeWay == 1"}],attrs:{url:"/index/user/sendSmsInfo","check-way":1},model:{value:e.telYzm,callback:function(t){e.telYzm=t},expression:"telYzm"}})],e._v(" "),[s("safe-check",{directives:[{name:"show",rawName:"v-show",value:2==e.changeWay,expression:"changeWay == 2"}],attrs:{url:"/web/user/sendInfoEmail","check-way":2},model:{value:e.emailYzm,callback:function(t){e.emailYzm=t},expression:"emailYzm"}})]],2)],e._v(" "),s("div",{staticClass:"btn-box"},[s("mt-button",{attrs:{type:"danger",size:"large"},nativeOn:{click:function(t){return e.sumbit(t)}}},[e.loading?s("mt-spinner",{staticClass:"btn-loading",attrs:{slot:"icon",type:3,size:15,color:"#fff"},slot:"icon"}):e._e(),e._v("\n            保 存\n        ")],1)],1)],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mint-cell-title"},[t("span",{staticClass:"mint-cell-text"},[this._v("性别")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mint-cell-title"},[t("span",{staticClass:"mint-cell-text"},[this._v("生日")])])}]};var n=s("VU/8")(i,a,!1,function(e){s("sp5z")},"data-v-5bc7c80d",null);t.default=n.exports}});