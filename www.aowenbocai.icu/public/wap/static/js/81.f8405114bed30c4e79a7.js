webpackJsonp([81],{"1xNL":function(t,a){},"5jzw":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("Au9i"),i={name:"pay",data:function(){return{isChange:!1,cur:0,money:1,awards:0,payWay:0==this.$store.state.rechargeInfo.select_other_pay?this.$store.state.rechargeInfo.paysetting.pay_alipay?"alipaySao":this.$store.state.rechargeInfo.paysetting.pay_wx?"wxSao":"bankTransfer":this.$store.state.rechargeInfo.select_other_pay,payWayChild:"",weiUrl:"",other:"",otherAward:0,state:!1}},computed:{gameStatus:function(){return 1==this.$store.state.setting.game_status},recharge_info:function(){return this.$store.state.setting.recharge_info},userinfo:function(){return this.$store.state.userinfo},coin:function(){return this.$store.state.setting.lottery_unit},gameUnit:function(){return this.$store.state.setting.game_unit},rechargeInfo:function(){return this.$store.state.rechargeInfo},listData:function(){return this.rechargeInfo.rechargeList},other_pay:function(){return this.$store.state.rechargeInfo.paysetting.third_pay},options:function(){var t=[];if(this.rechargeInfo.paysetting.other_alipay&&t.push({title:"支付宝支付",id:"alipay"}),this.rechargeInfo.paysetting.other_wx&&t.push({title:"微信支付",id:"wx"}),0!==this.rechargeInfo.select_other_pay)for(var a in this.other_pay)t.push(this.other_pay[a]);return t},saoOptions:function(){var t=[];return this.rechargeInfo.paysetting.pay_alipay&&t.push({label:"支付宝扫码",value:"alipaySao"}),this.rechargeInfo.paysetting.pay_wx&&t.push({label:"微信扫码",value:"wxSao"}),t},award:function(){return this.rechargeInfo.award},scaleCoin:function(){return this.$store.state.setting.recharge_award},otherMoney:function(){return this.$base.isValueNumber(this.other)?this.isChange?this.other/this.scaleCoin:this.other:""}},watch:{other:function(t){if(this.otherMoney<1)this.otherAward=0;else for(var a in this.listData)parseInt(this.otherMoney)>=this.listData[a].money&&(this.isChange?this.otherAward=Math.floor(this.award[parseInt(this.listData[a].money)]*(t/this.scaleCoin)*100/100):this.otherAward=Math.floor(this.award[parseInt(this.listData[a].money)]*t*100/100))},isChange:function(){this.checkMoney()},payWay:function(t){if(this.payWayChild="","alipay"!==t&&"wx"!==t&&"alipaySao"!==t&&"wxSao"!==t)for(var a in this.other_pay)t==this.other_pay[a].id&&this.other_pay[a].children&&(this.payWayChild=this.other_pay[a].children[0].id)}},methods:{otherRecharge:function(){this.cur=-1},checkMoney:function(){var t=parseInt(this.other),a=parseInt(this.scaleCoin);this.other?(this.state=!1,this.isChange?(this.state=!1,this.other=t<a?this.scaleCoin:Math.ceil(t/a)*a):this.other=parseInt(t)):this.state=!0},choseRechage:function(t,a,e){this.money=t,this.cur=a,this.awards=e},next:function(){var t=this,a=-1==this.cur?this.otherMoney:this.money,e="&type="+(this.isChange?1:2);if(-1!=this.cur||a)if("alipay"==this.payWay)s.Indicator.open({spinnerType:"fading-circle"}),location.href="/pay/pay/payToAlipay?total_amount="+a+e;else if("wx"==this.payWay)s.Indicator.open({spinnerType:"fading-circle"}),this.$axios.get("/pay/pay/payToWei",{params:{type:e,total_amount:a}}).then(function(a){var e=a.data;s.Indicator.close(),t.$router.push({path:"/payWeiRes",query:{res:e}})}).catch(function(t){var a=t.error;s.Indicator.close(),console.log(a)});else{if("alipaySao"==this.payWay||"wxSao"==this.payWay){var i=this.$route.query.redirect,r={money:a,payWay:this.payWay,type:this.isChange?1:2};return i&&(r.redirect=i),void this.$router.replace({path:"/saoPay",query:r})}if("bankTransfer"==this.payWay){var n=this.$route.query.redirect,o={money:a,payWay:4,type:this.isChange?1:2};n&&(o.redirect=n),this.$router.replace({path:"/bankPay",query:o})}else{s.Indicator.open({spinnerType:"fading-circle"});var c="&third_id="+this.payWay,h=this.payWayChild?"&third_type="+this.payWayChild:"";location.href="/pay/pay/payToThird?total_amount="+a+e+c+h}}else this.$messagebox("提示","请输入购买数量")}},created:function(){if(this.money=this.rechargeInfo.rechargeList[0].money,this.awards=this.rechargeInfo.rechargeList[0].award,this.$store.commit("setKeepAlivePage","pay"),this.payWayChild="","alipay"!==this.payWay&&"wx"!==this.payWay&&"alipaySao"!==this.payWay&&"wxSao"!==this.payWay&&"bankTransfer"!==this.payWay)for(var t in this.other_pay)this.payWay==this.other_pay[t].id&&this.other_pay[t].children&&(this.payWayChild=this.other_pay[t].children[0].id)},beforeRouteLeave:function(t,a,e){"/payWeiRes"==t.path||"/saoPay"==t.path?this.$store.commit("setKeepAlivePage","pay"):this.$store.commit("delKeepAlivePage","pay"),e()}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"card pay-header f-sm"},[e("p",[e("em",[t._v("账号：")]),t._v(t._s(t.userinfo.nickname)+"（"+t._s(t.userinfo.username)+"）\n        ")]),t._v(" "),e("p",[e("em",[t._v("账户余额：")]),t._v(" "),e("b",{staticClass:"org"},[t._v(" "+t._s(t.userinfo.money)+" "+t._s(t.coin))])]),t._v(" "),t.gameStatus?e("p",[e("em",[t._v("游戏账户：")]),t._v(" "),e("b",{staticClass:"org"},[t._v(" "+t._s(t.userinfo.game_money)+" "+t._s(t.gameUnit))])]):t._e()]),t._v(" "),e("div",{staticClass:"card mt"},[e("div",{staticClass:"flex-box pay-way border-bottom-1px"},[e("div",{staticClass:"flex"},[t._v("充值"+t._s(t.isChange?t.gameUnit:t.coin))]),t._v(" "),t.gameStatus?[e("div",{staticClass:"c-2 f-sm change"},[t._v("转换成游戏币")]),t._v(" "),e("mt-switch",{model:{value:t.isChange,callback:function(a){t.isChange=a},expression:"isChange"}})]:t._e()],2),t._v(" "),e("div",[e("div",{staticClass:"pay-title"},[t._v("充值金额")]),t._v(" "),e("ul",{staticClass:"change-list clearfloat"},[t._l(t.rechargeInfo.rechargeList,function(a,s){return e("li",[e("div",{staticClass:"list",class:{active:t.cur==s},on:{click:function(e){return t.choseRechage(a.money,s,a.award)}}},[e("div",{staticClass:"coin c-2 f-sm"},[t.isChange?e("p",[t._v(t._s(a.coin)),e("em",{staticClass:"f-sm c-3"},[t._v(t._s(t.gameUnit))])]):e("p",[t._v(t._s(a.lottery_money)),e("em",{staticClass:"f-sm c-3"},[t._v(t._s(t.coin))])])]),t._v(" "),e("div",[e("em",{staticClass:"c-2"},[t._v(t._s(a.money)+"元")])])])])}),t._v(" "),e("li",{class:[{active:-1==t.cur},{error:t.state}],on:{click:function(a){t.cur=-1}}},[e("div",{staticClass:"list",class:{active:-1==t.cur}},[e("div",{staticClass:"coin c-2 f-sm flex-box",staticStyle:{height:"25px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.other,expression:"other"}],staticClass:"input-money",attrs:{type:"tel",placeholder:"其他数量"},domProps:{value:t.other},on:{blur:t.checkMoney,focus:t.otherRecharge,input:function(a){a.target.composing||(t.other=a.target.value)}}})]),t._v(" "),e("div",[e("em",{staticClass:"c-2"},[t._v(t._s(t.otherMoney)+"元")])])])])],2),t._v(" "),-1!==t.cur&&t.awards>0&&t.rechargeInfo.has_recharge_times>0||-1==t.cur&&t.otherAward>0&&t.rechargeInfo.has_recharge_times>0?[e("div",{staticClass:"pd f-mini c-3 mf tips"},[t._v("可额外获得\n                    "),-1!==t.cur?e("em",{staticClass:"org"},[t._v(t._s(t.awards))]):e("em",{staticClass:"org"},[t._v(t._s(t.otherAward))]),e("em",{staticClass:"org"},[t._v(t._s(t.coin))]),t._v(" "),e("em",{staticClass:"c-3 f-mini"},[t._v(" （每日充值赠送"+t._s(t.rechargeInfo.recharge_send_times)+"次，今日剩余"+t._s(t.rechargeInfo.has_recharge_times)+"次）")])])]:t._e()],2)]),t._v(" "),e("div",{staticClass:"pd mt mf"},[t._v("支付方式")]),t._v(" "),e("div",{staticClass:"tabs card"},[t.rechargeInfo.paysetting.other_alipay||t.rechargeInfo.paysetting.other_wx||0!==t.rechargeInfo.select_other_pay?e("div",[e("label",{staticClass:"mint-radiolist-title"},[t._v("三方支付")]),t._v(" "),t._l(t.options,function(a,s){return[e("a",{staticClass:"mint-cell",on:{click:function(e){t.payWay=a.id}}},[e("div",{staticClass:"mint-cell-left"}),t._v(" "),e("div",{staticClass:"mint-cell-wrapper"},[e("div",{staticClass:"mint-cell-title"},[e("label",{staticClass:"mint-radiolist-label"},[e("span",{staticClass:"mint-radio is-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.payWay,expression:"payWay"}],staticClass:"mint-radio-input",attrs:{type:"radio"},domProps:{value:a.id,checked:t._q(t.payWay,a.id)},on:{change:function(e){t.payWay=a.id}}}),t._v(" "),e("span",{staticClass:"mint-radio-core"})]),t._v(" "),e("span",{staticClass:"mint-radio-label"},[t._v(t._s(a.title))])])]),t._v(" "),e("div",{staticClass:"mint-cell-value"})]),t._v(" "),e("div",{staticClass:"mint-cell-right"})]),t._v(" "),a.children?e("div",{staticClass:"third-pay-children"},[t.payWay==a.id?e("ul",{staticClass:"cf"},t._l(a.children,function(a,s){return e("li",{staticClass:"fl",class:{active:t.payWayChild==a.id},on:{click:function(e){t.payWayChild=a.id}}},[t._v("\n                            "+t._s(a.title)+"\n                        ")])}),0):t._e()]):t._e()]})],2):t._e(),t._v(" "),t.rechargeInfo.paysetting.pay_alipay||t.rechargeInfo.paysetting.pay_wx?e("div",[e("mt-radio",{attrs:{align:"right",title:"扫码支付",options:t.saoOptions},model:{value:t.payWay,callback:function(a){t.payWay=a},expression:"payWay"}})],1):t._e(),t._v(" "),Number(t.rechargeInfo.bank_open)?e("div",[e("label",{staticClass:"mint-radiolist-title"},[t._v("银行卡转账")]),t._v(" "),e("a",{staticClass:"mint-cell",on:{click:function(a){t.payWay="bankTransfer"}}},[e("div",{staticClass:"mint-cell-left"}),t._v(" "),e("div",{staticClass:"mint-cell-wrapper"},[e("div",{staticClass:"mint-cell-title"},[e("label",{staticClass:"mint-radiolist-label"},[e("span",{staticClass:"mint-radio is-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.payWay,expression:"payWay"}],staticClass:"mint-radio-input",attrs:{type:"radio",value:"bankTransfer"},domProps:{checked:t._q(t.payWay,"bankTransfer")},on:{change:function(a){t.payWay="bankTransfer"}}}),t._v(" "),e("span",{staticClass:"mint-radio-core"})]),t._v(" "),e("span",{staticClass:"mint-radio-label"},[t._v("银行卡转账")])])]),t._v(" "),e("div",{staticClass:"mint-cell-value"})]),t._v(" "),e("div",{staticClass:"mint-cell-right"})])]):t._e()]),t._v(" "),e("div",{staticClass:"pay-count pd mt"},[t._v("需支付 "),-1==t.cur?e("b",{staticClass:"red f-large"},[t._v(t._s(t.otherMoney||0))]):e("b",{staticClass:"red f-large"},[t._v(t._s(t.money))]),t._v(" 元")]),t._v(" "),e("div",{staticClass:"btn-box"},[e("mt-button",{attrs:{size:"large",type:"danger"},nativeOn:{click:function(a){return t.next(a)}}},[t._v("下一步")])],1),t._v(" "),e("div",{staticClass:"pd mf"},[e("h5",{staticClass:"c-2 f-sm"},[t._v("温馨提示：")]),t._v(" "),e("p",{staticClass:"c-3 f-sm"},[t._v(t._s(t.recharge_info))])])])},staticRenderFns:[]};var n=e("VU/8")(i,r,!1,function(t){e("1xNL")},"data-v-3295ed76",null);a.default=n.exports}});