webpackJsonp([10],{"+31g":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("9a9e"),i=s("5jp3"),n={name:"oSelect",model:{prop:"value",event:"change"},props:{selectOptions:{type:Array},value:{type:String,default:""},selectStatus:{default:!1},defaultIndex:{default:0}},data:function(){return{svalue:this.value}},methods:{shoseOptions:function(t){this.defaultIndex=t,this.svalue=this.selectOptions[this.defaultIndex].value,this.$emit("change",this.svalue)},changeStatus:function(){this.$emit("change-status")}},created:function(){}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"select-box",on:{click:t.changeStatus}},[s("span",{staticClass:"select-title",class:{"select-title-active":t.selectStatus}},[t._v("\n        "+t._s(t.selectOptions[t.defaultIndex].label)+"\n        "),s("i",{staticClass:"iconfont icon-xialajiantou f-mini c-4 rotateIcon",class:t.selectStatus?"is-active":"no-active"})]),t._v(" "),s("transition",{attrs:{name:"slide-down"}},[s("ul",{directives:[{name:"show",rawName:"v-show",value:t.selectStatus,expression:"selectStatus"}],staticClass:"select-options"},t._l(t.selectOptions,function(e,a){return s("li",{key:a,staticClass:"select-option-item c-2 f-mini",class:{active:t.defaultIndex==a},on:{click:function(e){return t.shoseOptions(a)}}},[t._v("\n               "+t._s(e.label)+"\n           ")])}),0)]),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.selectStatus,expression:"selectStatus"}],staticClass:"v-modal",staticStyle:{"z-index":"-100",top:"108px"}})])],1)},staticRenderFns:[]};var o=s("VU/8")(n,l,!1,function(t){s("2mSo")},"data-v-1d420c30",null).exports,r={name:"lotteryRecord",components:{pageItem:a.a,unitConvert:i.a,PullSelect:o},data:function(){return{op1:!1,op2:!1,op3:!1,defaultIndex:0,gameid:"",join:"",bounsStatus:"",readArr:[],isrefresh:!0}},computed:{cz:function(){return this.$route.query.cz},contentH:function(){return this.$store.state.clientHeight-78},url:function(){var t=this.gameid?"?gameid="+this.gameid:"?gameid=",e=this.join?"&join="+this.join:"";return"/web/details/games"+t+(this.bounsStatus?"&bounsStatus="+this.bounsStatus:"")+e},lotteryUnit:function(){return this.$store.state.setting.lottery_unit},lotteryNav:function(){return this.$store.state.lotteryNav},name:function(){for(var t in this.lotteryNav)if(this.gameid==this.lotteryNav[t].value)return this.lotteryNav[t].label},join_isOpen:function(){return 1==this.$store.state.setting.join_isOpen},orderOptions:function(){return this.join_isOpen?[{value:"",label:"所有类型"},{value:"0",label:"自购"},{value:"3",label:"追号"},{value:"1",label:"发起合买"},{value:"2",label:"参与合买"}]:[{value:"",label:"所有类型"},{value:"0",label:"自购"},{value:"3",label:"追号"}]},statusOptions:function(){return this.join_isOpen?[{value:"",label:"所有状态"},{value:"311",label:"合买中"},{value:"0",label:"等待开奖"},{value:"1",label:"已中奖"},{value:"2",label:"未中奖"},{value:"8",label:"用户撤单"},{value:"6",label:"流产撤单"},{value:"7",label:"系统撤单"}]:[{value:"",label:"所有状态"},{value:"0",label:"等待开奖"},{value:"1",label:"已中奖"},{value:"2",label:"未中奖"},{value:"8",label:"用户撤单"},{value:"7",label:"系统撤单"}]}},methods:{changeVisible1:function(){this.op1=!this.op1,this.op2=!1,this.op3=!1},changeVisible2:function(){this.op2=!this.op2,this.op1=!1,this.op3=!1},changeVisible3:function(){this.op3=!this.op3,this.op1=!1,this.op2=!1},toOrders:function(t,e,s,a){this.$store.commit("setPageYOffset",this.$refs.wrapper.scrollTop),-1==this.readArr.indexOf(e)&&this.readArr.push(e);var i=void 0;s&&!a?i="/chase":s||a?a&&(i="/ordersJoin"):i="/orders",this.$router.push({path:i,query:{cz:this.cz,lottery_id:t,id:e}})},cancelOrder:function(t){var e=this;this.$messagebox.confirm("确定要撤销该订单吗?").then(function(){e.$axios.get("/web/orders/returnTicket",{params:{lottery_id:t}}).then(function(t){var s=t.data;s.err?e.$messagebox("提示",s.msg):e.$messagebox.alert(s.msg).then(function(t){e.isrefresh=!1,e.$nextTick(function(){e.isrefresh=!0})})})}).catch(function(t){})}},created:function(){if(this.$store.commit("setKeepAlivePage","lotteryRecord"),"/chaseRecord"==this.$route.path&&(this.join="3"),this.$route.query.name)for(var t in this.gameid=this.$route.query.name,this.lotteryNav)this.gameid==this.lotteryNav[t].value&&(this.defaultIndex=t)},beforeRouteLeave:function(t,e,s){"/ordersJoin"==t.path||"/orders"==t.path||"/chase"==t.path?this.$store.commit("setKeepAlivePage","lotteryRecord"):this.$store.commit("delKeepAlivePage","lotteryRecord"),s()},activated:function(){this.$refs.wrapper.scrollTop=this.$store.state.pageYOffset}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"detail"},[s("div",{staticClass:"border-bottom-1px"},[s("div",{staticClass:"options flex-box",staticStyle:{position:"relative"}},[s("pull-select",{staticClass:"flex",attrs:{selectOptions:t.lotteryNav,"default-index":t.defaultIndex,"select-status":t.op1},on:{"change-status":t.changeVisible1},model:{value:t.gameid,callback:function(e){t.gameid=e},expression:"gameid"}}),t._v(" "),"/lotteryRecord"==t.$route.path?s("pull-select",{staticClass:"flex",attrs:{selectOptions:t.orderOptions,"select-status":t.op2},on:{"change-status":t.changeVisible2},model:{value:t.join,callback:function(e){t.join=e},expression:"join"}}):t._e(),t._v(" "),s("pull-select",{staticClass:"flex",attrs:{selectOptions:t.statusOptions,"select-status":t.op3},on:{"change-status":t.changeVisible3},model:{value:t.bounsStatus,callback:function(e){t.bounsStatus=e},expression:"bounsStatus"}})],1)]),t._v(" "),s("div",{ref:"wrapper",staticClass:"contentH",style:{height:t.contentH+"px"}},[t.isrefresh?s("page-item",{attrs:{url:t.url},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.data,function(e,a){return s("a",{key:a,staticClass:"mint-cell",class:{"c-3":t.readArr.indexOf(e.buy_id)>-1},on:{click:function(s){return t.toOrders(e.BuyInfo.lottery_id,e.buy_id,e.BuyInfo.isChase,e.BuyInfo.is_join)}}},[s("div",{staticClass:"mint-cell-left"}),t._v(" "),s("div",{staticClass:"mint-cell-wrapper"},[s("div",{staticClass:"mint-cell-title"},[s("span",{staticClass:"mint-cell-text"},[t._v(t._s(e.ext_txt)+" "),e.BuyInfo.is_join?s("i",{staticClass:"icon-ts icon-hm"},[t._v("合")]):t._e(),e.BuyInfo.isChase?s("i",{staticClass:"icon-ts icon-zh"},[t._v("追")]):t._e()]),t._v(" "),s("span",{staticClass:"mint-cell-label"},[t._v(t._s(e.create_time))])]),t._v(" "),s("div",{staticClass:"mint-cell-value is-link"},[0==e.BuyInfo.statusCode?s("span",{staticClass:"c-1"},[e.BuyInfo.is_join?[e.BuyInfo.finsh?s("em",[t._v("未出票")]):s("em",[t._v("合买中")])]:[t._v("\n                                        未出票\n                                    ")]],2):t._e(),t._v(" "),1==e.BuyInfo.statusCode?s("span",{staticClass:"suc"},[t._v("等待开奖")]):t._e(),t._v(" "),2==e.BuyInfo.statusCode&&e.bonus>0?s("span",{staticClass:"red"},[t._v("已中奖 ("+t._s(e.bonus)+t._s(t.lotteryUnit)+")")]):t._e(),t._v(" "),2==e.BuyInfo.statusCode&&0==e.bonus?s("span",{staticClass:"c-3"},[t._v("未中奖")]):t._e(),t._v(" "),6==e.BuyInfo.statusCode?s("span",{staticClass:"c-3"},[t._v("流产撤单")]):t._e(),t._v(" "),7==e.BuyInfo.statusCode?s("span",{staticClass:"c-3"},[t._v("系统撤单")]):t._e(),t._v(" "),8==e.BuyInfo.statusCode?s("span",{staticClass:"c-3"},[t._v("用户撤单")]):t._e(),t._v(" "),e.BuyInfo.statusCode<=1&&!e.BuyInfo.is_join?s("span",[s("mt-button",{attrs:{type:"danger",size:"small"},nativeOn:{click:function(s){return s.target!==s.currentTarget?null:(s.stopPropagation(),t.cancelOrder(e.BuyInfo.lottery_id))}}},[t._v("撤单")])],1):t._e(),t._v(" "),s("span",{staticClass:"mint-cell-label"},[t._v("投注"),s("em",{staticClass:"org"},[t._v(t._s(e.money))]),t._v(t._s(t.lotteryUnit))])]),t._v(" "),s("i",{staticClass:"mint-cell-allow-right"})]),t._v(" "),s("div",{staticClass:"mint-cell-right"})])})}}],null,!1,463310075)}):t._e()],1)])])},staticRenderFns:[]};var u=s("VU/8")(r,c,!1,function(t){s("AawZ")},"data-v-0a50409c",null);e.default=u.exports},"2mSo":function(t,e){},"5jp3":function(t,e,s){"use strict";var a={render:function(){var t=this.$createElement;return(this._self._c||t)("em",[this._v("1"+this._s(this.unit)+"="+this._s(this.scaleLottery)+this._s(this.coin))])},staticRenderFns:[]};var i=s("VU/8")({name:"unitConvert",data:function(){return{}},computed:{coin:function(){return this.$store.state.coinName},unit:function(){return this.$store.state.setting.lottery_unit},scaleLottery:function(){return this.$store.state.setting.coin_lottery}}},a,!1,function(t){s("Z2t9")},"data-v-728eb508",null);e.a=i.exports},AawZ:function(t,e){},Z2t9:function(t,e){}});