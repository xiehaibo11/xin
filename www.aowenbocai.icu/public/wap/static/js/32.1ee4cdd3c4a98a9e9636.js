webpackJsonp([32],{"/2IV":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={components:{SafeCheck:a("V/qW").a},data:function(){return{username:"",loading:!1,steps:1,doChose:0,tel:"",email:"",changeWay:0,telYzm:"",emailYzm:"",pwd:"",pwd2:""}},computed:{company_tel:function(){return this.$store.state.setting.company_tel}},methods:{checkUsername:function(){var t=this;this.username.length?(this.loading=!0,this.$axios.post("/index/findpwd/checkName",{username:this.username}).then(function(e){var a=e.data;a.err?t.$toast({message:a.msg,duration:1e3}):(t.steps=2,t.tel=a.data.tel?a.data.tel:"",t.email=a.data.email?a.data.email:"",a.data.tel&&a.data.email?t.doChose=0:a.data.tel&&!a.data.email?(t.doChose=1,t.changeWay=1):!a.data.tel&&a.data.email?(t.doChose=2,t.changeWay=2):t.doChose=-1),t.loading=!1}).catch(function(t){console.log(t)})):this.$toast("请输入您要找回的账号！")},checkYzm:function(){var t=this;if(1==this.changeWay?this.telYzm:this.emailYzm){var e=void 0;1==this.changeWay&&(e={changeWay:this.changeWay,yzm:this.telYzm}),2==this.changeWay&&(e={changeWay:this.changeWay,yzm:this.emailYzm}),this.loading=!0,this.$axios.post("/index/findpwd/checkYzm",e).then(function(e){var a=e.data;a.err?t.$toast({message:a.msg,duration:1e3}):t.steps=3,t.loading=!1}).catch(function(t){console.log(t)})}else this.$toast("验证码不能为空！")},sumbit:function(){var t=this;this.pwd.length?this.pwd2.length?this.pwd===this.pwd2?(this.loading=!0,this.$axios.post("/index/findpwd/resetPwd",{pwd:this.pwd,pwd2:this.pwd2}).then(function(e){var a=e.data;a.err?t.$toast({message:a.msg,duration:1e3}):t.$messagebox({title:"提示",message:a.msg,confirmButtonText:"立即去登录？"}).then(function(){t.$router.push({path:"/login"})}).catch(function(t){}),t.loading=!1}).catch(function(t){console.log(t)})):this.$toast("两次输入的密码不相同！"):this.$toast("请确认新密码！"):this.$toast("请输入新密码！")}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"steps"},[a("span",{class:{active:t.steps>=1}}),t._v(" "),a("span",{class:{active:t.steps>=2}}),t._v(" "),a("span",{class:{active:t.steps>=3}})]),t._v(" "),1==t.steps?a("div",{staticClass:"step1"},[a("div",{staticClass:"input-title"},[t._v("输入您需要找回的账号")]),t._v(" "),a("mt-field",{attrs:{placeholder:"请输入用户名/手机号/邮箱"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),a("div",{staticClass:"btn-box"},[a("mt-button",{attrs:{type:"danger",size:"large"},nativeOn:{click:function(e){return t.checkUsername(e)}}},[t.loading?a("mt-spinner",{staticClass:"btn-loading",attrs:{slot:"icon",type:3,size:15,color:"#fff"},slot:"icon"}):t._e(),t._v("\n                下一步\n            ")],1)],1)],1):t._e(),t._v(" "),2==t.steps?a("div",{staticClass:"step2 relative"},[a("div",{staticClass:"input-title"},[t._v("安全验证")]),t._v(" "),-1==t.doChose?a("div",{staticClass:"tc mt c-2",staticStyle:{padding:"0 20px","line-height":"1.8"}},[t._v("该账号未绑定手机或邮箱，无法找回密码，请联系客服电话："+t._s(t.company_tel))]):t._e(),t._v(" "),0==t.doChose&&0==t.changeWay?a("div",[a("mt-cell",{attrs:{title:"验证已绑定手机",label:"已绑定手机且该手机能接收短信","is-link":""},nativeOn:{click:function(e){t.changeWay=1}}},[a("i",{staticClass:"iconfont icon-ai-bind-cel",attrs:{slot:"icon"},slot:"icon"})]),t._v(" "),a("mt-cell",{attrs:{title:"验证已绑定邮箱",label:"已绑定邮箱且该邮箱能接收邮件","is-link":""},nativeOn:{click:function(e){t.changeWay=2}}},[a("i",{staticClass:"iconfont icon-mail",attrs:{slot:"icon"},slot:"icon"})])],1):t._e(),t._v(" "),0==t.doChose?a("a",{staticClass:"link f-sm change-way-link",staticStyle:{"text-decoration":"underline"},on:{click:function(e){t.changeWay=0}}},[t._v("更换验证方式")]):t._e(),t._v(" "),1==t.doChose||1==t.changeWay?[a("safe-check",{attrs:{url:"/index/findpwd/sendTelMsg","check-way":1},model:{value:t.telYzm,callback:function(e){t.telYzm=e},expression:"telYzm"}})]:t._e(),t._v(" "),2==t.doChose||2==t.changeWay?[a("safe-check",{attrs:{url:"/index/findpwd/sendEmailMsg","check-way":2},model:{value:t.emailYzm,callback:function(e){t.emailYzm=e},expression:"emailYzm"}})]:t._e(),t._v(" "),-1!==t.doChose?a("div",{staticClass:"btn-box"},[a("mt-button",{attrs:{type:"danger",size:"large"},nativeOn:{click:function(e){return t.checkYzm(e)}}},[t.loading?a("mt-spinner",{staticClass:"btn-loading",attrs:{slot:"icon",type:3,size:15,color:"#fff"},slot:"icon"}):t._e(),t._v("\n                下一步\n            ")],1)],1):t._e()],2):t._e(),t._v(" "),3==t.steps?a("div",{staticClass:"step3"},[a("div",{staticClass:"input-title"},[t._v("重置登录密码")]),t._v(" "),a("mt-field",{attrs:{label:"新密码",placeholder:"请输入新密码",type:"password"},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}}),t._v(" "),a("mt-field",{attrs:{label:"确认密码",placeholder:"请再次输入新密码",type:"password"},model:{value:t.pwd2,callback:function(e){t.pwd2=e},expression:"pwd2"}}),t._v(" "),a("div",{staticClass:"btn-box"},[a("mt-button",{attrs:{type:"danger",size:"large"},nativeOn:{click:function(e){return t.sumbit(e)}}},[t.loading?a("mt-spinner",{staticClass:"btn-loading",attrs:{slot:"icon",type:3,size:15,color:"#fff"},slot:"icon"}):t._e(),t._v("\n                保存\n            ")],1)],1)],1):t._e()])},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(t){a("X4EX")},"data-v-de11a436",null);e.default=n.exports},X4EX:function(t,e){}});