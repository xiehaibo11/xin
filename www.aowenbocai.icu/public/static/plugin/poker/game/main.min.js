var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),AllItem=function(t){function e(){var e=t.call(this)||this;return e.touchChildren=!0,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data.label3;this.label0.text=this.data.label0,this.label1.text="共投"+this.data.label1+"金币",this.label2.text="订单编号："+this.data.label2,t>0?(this.label3.text="获得"+t.toString()+"金币",this.label3.textColor=16711680):this.label3.text="未中奖"},e}(eui.ItemRenderer);__reflect(AllItem.prototype,"AllItem");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var o=RES.getRes(t);o?n(o):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Http=function(){function t(){}return t.get=function(t,e){if(e){var i=[];for(var n in e)i.push(n+"="+e[n]);t+="?"+i.join("&")}var o=new egret.HttpRequest;return o.responseType=egret.HttpResponseType.TEXT,o.open(t,egret.HttpMethod.GET),o.send(),o},t.prototype.onGetComplete=function(t){t.currentTarget},t}();__reflect(Http.prototype,"Http");var Loading=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_skins/Loading.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.height=this.stage.stageHeight,this.dispatchEventWith("childrenCreated")},e}(eui.Component);__reflect(Loading.prototype,"Loading",["eui.UIComponent","egret.DisplayObject"]);var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.loading=new Loading,this.addChild(this.loading),this.loading.addEventListener("childrenCreated",this.loadComplete,this)},e.prototype.loadComplete=function(){this.loading.bar.width=0,this.dispatchEventWith("loadComplete")},e.prototype.setProgress=function(t,e){this.loading.bar.percentWidth=100*t/e;var i=Math.floor(t/e*100);this.loading.progress.text=i+"%"},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isThemeLoadEnd=!1,e.isResourceLoadEnd=!1,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},e.prototype.onThemeLoadComplete=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("loading"),this.isThemeLoadEnd=!0,this.createScene()},e.prototype.onResourceLoadComplete=function(t){"loading"==t.groupName?(this.loadingView=new LoadingUI,this.loadingView.addEventListener("loadComplete",this.loadNext,this),this.stage.addChild(this.loadingView)):"preload"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},e.prototype.loadNext=function(){RES.loadGroup("preload")},e.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.loadMusic=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.loadMusic,this);var t=RES.getRes("puke_mp3");t.play(0,0)},e.prototype.startCreateScene=function(){"ios"==egret.Capabilities.os.toLowerCase()?this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.loadMusic,this):this.loadMusic();var t=new GameUi;e.bg_skin=t,this.addChild(t),this.stage.removeChild(this.loadingView)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function o(t){e.call(n,t)}function s(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var DiamondsItem=function(t){function e(e){var i=t.call(this)||this;return i.data={money:"10",diamonds:"6"},i.data=e,i.skinName="DiamondsItemSkin",i.addEventListener(egret.Event.ADDED_TO_STAGE,i.init,i),i}return __extends(e,t),e.prototype.init=function(){this.money.text="￥"+this.data.money+" 购买",this.diamonds.text=this.data.diamonds,this.award.text="额外赠送"+this.data.award+"金豆",this.money.addEventListener(egret.TouchEvent.TOUCH_TAP,this.go,this)},e.prototype.go=function(){window.top.location.href="/pay/pay/index/num/"+this.data.money+"/type/2"},e}(eui.Component);__reflect(DiamondsItem.prototype,"DiamondsItem");var PayItem=function(t){function e(e){var i=t.call(this)||this;return i.data={money:"10",award:"6",coin:"12"},i.data=e,i.skinName="PayItemSkin",i.addEventListener(egret.Event.ADDED_TO_STAGE,i.init,i),i}return __extends(e,t),e.prototype.init=function(){var t=this;this.money.text="￥"+this.data.money+" 购买",this.coin.text=this.data.coin,this.award.text="额外赠送"+this.data.award+"金豆",this.money.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){window.top.location.href="/pay/pay/index/num/"+t.data.money},this)},e}(eui.Component);__reflect(PayItem.prototype,"PayItem");var PayPanel=function(t){function e(){var e=t.call(this)||this;return e.host=Data.local_url,e.api="/index/Recharge/getRechargeList",e.userApi="/index/user/getInfo",e.content=[],e.api=e.host+e.api,e.userApi=e.host+e.userApi,e.skinName="PayPanelSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.init,e),e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.no,e),e.auto_zh.addEventListener(eui.UIEvent.CHANGE,e.reload,e),e}return __extends(e,t),e.prototype.no=function(t){t.stopImmediatePropagation()},e.prototype.init=function(){var t=this;this.width=this.stage.stageWidth,this.height=this.stage.stageHeight,this.close_bg.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.parent&&t.parent.removeChild(t)},this)},e.prototype.reload=function(){Http.get(this.userApi).addEventListener(egret.Event.COMPLETE,this.setCoin,this),this.clearChild(),this.scroller.viewport.scrollV=0;var t=this.auto_zh.selected;t?(Http.get(this.api).addEventListener(egret.Event.COMPLETE,this.createList,this),this.title.text="充值金豆"):(Http.get(this.api).addEventListener(egret.Event.COMPLETE,this.diamondsList,this),this.title.text="充值钻石")},e.prototype.setCoin=function(t){var e=t.currentTarget,i=JSON.parse(e.response);i.err||(this.coin.text=i.data.money,this.diamonds.text=i.data.diamonds)},e.prototype.clearChild=function(){this.loading_group.visible=!0;var t=this.content;if(0!=t.length)for(var e=0,i=t;e<i.length;e++){var n=i[e];n.parent.removeChild(n)}this.content=[]},e.prototype.createList=function(t){var e=t.currentTarget,i=JSON.parse(e.response);if(!i.err){this.loading_group.visible=!1;for(var n=0,o=i.data;n<o.length;n++){var s=o[n],r=new PayItem(s);this.content.push(r),this.scroller_box.addChild(r)}}},e.prototype.diamondsList=function(t){var e=t.currentTarget,i=JSON.parse(e.response);if(!i.err){this.loading_group.visible=!1;for(var n=0,o=i.data;n<o.length;n++){var s=o[n],r=new DiamondsItem(s);this.content.push(r),this.scroller_box.addChild(r)}}},e}(eui.Component);__reflect(PayPanel.prototype,"PayPanel");var Alert=function(t){function e(e){var i=t.call(this)||this;return i.skinName="AlertSkin",i.txt=e,i.addEventListener(egret.Event.ADDED_TO_STAGE,i.show,i),i}return __extends(e,t),e.prototype.show=function(){var t=this;this.x=(this.stage.stageWidth-this.width)/2,this.y=this.stage.stageHeight,this.msg.text=this.txt,egret.Tween.get(this).to({y:this.stage.stageHeight-200},500,egret.Ease.backOut).wait(2e3).to({y:this.stage.stageHeight},500,egret.Ease.backIn).call(function(){t.parent.removeChild(t)})},e}(eui.Component);__reflect(Alert.prototype,"Alert");var AllHistory=function(t){function e(){var e=t.call(this)||this;return e.skinName="AllHistorySkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){Http.get(Data.HISTORY_URL).addEventListener(egret.Event.COMPLETE,this.historyList,this),this._backGame.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backGame,this),this._backHome.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backHome,this)},e.prototype.historyList=function(t){var e=t.currentTarget,i=JSON.parse(e.response),n=new eui.ArrayCollection;this.all.dataProvider=n,this.all.itemRenderer=AllItem,this.all.selectedIndex=0,this.allHistory.viewport=this.all;for(var o=i.data.data.length-1;o>=0;o--)n.addItem({label0:i.data.data[o].create_time,label1:i.data.data[o].bet_money,label2:i.data.data[o].id,label3:i.data.data[o].bouns})},e.prototype.backGame=function(){this.parent.removeChild(this),window.location.href="http://127.0.0.1:5304/index.html"},e.prototype.backHome=function(){this.parent.removeChild(this),window.location.href="http://127.0.0.1"},e}(eui.Component);__reflect(AllHistory.prototype,"AllHistory");var Data=function(){function t(){}return t.local_url="http://"+location.host,t.USER_INFO_URL=t.local_url+"/poker/index/getInfo",t.BET_URL=t.local_url+"/poker/index/bet",t.NEXT_URL=t.BET_URL,t.OVER_URL=t.local_url+"/poker/index/over",t.HISTORY_URL=t.local_url+"/poker/index/history",t.SESSION_URL=t.local_url+"/poker/index/play",t.coupon=0,t.status=-1,t.coupnMoney=0,t.balance=0,t.msg=0,t.hua=0,t.num=0,t.code=0,t.bouns=0,t.betList=[100,200,500,1e3,2e3,5e3],t.betIndex=0,t.betCode=0,t.next_page=1,t.all_page=1,t}();__reflect(Data.prototype,"Data");var BetItem=function(t){function e(){var e=t.call(this)||this;return e.index=0,e.skinName="BetItemSkin",e}return __extends(e,t),Object.defineProperty(e.prototype,"str",{get:function(){return this.code_str.text},set:function(t){this.code_str.text=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sp",{get:function(){return this.s_sp.text},set:function(t){this.s_sp.text=t},enumerable:!0,configurable:!0}),e}(eui.Component);__reflect(BetItem.prototype,"BetItem");var GameUi=function(t){function e(){var e=t.call(this)||this;return e.hasCodeIndex={},e.s_bouns=0,e.overItems=[],e.skinName="GameUiSkin",e.currentState="index",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.init,e),e}return __extends(e,t),e.prototype.init=function(){Http.get(Data.SESSION_URL).addEventListener(egret.Event.COMPLETE,this.session,this),Http.get(Data.USER_INFO_URL).addEventListener(egret.Event.COMPLETE,this._setMoney,this),this.charge(),this.initItem(),this.height=this.stage.stageHeight,this.queding.parent.addEventListener(egret.TouchEvent.TOUCH_TAP,this.select,this),this.jixu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.fapai,this),this.menu.addEventListener(egret.TouchEvent.TOUCH_TAP,this._menu,this),this.over.addEventListener(egret.TouchEvent.TOUCH_TAP,this.overGame,this),this.table.addEventListener("animEnd",this.hidBet,this)},e.prototype.initItem=function(){for(var t=0,e=0,i=this.bet_num.$children;e<i.length;e++){var n=i[e];this.hasCodeIndex[n.$hashCode]=t,n.text=Data.betList[t].toString(),n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.setBetNum,this),t++}},e.prototype._menu=function(){if(this.btnMusic(),this.menuPanel&&this.menuPanel.parent)this.menuPanel.parent.removeChild(this.menuPanel);else{var t=new Menu;this.addChild(t),t.addEventListener("behind",function(){t.parent.removeChild(t)},this),this.menuPanel=t}},e.prototype.select=function(){return Data.coupon>0?(this.fapai(),void this.stage.addChild(new Alert("本局为赠送局，免费金额："+Data.coupnMoney))):Data.balance<Data.betList[Data.betIndex]?(this.btnMusic(),this.addChild(new Alert("余额不足，请充值！")),void this._recharge()):void this.fapai()},e.prototype.charge=function(){var t=this;this.recharge.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.btnMusic(),t._recharge()},this)},e.prototype._recharge=function(){var t=new PayPanel;t.x=0,t.y=0,t.reload(),this.addChild(t)},e.prototype.hidBet=function(){this.isBet.visible=!1},e.prototype._setMoney=function(t){var e=t.currentTarget,i=JSON.parse(e.response);return 0!=i.err?void this.stage.addChild(new Alert("用户信息获取失败！")):(Data.balance=i.data.money,this.setMoney(Data.balance),Data.coupon=i.data.coupon,Data.coupnMoney=i.data.coupon_coin,void(Data.coupon>0&&(this.queding.text="免费x"+Data.coupon)))},e.prototype.setMoney=function(t){this.money.text=t.toString()},e.prototype.fapai=function(){if(this.coupon.parent.visible=!1,"index"==this.currentState)this.currentState="betting",Data.coupon>0?(Data.coupon--,Http.get(Data.BET_URL,{bet_money:Data.coupnMoney}).addEventListener(egret.Event.COMPLETE,this.setPokerSp,this)):Http.get(Data.BET_URL,{bet_money:Data.betList[Data.betIndex]}).addEventListener(egret.Event.COMPLETE,this.setPokerSp,this);else{if(0==Data.betCode)return this.erroMusic(),void this.addChild(new Alert("请选择下张牌的结果！"));Http.get(Data.NEXT_URL,{bet_code:Data.betCode}).addEventListener(egret.Event.COMPLETE,this.setPokerSp,this)}this.btnMusic(),this.fapaiMusic(),this.isBet.visible=!0,this.initSp(),this.pepo.fa()},e.prototype.session=function(t){var e=t.currentTarget,i=JSON.parse(e.response);if(0==i.err&&(Data.status=i.status,0!=i.status)){this.currentState="betting",this.isBet.visible=!1;for(var n=i.data[i.data.length-1],o=0,s=i.data;o<s.length;o++){var r=s[o];this.addHis(r.msg,r.poker.hua,r.poker.number)}this.next1.visible=!0,this.bouns=i.money,this.next.text="下一张牌是？",this.table.poker.hua=n.poker.hua,this.table.poker.number=n.poker.number,this.table.show(),this.initSp();for(var a in this.betCodeList)0==i.sp[a]?(this.betCodeList[a].sp="不可选择!",this.betCodeList[a].currentState="hide",this.betCodeList[a].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.selectBetCode,this)):this.betCodeList[a].sp=i.sp[a]}},e.prototype.initSp=function(){Data.betCode=0,this.betCodeList=this.bet_sp.$children;for(var t in this.betCodeList)this.betCodeList[t].currentState="index",this.betCodeList[t].index=Number(t)+1,this.betCodeList[t].sp="0.00",this.betCodeList[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectBetCode,this)},e.prototype.selectBetCode=function(t){var e=t.currentTarget;this.betMusic(),Data.betCode=e.index;var i=e.sp,n=Math.floor(i*this.bouns);this.next.text="中奖可得"+n.toString()+"金豆";for(var o in this.betCodeList)"checked"==this.betCodeList[o].currentState&&(this.betCodeList[o].currentState="index");e.currentState="checked"==e.currentState?"index":"checked"},Object.defineProperty(e.prototype,"bouns",{get:function(){return this.s_bouns},set:function(t){this.s_bouns=t,this.show_bouns.text="当前 "+this.bouns.toString()+" 金豆"},enumerable:!0,configurable:!0}),e.prototype.setPokerSp=function(t){var e=t.currentTarget,i=JSON.parse(e.response);if(0==i.err){if(i.afterMoney&&this.setMoney(i.afterMoney),this.table.poker.hua=i.data.poker.hua,this.table.poker.number=i.data.poker.number,0==i.status)return this.table.showHarf(),void this.table.poker.addEventListener("gameOver",this.gameOver,this);this.pepo.good(),this.table.show(),Data.msg=i.data.msg,Data.hua=i.data.poker.hua,Data.num=i.data.poker.number,Data.bouns=i.money,this.table.addEventListener("_addHis",this._addHis,this);for(var n in this.betCodeList)0==i.sp[n]?(this.betCodeList[n].sp="不可选择!",this.betCodeList[n].currentState="hide",this.betCodeList[n].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.selectBetCode,this)):this.betCodeList[n].sp=i.sp[n]}},e.prototype._addHis=function(){this.next1.visible=!0,this.bouns=Data.bouns,this.next.text="下一张牌是？",this.addHis(Data.msg,Data.hua,Data.num)},e.prototype.addHis=function(t,e,i){var n=new OverItem;n.msg.text=t,n.poker.hua=e,n.poker.number=i,this.overItems.push(n),this.his_box.addChild(n),this.scroller.viewport.scrollV=(n.height+6)*this.his_box.numChildren-this.scroller.viewport.height},e.prototype.setBetNum=function(t){this.betMusic(),Data.betIndex=this.hasCodeIndex[t.target.$hashCode];var e=t.target.x+(t.target.width+6)/2;egret.Tween.get(this.arrow).to({x:e},200),egret.Tween.get(this.coupon.parent).to({x:e-6},200)},e.prototype.overGame=function(){Http.get(Data.OVER_URL).addEventListener(egret.Event.COMPLETE,this._setOver,this)},e.prototype._setOver=function(t){var e=t.currentTarget,i=JSON.parse(e.response);return i.afterMoney&&this.setMoney(i.afterMoney),i.err>0?(this.addChild(new Alert("游戏才刚开始哦！")),void this.erroMusic()):(this.btnMusic(),void this.setOver())},e.prototype.setOver=function(){return this.win=new GameWin,this.win.currentState="win",this.win.move(),this.win.bonus.text=this.bouns.toString()+" 金豆",0==this.bouns?(this.win.currentState="lose",this.addChild(this.win),this.loseMusic(),void this.win.again.addEventListener(egret.TouchEvent.TOUCH_TAP,this.newGame,this)):(this.addChild(this.win),this.winMusic(),void this.win.again.addEventListener(egret.TouchEvent.TOUCH_TAP,this.newGame,this))},e.prototype.gameOver=function(){this.bouns=0,this.next.text="下一张牌是？",this.setOver()},e.prototype.newGame=function(){this.removeChild(this.win);for(var t=0,e=this.overItems;t<e.length;t++){var i=e[t];this.his_box.removeChild(i)}Data.coupon>0?this.queding.text="免费x"+Data.coupon:this.queding.text="确定",this.table.his_poker.visible=!1,this.table.poker.visible=!1,this.next1.visible=!1,this.currentState="index",this.overItems=[],this.betCodeList=[]},e.prototype.winMusic=function(){var t=RES.getRes("win_mp3");t.play(0,1)},e.prototype.loseMusic=function(){var t=RES.getRes("lose_mp3");t.play(0,1)},e.prototype.btnMusic=function(){var t=RES.getRes("btn_mp3");t.play(0,1)},e.prototype.betMusic=function(){var t=RES.getRes("sure_mp3");t.play(0,1)},e.prototype.fapaiMusic=function(){var t=RES.getRes("chupai_mp3");t.play(0,1)},e.prototype.erroMusic=function(){var t=RES.getRes("erro_mp3");t.play(0,1)},e}(eui.Component);__reflect(GameUi.prototype,"GameUi");var GameWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="GameWinSkin",e}return __extends(e,t),e.prototype.init=function(){this.height=this.stage.stageHeight,this.width=this.stage.stageWidth},e.prototype.move=function(){this.win1.stop(),this.win1.play()},e}(eui.Component);__reflect(GameWin.prototype,"GameWin");var GetOut=function(t){function e(){var e=t.call(this)||this;return e.skinName="GetOutSkin",e}return __extends(e,t),e}(eui.Component);__reflect(GetOut.prototype,"GetOut");var HistoryPanle=function(t){function e(){var e=t.call(this)||this;return e.isLoading=!0,e.skinName="HistorySkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.height=this.stage.stageHeight;var t=egret.Tween.get(this).to({y:this.stage.height});t.to({y:0},500),this.hide.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touch,this),Http.get(Data.HISTORY_URL).addEventListener(egret.Event.COMPLETE,this.historyList,this)},e.prototype.historyList=function(t){this.isLoading=!1;var e=t.currentTarget,i=JSON.parse(e.response);if(Data.all_page=i.data.last_page,Data.next_page=i.data.current_page,0==i.data.data.length)return this.zero.visible=!0,void this.paopao();var n=new eui.ArrayCollection;this.HistoryList.dataProvider=n,this.HistoryList.itemRenderer=Item,this.HistoryList.selectedIndex=0;for(var o=0;o<i.data.data.length;o++)n.addItem({label0:i.data.data[o].create_time,label1:i.data.data[o].bet_money,label2:i.data.data[o].id,label3:i.data.data[o].bouns,label4:i.data.data[o].record});this.collection=n,this.loading.text="正在加载中。。。",this.HistoryScroller.addEventListener(eui.UIEvent.CHANGE_END,this.move,this)},e.prototype.move=function(){var t=this.HistoryScroller.viewport.scrollV-(this.HistoryScroller.viewport.contentHeight-this.HistoryScroller.viewport.height);if(!(0>t)&&1!=this.isLoading){if(Data.next_page++,Data.next_page>Data.all_page)return void(this.loading.text="这里是有底线的!");this.isLoading=!0,Http.get(Data.HISTORY_URL,{page:Data.next_page}).addEventListener(egret.Event.COMPLETE,this.moreHistory,this)}},e.prototype.moreHistory=function(t){this.isLoading=!1;for(var e=t.currentTarget,i=JSON.parse(e.response),n=0;n<i.data.data.length;n++)this.collection.addItem({label0:i.data.data[n].create_time,label1:i.data.data[n].bet_money,label2:i.data.data[n].id,label3:i.data.data[n].bouns,label4:i.data.data[n].record})},e.prototype.paopao=function(){var t=RES.getRes("paopao_json"),e=RES.getRes("paopao_png"),i=new egret.MovieClipDataFactory(t,e),n=new egret.MovieClip(i.generateMovieClipData("paopao"));n.x=(this.stage.stageWidth-n.width)/2,n.y=(this.stage.stageHeight-n.height)/2,this.addChild(n),n.gotoAndPlay(0),n.play(-1)},e.prototype.touch=function(){this.stage.removeChild(this)},e}(eui.Component);__reflect(HistoryPanle.prototype,"HistoryPanle");var Item=function(t){function e(){var e=t.call(this)||this;return e.hua=["红桃","方片","黑桃","梅花"],e.pp=["大","小","红","黑"],e.pppp={1:"A",11:"J",12:"Q",13:"K"},e.touchChildren=!0,e}return __extends(e,t),e.prototype.dataChanged=function(){for(var t=JSON.parse(this.data.label4),e=[],i=this.data.label3,n=0;n<t.length;n++){var o=t[n],s=this.pppp[o.poker.number]?this.pppp[o.poker.number]:o.poker.number;n==t.length-1?e.push("["+this.hua[o.poker.hua]+s+"],"+(i>0?"结算":"猜错")):e.push("["+this.hua[o.poker.hua]+s+"],"+this.pp[o.bet_code-1]+",倍数:"+Math.floor(100*o.sp)/100)}this.label0.text=this.data.label0,this.label1.text="共投"+this.data.label1+"金豆",this.label2.text="订单编号："+this.data.label2,i>0?(this.label3.text="获得"+i.toString()+"金豆",this.label3.textColor=15715617):this.label3.text="未中奖",this.label4.text=e.join("\n\n")+"\n\n"},e}(eui.ItemRenderer);__reflect(Item.prototype,"Item");var Menu=function(t){function e(){var e=t.call(this)||this;return e.skinName="MenuSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.height=this.stage.stageHeight,this.width=this.stage.stageWidth,this.ruleImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.rule,this),this.his.addEventListener(egret.TouchEvent.TOUCH_TAP,this.history,this),this.backGame.addEventListener(egret.TouchEvent.TOUCH_TAP,this._backGame,this),this.home.addEventListener(egret.TouchEvent.TOUCH_TAP,this._home,this)},e.prototype.rule=function(){this.btnMusic();var t=new Rule;t.y=100,this.stage.addChild(t),this.dispatchEventWith("behind")},e.prototype.history=function(){this.btnMusic();var t=new HistoryPanle;this.stage.addChild(t),this.dispatchEventWith("behind")},e.prototype._backGame=function(){this.btnMusic(),this.parent.removeChild(this)},e.prototype._home=function(){this.btnMusic(),window.top.location.href="/"},e.prototype.btnMusic=function(){var t=RES.getRes("btn_mp3");t.play(0,1)},e}(eui.Component);__reflect(Menu.prototype,"Menu");var OverItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="OverItemSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.init,e),e}return __extends(e,t),e.prototype.init=function(){},e}(eui.Component);__reflect(OverItem.prototype,"OverItem");var Pepo=function(t){function e(){var e=t.call(this)||this;return e.skinName="PepoSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.init,e),e}return __extends(e,t),e.prototype.init=function(){var t=RES.getRes("hart_png"),e=RES.getRes("hart_json");this.system=new particle.GravityParticleSystem(t,e),this.hart.addChild(this.system),this.playAnimation(this.zhayan,!0)},e.prototype.playAnimation=function(t,e){if(e)for(var i in t.items)t.items[i].props={loop:!0};t.play()},e.prototype.fa=function(){this.fapai.stop(),this.fapai.play()},e.prototype.good=function(){var t=this;this.system.start(),egret.setTimeout(function(){t.system.stop()},this,2e3)},e}(eui.Component);__reflect(Pepo.prototype,"Pepo");var PokeItem=function(t){function e(){var e=t.call(this)||this;return e.m_hua=["hong","fang","hei","mei"],e.skinName="PokeSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.init,e),e}return __extends(e,t),e.prototype.init=function(){},Object.defineProperty(e.prototype,"hua",{get:function(){return this.s_hua},set:function(t){this.s_hua=t;var e=this.m_hua[t];this.hua0.source="poker_json."+e+".png",this.hua1.source="poker_json."+e+".png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"number",{get:function(){return this.s_number},set:function(t){this.s_number=t;var e="";e+=this.hua<2?"r_":"b_",e+=t,this.num.source="poker_json."+e+".png"},enumerable:!0,configurable:!0}),e.prototype.show=function(t){var e=this;void 0===t&&(t=function(){}),egret.Tween.get(this).to({scaleX:0},300).call(function(){e.currentState="index"}).to({scaleX:1},300).wait(800).to({horizontalCenter:630,scaleX:.5,scaleY:.5,y:380},600).call(t)},e.prototype.showHarf=function(t){var e=this;void 0===t&&(t=function(){}),egret.Tween.get(this).to({scaleX:0},300).call(function(){e.currentState="index"}).to({scaleX:1},300).wait(500).call(function(){e.dispatchEventWith("gameOver")})},e}(eui.Component);__reflect(PokeItem.prototype,"PokeItem");var Rule=function(t){function e(){var e=t.call(this)||this;return e.skinName="RuleSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.draw,e),e}return __extends(e,t),e.prototype.draw=function(){this.height=this.stage.stageHeight,this.scroller.scrollPolicyH="off";var t=egret.Tween.get(this).to({y:this.stage.height});t.to({y:0},500),this.scroller.viewport=this.ruleBox,this.hide.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touch,this)},e.prototype.touch=function(){this.stage.removeChild(this)},e}(eui.Component);__reflect(Rule.prototype,"Rule");var Table=function(t){function e(){var e=t.call(this)||this;return e.skinName="TableSkin",e}return __extends(e,t),e.prototype.showHarf=function(){var t=this;this.chupai.stop(),this.chupai.play();var e=egret.Tween.get(this.poker);e.wait(600).call(function(){t.poker.showHarf(function(){if(t.his_poker)t.his_poker.visible=!0,t.poker.visible=!0;else{var e=new PokeItem;e.currentState="index",e.y=t.harf.y,e.scaleX=t.harf.scaleX,e.scaleY=t.harf.scaleY,e.horizontalCenter=t.harf.horizontalCenter,t.addChildAt(e,1)}})})},e.prototype.sessionShow=function(){var t=new PokeItem;t.currentState="index",t.y=this.poker.y,t.scaleX=this.poker.scaleX,t.scaleY=this.poker.scaleY,t.horizontalCenter=this.poker.horizontalCenter,this.addChildAt(t,1),this.his_poker=t,this.his_poker.hua=this.poker.hua,this.his_poker.number=this.poker.number},e.prototype.show=function(){var t=this;this.chupai.stop(),this.chupai.play(),this.poker.visible=!0,this.poker.currentState="bg";var e=egret.Tween.get(this.poker);e.wait(600).call(function(){t.poker.show(function(){t.addPoker()})})},e.prototype.addPoker=function(){if(this.his_poker)this.his_poker.visible=!0;else{var t=new PokeItem;t.currentState="index",t.y=this.poker.y,t.scaleX=this.poker.scaleX,t.scaleY=this.poker.scaleY,t.horizontalCenter=this.poker.horizontalCenter,this.addChildAt(t,1),this.his_poker=t}this.his_poker.hua=this.poker.hua,this.his_poker.number=this.poker.number,this.poker.scaleX=.3,this.poker.scaleY=.3,this.poker.rotation=90,this.poker.horizontalCenter=376,this.poker.x=1188,this.poker.y=62,this.poker.currentState="bg",this.dispatchEventWith("animEnd"),this.dispatchEventWith("_addHis")},e.prototype.pai=function(){var t=new PokeItem;t.currentState="index",t.y=this.harf.y,t.scaleX=this.harf.scaleX,t.scaleY=this.harf.scaleY,t.horizontalCenter=this.harf.horizontalCenter,this.addChildAt(t,1),this.his_poker=t},e}(eui.Component);__reflect(Table.prototype,"Table");