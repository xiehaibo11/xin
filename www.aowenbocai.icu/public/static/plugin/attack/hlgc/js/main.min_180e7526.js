var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(n,r){function s(t){try{h(o.next(t))}catch(e){r(e)}}function a(t){try{h(o["throw"](t))}catch(e){r(e)}}function h(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(s,a)}h((o=o.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return o([t,e])}}function o(i){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,r&&(s=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,r=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){h.label=i[1];break}if(6===i[0]&&h.label<s[1]){h.label=s[1],s=i;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(i);break}s[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(o){i=[6,o],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,r,s,a,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},Fight=function(t){function e(){var e=t.call(this)||this;return e.skinName="FightSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e}(eui.Component);__reflect(Fight.prototype,"Fight");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function o(o){e.call(i,o,t)}if(RES.hasRes(t)){var n=RES.getRes(t);n?o(n):RES.getResAsync(t,o,this)}else RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Http=function(){function t(){}return t.get=function(t,e){if(e){var i=[];for(var o in e)i.push(o+"="+e[o]);t+="?"+i.join("&")}var n=new egret.HttpRequest;return n.responseType=egret.HttpResponseType.TEXT,n.open(t,egret.HttpMethod.GET),n.send(),n},t.prototype.onGetComplete=function(t){t.currentTarget},t}();__reflect(Http.prototype,"Http");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="LoadingUISkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.omComplete()},e.prototype.omComplete=function(){this.height=this.stage.stageHeight,this.pro_bg.mask=this.rect_mask,this.playAnimation(this.load,!0)},e.prototype.onProgress=function(t,e){this.rect_mask.percentHeight=100*t/e;var i=Math.floor(t/e*100);this.loading.text="正在初始化。。。"+i+"%"},e.prototype.playAnimation=function(t,e){if(e)for(var i in t.items)t.items[i].props={loop:!0};t.play()},e}(eui.Component);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResource()];case 1:return t.sent(),this.createGameScene(),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,this.loadTheme()];case 2:return i.sent(),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadGroup("load",0)];case 3:return i.sent(),[4,RES.loadGroup("preload",1,t)];case 4:return i.sent(),this.stage.removeChild(t),[3,6];case 5:return e=i.sent(),console.error(e),[3,6];case 6:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var o=new eui.Theme("resource/default.thm.json",t.stage);o.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.createGameScene=function(){Music.init(),"ios"==egret.Capabilities.os.toLowerCase()?this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.checkCookies,this):this.checkCookies();var t=new Game;this.addChild(t),Data.init(t),Data.initURL()},e.prototype.checkCookies=function(){if(this.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.checkCookies,this),Data.getCookies("music"))switch(Data.getCookies("music")){case"false":Music.PlayBGM();break;case"true":Music.StopBGM()}else Music.PlayBGM()},e}(eui.UILayer);__reflect(Main.prototype,"Main");var Music=function(){function t(){}return t.init=function(){t._click=RES.getRes("btn3_mp3"),t._back=RES.getRes("back_mp3"),t._wrong=RES.getRes("erro_mp3"),t._fight=RES.getRes("fight_mp3"),t._choose=RES.getRes("btn7_mp3"),t._bgm=RES.getRes("fightBGM_mp3"),t._win=RES.getRes("win~3_mp3"),t._lose=RES.getRes("lose_mp3")},t.PlayBGM=function(){t.IsMusic&&(t._bgm_channel=t._bgm.play(0,0))},t.StopBGM=function(){t._bgm_channel&&t._bgm_channel.stop(),t._click_channel&&t._click_channel.stop(),t._turn_channel&&t._turn_channel.stop()},t.PlayClick=function(){t.IsMusic&&(t._click_channel=t._click.play(0,1))},t.PlayWin=function(){t.IsMusic&&t._win.play(0,1)},t.PlayLose=function(){t.IsMusic&&t._lose.play(0,1)},t.PlayFight=function(){t.IsMusic&&(t._turn_channel=t._fight.play(0,1),egret.setTimeout(function(){t._turn_channel.stop()},this,2500))},t.PlayBack=function(){t.IsMusic&&t._back.play(0,1)},t.PlayWrong=function(){t.IsMusic&&t._wrong.play(0,1)},t.PlayChoose=function(){t.IsMusic&&t._choose.play(0,1)},Object.defineProperty(t,"IsMusic",{get:function(){var t=Data.getCookies("ismusic");return null==t||""==t?!0:"1"==t},set:function(e){e?(Data.setCookies("ismusic","1"),t.PlayBGM()):(Data.setCookies("ismusic","0"),t.StopBGM())},enumerable:!0,configurable:!0}),t}();__reflect(Music.prototype,"Music");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,o){function n(t){e.call(o,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(o))}"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(o,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var BetHistory=function(t){function e(){var e=t.call(this)||this;return e.isLoading=!0,e.skinName="BetHistorySkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.height=this.stage.stageHeight,Http.get(Data.GAMEHISTORY_URL).addEventListener(egret.Event.COMPLETE,this._history,this),this.back.addEventListener(egret.TouchEvent.TOUCH_TAP,this._back,this),this.back1.addEventListener(egret.TouchEvent.TOUCH_TAP,this._back,this)},e.prototype._history=function(t){this.isLoading=!1;var e=t.currentTarget,i=JSON.parse(e.response);if(!(i.data.data.length<=0)){Data.now_Page=Number(i.data.current_page),Data.all_Page=Number(i.data.last_page);var o=new eui.ArrayCollection;this.scrollerList.dataProvider=o,this.scrollerList.itemRenderer=BetItem;for(var n=0;n<i.data.data.length;n++)o.addItem(i.data.data[n]);this.collection=o,this.loading.text="正在加载中。。。",this.scroller.addEventListener(eui.UIEvent.CHANGE_END,this.move,this)}},e.prototype.move=function(){var t=this.scroller.viewport.scrollV-(this.scroller.viewport.contentHeight-this.scroller.viewport.height);if(!(0>t)&&1!=this.isLoading){if(Data.now_Page++,Data.now_Page>Data.all_Page)return void(this.loading.text="这里是有底线的!");this.isLoading=!0,Http.get(Data.GAMEHISTORY_URL,{page:Data.now_Page}).addEventListener(egret.Event.COMPLETE,this.moreHistory,this)}},e.prototype.moreHistory=function(t){this.isLoading=!1;for(var e=t.currentTarget,i=JSON.parse(e.response),o=0;o<i.data.data.length;o++)this.collection.addItem(i.data.data[o])},e.prototype._back=function(){this.parent.removeChild(this)},e}(eui.Component);__reflect(BetHistory.prototype,"BetHistory");var BetItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.betting.text=this.data.betting+"兵",this.enemy_betting.text=this.data.enemy_betting+"兵",this.create_time.text=this.data.create_time,this.money.text="投注"+this.data.money+"金豆",0==this.data.status&&(this.result.text="挑战失败"),1==this.data.status&&(this.result.text="胜"+this.data.bonus+"金豆",this.result.textColor=14505517),2==this.data.status&&(this.result.text="平"+this.data.bonus+"金豆",this.result.textColor=14505517)},e}(eui.ItemRenderer);__reflect(BetItem.prototype,"BetItem");var Data=function(){function t(){}return t.initURL=function(){var e=RES.getRes("data_config_json");t.API_URL=e.API_URL,t.USER_INFO_URL=t.API_URL+"attack/index/getInfo",t.BET_URL=t.API_URL+"attack/index/addBettingNpc",t.CMPHISTORY_URL=t.API_URL+"attack/index/getHistoryCode",t.GAMEHISTORY_URL=t.API_URL+"attack/index/getNpcRecord"},t.init=function(e){t.elem={gameMain:e}},Object.defineProperty(t,"coinCount",{get:function(){return Number(t.money)},set:function(e){t.money=e,t.elem.gameMain.recharge.text=e.toString()},enumerable:!0,configurable:!0}),t.setCookies=function(t,e){document.cookie=t+"="+e+";"},t.getCookies=function(t){for(var e=t+"=",i=document.cookie.split(";"),o=0;o<i.length;o++){var n=i[o].trim();if(0==n.indexOf(e))return n.substring(e.length,n.length)}return""},t.API_URL="http://192.168.0.104:81/",t.USER_INFO_URL=t.API_URL+"attack/index/getInfo",t.BET_URL=t.API_URL+"attack/index/addBettingNpc",t.CMPHISTORY_URL=t.API_URL+"attack/index/getHistoryCode",t.GAMEHISTORY_URL=t.API_URL+"attack/index/getNpcRecord",t.soldier=["矛","盾","弓","矛兵","盾兵","弓兵"],t.soldierImg=["sprite-game-soldier_json.sprite-game-soldier000","sprite-game-soldier_json.sprite-game-soldier002","sprite-game-soldier_json.sprite-game-soldier001","sprite-game-soldier_json.sprite-game-soldier005","sprite-game-soldier_json.sprite-game-soldier004","sprite-game-soldier_json.sprite-game-soldier003"],t.winImg=["sprite-bubble-title_json.sprite-bubble-title000","sprite-bubble-title_json.sprite-bubble-title007","sprite-bubble-title_json.sprite-bubble-title008"],t.money=0,t.bouns=0,t.buttons=[0,100,500,1e3],t.bet=100,t.code=0,t.soldiersGroup=[],t.cmpSoldierY=0,t.youSoldierY=0,t.imgXy={x:35,y:654},t.source=0,t.betSource=0,t.status=0,t.now_Page=1,t.all_Page=1,t}();__reflect(Data.prototype,"Data");var Game=function(t){function e(){var e=t.call(this)||this;return e.skinName="GameUiSkin",e}return __extends(e,t),e.prototype.createChildren=function(){var e=this;t.prototype.createChildren.call(this),this.percentHeight=100,this.percentWidth=100,this.init(),Http.get(Data.CMPHISTORY_URL).addEventListener(egret.Event.COMPLETE,this.initPanel,this),this.Panel.addEventListener(egret.TouchEvent.TOUCH_TAP,this._panel,this),this.active.addEventListener(egret.TouchEvent.TOUCH_TAP,this._active,this),this.award.addEventListener(egret.TouchEvent.TOUCH_TAP,this._award,this),this.set.addEventListener(egret.TouchEvent.TOUCH_TAP,this._set,this),this.recharge.parent.addEventListener(egret.TouchEvent.TOUCH_TAP,this._recharge,this),this.back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.soldiers.soldierBack,this.soldiers),this.soldiers.addEventListener("fight",this._fight,this),this.soldiers.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.help.visible=!1},this),this.back.getChildAt(1).touchEnabled=!1},e.prototype.init=function(){Http.get(Data.USER_INFO_URL).addEventListener(egret.Event.COMPLETE,this._setMoney,this);for(var t=0,e=0,i=this.btns.$children;e<i.length;e++){var o=i[e];if(t++,o.label=Data.buttons[t].toString(),o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnTouch,this),Data.getCookies("btn")){var n=Data.getCookies("btn");n==o.label&&(o.selected=!0,Data.bet=Number(o.label))}else{var r=this.btns.$children[0];r.selected=!0}}},e.prototype._setMoney=function(t){var e=t.currentTarget,i=JSON.parse(e.response);Data.money=Math.floor(i.money),this.recharge.text=Data.money.toString()},e.prototype.btnTouch=function(t){Music.PlayChoose(),this.help.visible=!1;var e=t.target;Data.bet=Number(e.label),Data.setCookies("btn",e.label)},e.prototype._recharge=function(){Music.PlayChoose()},e.prototype._active=function(){Music.PlayChoose()},e.prototype._award=function(){Music.PlayChoose()},e.prototype._set=function(){Music.PlayChoose();var t=new SetPanel;this.addChild(t)},e.prototype._fight=function(){Data.cmpSoldierY=this.cityImg.localToGlobal().y+this.cityImg.height,Data.youSoldierY=this.soldiers.localToGlobal().y+50,this.resdImg()},e.prototype.resdImg=function(){var t=new eui.Image;t.source="sprite-game_json.sprite-game011",t.x=this.stage.stageWidth-100,t.y=(this.stage.stageHeight-t.height)/2-50,this.addChild(t),Data.imgXy={x:t.x,y:t.y};var e=egret.Tween.get(t),i=(this.stage.stageWidth-t.width)/2;e.to({x:i},750).call(this._result,this).call(function(){t.parent.removeChild(t)},this)},e.prototype._result=function(){this.soldiers.visible=!1;var t=new Reulst;t.x=(this.stage.stageWidth-t.width)/2,t.y=(this.stage.stageHeight-t.height)/2,this.addChild(t),t.addEventListener("newGame",this.newGame,this)},e.prototype.newGame=function(){this.soldiers.visible=!0,this.soldiers.soldierBack(),Http.get(Data.CMPHISTORY_URL).addEventListener(egret.Event.COMPLETE,this.initPanel,this)},e.prototype._panel=function(){Music.PlayChoose();var t=new HistoryPanel;t.currentState="history",this.addChild(t)},e.prototype.initPanel=function(t){var e=t.currentTarget,i=JSON.parse(e.response);if(!(i.data.data.length<=0))if(this.Panel.removeChildren(),i.data.data.length>3)for(var o=0;3>o;o++){var n=new Historys;n.txt.text=i.data.data[o].enemy_betting,this.Panel.addChild(n)}else for(var o=0;o<i.data.data.length;o++){var n=new Historys;n.txt.text=i.data.data[o].enemy_betting,this.Panel.addChild(n)}},e}(eui.Component);__reflect(Game.prototype,"Game");var HistoryPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="HistoryPanelSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.height=this.stage.stageHeight,this.history(),this.back.addEventListener(egret.TouchEvent.TOUCH_TAP,this._back,this),this.back1.addEventListener(egret.TouchEvent.TOUCH_TAP,this._back,this)},e.prototype.history=function(){"history"==this.currentState&&Http.get(Data.CMPHISTORY_URL).addEventListener(egret.Event.COMPLETE,this._history,this)},e.prototype._history=function(t){var e=t.currentTarget,i=JSON.parse(e.response);i.data.data.length<=0||(Data.cmpHistory=i.data.data,this.init())},e.prototype.init=function(){var t=new eui.ArrayCollection;if(this.scrollerList.dataProvider=t,this.scrollerList.itemRenderer=Item,!(Data.cmpHistory.length<=0))for(var e=0;e<Data.cmpHistory.length;e++)t.addItem({time:Data.cmpHistory[e].create_time,soldier:Data.cmpHistory[e].enemy_betting})},e.prototype._back=function(){this.parent.removeChild(this)},e}(eui.Component);__reflect(HistoryPanel.prototype,"HistoryPanel");var Historys=function(t){function e(){var e=t.call(this)||this;return e.skinName="HistorySkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){},e}(eui.Component);__reflect(Historys.prototype,"Historys");var Home=function(t){function e(){var e=t.call(this)||this;return e.skinName="HomeSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this.rec.width/this.img.width,i=this.rec.height/this.img.height;this.img.scaleX=e,this.img.scaleY=i,this.img.mask=this.rec,this.text.filters=[this.filter()]},e.prototype.filter=function(){var t=16711680,e=.8,i=35,o=35,n=2,r=3,s=!1,a=!1,h=new egret.GlowFilter(t,e,i,o,n,r,s,a);return h},e.prototype.msfilter=function(){var t=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],e=new egret.ColorMatrixFilter(t);return e},e}(eui.Component);__reflect(Home.prototype,"Home");var Item=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.time.text=this.data.time,this.soldier.text=this.data.soldier+"兵"},e}(eui.ItemRenderer);__reflect(Item.prototype,"Item");var Reulst=function(t){function e(){var e=t.call(this)||this;return e.skinName="ResultSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.height=this.stage.stageHeight,this.changeSoldier()},e.prototype.changeSoldier=function(){this.cmp.y=Data.cmpSoldierY,this.cmp.s_name.y=-20,this.cmp.life.parent.y=-40,this.cmp.soldier.source=Data.soldierImg[Data.betSource+2],this.cmp.s_name.text=Data.soldier[Data.betSource+2]+" x "+Data.code,this.you.y=Data.youSoldierY,this.you.soldier.source=Data.soldierImg[Data.source],this.you.s_name.text=Data.soldier[Data.source]+" x "+Data.code,this._soldier()},e.prototype._soldier=function(){var t=this;Music.PlayFight();var e=egret.Tween.get(this.cmp).to({y:Data.cmpSoldierY}).call(function(){t.cmp.visible=!0},this),i=egret.Tween.get(this.you).to({y:Data.youSoldierY}).call(function(){t.you.visible=!0},this);e.to({y:Data.imgXy.y},500).call(function(){t.cmp.soldier.visible=!1,t.you.soldier.visible=!1},this).call(this.result,this),i.to({y:Data.imgXy.y},400)},e.prototype._fight=function(){var t=this;this.fightGroup.visible=!0,this.fight.stop(),this.fight.play(),this.fight.addEventListener("complete",function(){t.parent.removeChild(t)},this)},e.prototype.showResult=function(){var t=this,e=new ShowResult;this.stage.addChild(e),this._showResult=e,e.addEventListener("newGame",this.newGame,this),egret.Tween.get(e).to({alpha:1},1e3).wait(2e3).call(function(){t.newGame(),e.parent.removeChild(e)},this)},e.prototype.newGame=function(){this.dispatchEventWith("newGame")},e.prototype.draw=function(){var t=this;this._fight(),this.cmp._loseHarf(),this.you._loseHarf(),egret.setTimeout(function(){t.showResult(),Music.PlayWin(),t._showResult.giftImg.source=Data.winImg[2],t._showResult.gift.text=Data.bouns.toString(),t._showResult.currentState="win",Data.coinCount=Data.money},this,2e3)},e.prototype.win=function(){var t=this;this._fight(),this.cmp._loseAll(),egret.setTimeout(function(){t.showResult(),Music.PlayWin(),t._showResult.giftImg.source=Data.winImg[0],t._showResult.gift.text=Data.bouns.toString(),t._showResult.currentState="win",Data.coinCount=Data.money},this,2e3)},e.prototype.lose=function(){var t=this;this._fight(),this.you._loseAll(),egret.setTimeout(function(){t.showResult(),Music.PlayLose(),t._showResult.giftImg.source=Data.winImg[1],t._showResult.currentState="lose"},this,2e3)},e.prototype.result=function(){0==Data.status&&this.lose(),1==Data.status&&this.win(),2==Data.status&&this.draw()},e}(eui.Component);__reflect(Reulst.prototype,"Reulst");var SetPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="SetPanelSkin",e}return __extends(e,t),e.prototype.createChildren=function(){if(t.prototype.createChildren.call(this),Data.getCookies("music")){var e="true"==Data.getCookies("music")?!0:!1;this.sound.selected=e}this.height=this.stage.stageHeight,this.sound.addEventListener(eui.UIEvent.CHANGE,this._sound,this),this.betHistory.addEventListener(egret.TouchEvent.TOUCH_TAP,this._betHistory,this),this.backHome.addEventListener(egret.TouchEvent.TOUCH_TAP,this._backHome,this),this.help.addEventListener(egret.TouchEvent.TOUCH_TAP,this._help,this),this.back.addEventListener(egret.TouchEvent.TOUCH_TAP,this._back,this)},e.prototype._sound=function(t){1==t.target.selected?(Data.setCookies("music",!0),Music.StopBGM(),Music.IsMusic=!1):(Data.setCookies("music",!1),Music.IsMusic=!0)},e.prototype._betHistory=function(){Music.PlayChoose();var t=new BetHistory;this.stage.addChild(t)},e.prototype._backHome=function(){Music.PlayChoose(),window.location.href="/"},e.prototype._help=function(){Music.PlayChoose();var t=new HistoryPanel;t.currentState="help",this.addChild(t)},e.prototype._back=function(){Music.PlayChoose(),this.parent.removeChild(this)},e}(eui.Component);__reflect(SetPanel.prototype,"SetPanel");var ShowResult=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShowResultSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.alpha=0,this.height=this.stage.stageHeight,egret.Tween.get(this).to({alpha:1},600),this.back.addEventListener(egret.TouchEvent.TOUCH_TAP,this._back,this)},e.prototype._back=function(){this.dispatchEventWith("newGame"),egret.Tween.removeTweens(this),this.parent.removeChild(this)},e}(eui.Component);__reflect(ShowResult.prototype,"ShowResult");var Soldier=function(t){function e(){var e=t.call(this)||this;return e.s_type=0,e.bet=0,e.soldierGo=!1,e.skinName="SoldierSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e.prototype.setSource=function(){var t=this.soldierGo?this.soldierType+3:this.soldierType;this.soldier.source=Data.soldierImg[t],Data.source=t},e.prototype.setSoldierGo=function(){this.soldierGo=!0,this.bet+=Data.bet,this.s_name.text=Data.soldier[this.soldierType+3]+"x"+this.bet,this.setSource()},Object.defineProperty(e.prototype,"soldierType",{get:function(){return this.s_type},set:function(t){this.s_type=t,this.setSource()},enumerable:!0,configurable:!0}),e.prototype.soldierBack=function(){this.soldierGo=!1,this.bet=0,this.s_name.text=Data.soldier[this.soldierType+3],this.setSource()},e.prototype._loseHarf=function(){this.loseHarf.stop(),this.loseHarf.play()},e.prototype._loseAll=function(){this.loseAll.stop(),this.loseAll.play()},e}(eui.Component);__reflect(Soldier.prototype,"Soldier");var SoldierGroup=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),Data.soldiersGroup=[this.soldier0,this.soldier1,this.soldier2];for(var e=0,i=0,o=Data.soldiersGroup;i<o.length;i++){var n=o[i];e++,n.s_name.text=Data.soldier[e+2],n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.setSoldierGo,this)}this.fight.addEventListener(egret.TouchEvent.TOUCH_TAP,this._fight,this)},e.prototype.betAfter=function(t){var e=t.currentTarget,i=JSON.parse(e.response);0==i.err&&(Data.bouns=i.bonus,Data.betSource=Number(i.enemy_betting),Data.money=Math.floor(i.money),Data.status=i.status)},e.prototype._fight=function(){return Music.PlayChoose(),Data.code>Data.money?void console.log("余额不足， 请充值！"):(Http.get(Data.BET_URL,{betting:Data.source-2,money:Data.code}).addEventListener(egret.Event.COMPLETE,this.betAfter,this),Data.money-=Data.code,Data.coinCount=Data.money,this.dispatchEventWith("fight"),void(this.fight.visible=!1))},e.prototype.setSoldierGo=function(t){Music.PlayChoose(),this.fight.visible=!0;var e=t.currentTarget;if(!e.soldierGo){for(var i=0,o=Data.soldiersGroup;i<o.length;i++){var n=o[i];n.alpha=.5,n.soldierBack()}e.alpha=1}e.setSoldierGo(),Data.code=e.bet},e.prototype.soldierBack=function(){this.fight.visible=!1;for(var t=0,e=Data.soldiersGroup;t<e.length;t++){var i=e[t];i.alpha=1,i.soldierBack()}},e}(eui.Component);__reflect(SoldierGroup.prototype,"SoldierGroup");