var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),BaseController=function(){function t(){this._messages={}}return t.prototype.registerFunc=function(t,e,n){this._messages[t]=[e,n]},t.prototype.applyFunc=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=this._messages[t];return o?o[0].apply(o[1],e):(Log.trace("消息"+t+"不存在侦听"),null)},t.prototype.applyControllerFunc=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return App.ControllerManager.applyFunc.apply(App.ControllerManager,arguments)},t.prototype.setModel=function(t){this._model=t},t.prototype.getModel=function(){return this._model},t.prototype.getControllerModel=function(t){return App.ControllerManager.getControllerModel(t)},t}();__reflect(BaseController.prototype,"BaseController");var BaseClass=function(){function t(){}return t.getInstance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this;if(!n._instance){var o=t.length;0==o?n._instance=new n:1==o?n._instance=new n(t[0]):2==o?n._instance=new n(t[0],t[1]):3==o?n._instance=new n(t[0],t[1],t[2]):4==o?n._instance=new n(t[0],t[1],t[2],t[3]):5==o&&(n._instance=new n(t[0],t[1],t[2],t[3],t[4]))}return n._instance},t}();__reflect(BaseClass.prototype,"BaseClass");var BaseProxy=function(){function t(t){this._controller=t}return t.prototype.applyFunc=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this._controller.applyFunc.apply(this._controller,arguments)},t.prototype.applyControllerFunc=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return this._controller.applyControllerFunc.apply(this._controller,arguments)},t.prototype.receiveServerMsg=function(t,e,n){App.MessageCenter.addListener(t,e,n)},t.prototype.receiveServerMsgOnce=function(t,e,n){var o=function(i){this.removeServerMsg(t,o,this),e.apply(n,i)};this.receiveServerMsg(t,o,this)},t.prototype.receiveServerHttpUpdateMsg=function(t,e,n){this.receiveServerMsg(t+"_HttpUpdate",e,n)},t.prototype.receiveServerHttpUpdateMsgOnce=function(t,e,n){this.receiveServerMsgOnce(t+"_HttpUpdate",e,n)},t.prototype.removeServerMsg=function(t,e,n){App.MessageCenter.removeListener(t,e,n)},t.prototype.removeServerHttpUpdateMsg=function(t,e,n){this.removeServerMsg(t+"_HttpUpdate",e,n)},t.prototype.sendHttpMsg=function(t,e){void 0===e&&(e=null),App.Http.send(t,this.getURLVariables(t,e))},t.prototype.getURLVariables=function(t,e){var n=t.split("."),o={};o.mod=n[0],o["do"]=n[1],null!=e&&(o.p=e);var i=JSON.stringify(o),r=new egret.URLVariables("data="+i+"&h="+App.ProxyUserFlag);return r},t}();__reflect(BaseProxy.prototype,"BaseProxy");var BaseEuiView=function(t){function e(e,n){var o=t.call(this)||this;return o._resources=null,o._controller=e,o._myParent=n,o._isInit=!1,o.percentHeight=100,o.percentWidth=100,o}return __extends(e,t),Object.defineProperty(e.prototype,"myParent",{get:function(){return this._myParent},enumerable:!0,configurable:!0}),e.prototype.setResources=function(t){this._resources=t},e.prototype.isInit=function(){return this._isInit},e.prototype.applyFunc=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this._controller.applyFunc.apply(this._controller,arguments)},e.prototype.applyControllerFunc=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return this._controller.applyControllerFunc.apply(this._controller,arguments)},e.prototype.isShow=function(){return null!=this.stage&&this.visible},e.prototype.addToParent=function(){this._myParent.addChild(this)},e.prototype.removeFromParent=function(){App.DisplayUtils.removeFromParent(this)},e.prototype.initUI=function(){this._isInit=!0},e.prototype.initData=function(){},e.prototype.destroy=function(){this._controller=null,this._myParent=null,this._resources=null},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.loadResource=function(t,e){this._resources&&this._resources.length>0?(App.ResourceUtils.loadResource(this._resources,[],t,null,this),this.once(eui.UIEvent.CREATION_COMPLETE,e,this)):(t(),e())},e.prototype.setVisible=function(t){this.visible=t},e}(eui.Component);__reflect(BaseEuiView.prototype,"BaseEuiView",["IBaseView"]);var BaseEuiLayer=function(t){function e(){var e=t.call(this)||this;return e.percentWidth=100,e.percentHeight=100,e.touchEnabled=!1,e}return __extends(e,t),e}(eui.Group);__reflect(BaseEuiLayer.prototype,"BaseEuiLayer");var BaseScene=function(){function t(){this._layers=new Array}return t.prototype.onEnter=function(){},t.prototype.onExit=function(){App.ViewManager.closeAll(),this.removeAllLayer()},t.prototype.addLayer=function(t){t instanceof BaseSpriteLayer?(App.StageUtils.getStage().addChild(t),this._layers.push(t)):t instanceof BaseEuiLayer&&(App.StageUtils.getUIStage().addChild(t),this._layers.push(t))},t.prototype.addLayerAt=function(t,e){t instanceof BaseSpriteLayer?(App.StageUtils.getStage().addChildAt(t,e),this._layers.push(t)):t instanceof BaseEuiLayer&&(App.StageUtils.getUIStage().addChildAt(t,e),this._layers.push(t))},t.prototype.removeLayer=function(t){t instanceof BaseSpriteLayer?(App.StageUtils.getStage().removeChild(t),this._layers.splice(this._layers.indexOf(t),1)):t instanceof BaseEuiLayer&&(App.StageUtils.getUIStage().removeChild(t),this._layers.splice(this._layers.indexOf(t),1))},t.prototype.layerRemoveAllChild=function(t){t instanceof BaseSpriteLayer?t.removeChildren():t instanceof BaseEuiLayer&&t.removeChildren()},t.prototype.removeAllLayer=function(){for(;this._layers.length;){var t=this._layers[0];this.layerRemoveAllChild(t),this.removeLayer(t)}},t}();__reflect(BaseScene.prototype,"BaseScene");var BaseSpriteLayer=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e}return __extends(e,t),e}(egret.DisplayObjectContainer);__reflect(BaseSpriteLayer.prototype,"BaseSpriteLayer");var BaseSound=function(){function t(){this._cache={},this._loadingCache=new Array,App.TimerManager.doTimer(6e4,0,this.dealSoundTimer,this)}return t.prototype.dealSoundTimer=function(){for(var t=egret.getTimer(),e=Object.keys(this._cache),n=0,o=e.length;o>n;n++){var i=e[n];this.checkCanClear(i)&&t-this._cache[i]>=SoundManager.CLEAR_TIME&&(delete this._cache[i],RES.destroyRes(i))}},t.prototype.getSound=function(t){var e=RES.getRes(t);if(e)this._cache[t]&&(this._cache[t]=egret.getTimer());else{if(-1!=this._loadingCache.indexOf(t))return null;this._loadingCache.push(t),RES.getResAsync(t,this.onResourceLoadComplete,this)}return e},t.prototype.onResourceLoadComplete=function(t,e){var n=this._loadingCache.indexOf(e);-1!=n&&(this._loadingCache.splice(n,1),this._cache[e]=egret.getTimer(),this.loadedPlay(e))},t.prototype.loadedPlay=function(t){},t.prototype.checkCanClear=function(t){return!0},t}();__reflect(BaseSound.prototype,"BaseSound");var ResGame=function(){function t(){App.ResourceUtils.loadGroup("preload",this.onResourceLoadComplete,this.onResourceLoadProgress,this)}return t.prototype.onResourceLoadComplete=function(){this.initModule(),App.SceneManager.runScene(SceneConsts.Game)},t.prototype.onResourceLoadProgress=function(t,e){App.ControllerManager.applyFunc(ControllerConst.Loading,LoadingConst.SetProgress,t,e)},t.prototype.initModule=function(){App.ControllerManager.register(ControllerConst.Game,new GameController)},t}();__reflect(ResGame.prototype,"ResGame");var ResMain=function(){function t(){App.ResourceUtils.loadGroup("home",this.onResourceLoadComplete,this.onResourceLoadProgress,this)}return t.prototype.onResourceLoadComplete=function(){this.initModule(),App.Init(),App.SceneManager.runScene(SceneConsts.Home)},t.prototype.onResourceLoadProgress=function(t,e){App.ControllerManager.applyFunc(ControllerConst.Loading,LoadingConst.SetProgress,t,e)},t.prototype.initModule=function(){App.ControllerManager.register(ControllerConst.Home,new HomeController),App.ControllerManager.register(ControllerConst.Farm,new FarmController)},t}();__reflect(ResMain.prototype,"ResMain");var BasePanelView=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.skinName="resource/skins/PanelSkin.exml",o}return __extends(e,t),Object.defineProperty(e.prototype,"icon",{get:function(){return this._icon},set:function(t){this._icon=t,this.iconDisplay&&(this.iconDisplay.source=this._icon)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"btn",{get:function(){return this._btn},set:function(t){this._btn=t,this.button&&(this.button.source=this._btn)},enumerable:!0,configurable:!0}),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.closeBtnClickHandler,this)},e.prototype.initData=function(){t.prototype.initData.call(this),this.iconDisplay.source=this._icon,this.button.source=this._btn},e.prototype.closeBtnClickHandler=function(t){App.ViewManager.closeView(this)},e}(BaseEuiView);__reflect(BasePanelView.prototype,"BasePanelView");var FarmConst=function(){function t(){}return t}();__reflect(FarmConst.prototype,"FarmConst");var FarmController=function(t){function e(){var e=t.call(this)||this;return e.proxy=new FarmProxy(e),e.farmView=new FarmView(e,LayerManager.UI_Main),App.ViewManager.register(ViewConst.Farm,e.farmView),e}return __extends(e,t),e}(BaseController);__reflect(FarmController.prototype,"FarmController");var FarmProxy=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(BaseProxy);__reflect(FarmProxy.prototype,"FarmProxy");var FarmView=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.api=Data.DONAME+"fish50/index/getScreen",o.skinName="FarmGameSkin",o}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.back_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goBack,this),Http.get(this.api).addEventListener(egret.Event.COMPLETE,this.createList,this)},e.prototype.goBack=function(){App.SceneManager.runScene(SceneConsts.Home)},e.prototype.createList=function(t){this.loading.visible=!1;var e=t.currentTarget,n=JSON.parse(e.response);if(!n.err)for(var o=0,i=n.data;o<i.length;o++){var r=i[o],s=new FarmItem(r);this.scroller_box.addChild(s)}},e}(BaseEuiView);__reflect(FarmView.prototype,"FarmView");var FarmItem=function(t){function e(e){var n=t.call(this)||this;return n.data={multiple:-1900,index:1},n.data=e,n.skinName="FarmItemSkin",n.multiple.text=e.multiple,n.my_pic.source=RES.getRes("farm_"+e.index+"_png"),n.addEventListener(egret.Event.ADDED_TO_STAGE,n.init,n),n}return __extends(e,t),e.prototype.init=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.changeRes,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.reductionRes,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.go,this)},e.prototype.changeRes=function(){this.multiple.bottom=78,this.my_pic.source=RES.getRes("farm_"+this.data.index+"_h_png")},e.prototype.reductionRes=function(){this.multiple.bottom=74,this.my_pic.source=RES.getRes("farm_"+this.data.index+"_png")},e.prototype.go=function(){this.reductionRes();var t=this.multiple.text.split("-");GameConst.multiple_min=parseFloat(t[0]),GameConst.multiple_max=parseFloat(t[1]),GameConst.multiple_index=this.data.index,Data.betBase=GameConst.multiple_min,Data.betIndex=1,App.SceneManager.runScene(SceneConsts.LOADING),new ResGame},e}(eui.Component);__reflect(FarmItem.prototype,"FarmItem");var GameConst=function(){function t(){}return Object.defineProperty(t,"paotai_num",{get:function(){var e=(Data.betIndex-1)*Data.betBase+t.multiple_min;return Math.round(e*Math.pow(10,1))/Math.pow(10,1)},enumerable:!0,configurable:!0}),t}();__reflect(GameConst.prototype,"GameConst");var GameController=function(t){function e(){var e=t.call(this)||this;return e.proxy=new GameProxy(e),e.gameView=new GameView(e,LayerManager.UI_Main),App.ViewManager.register(ViewConst.Game,e.gameView),Data.init(),e}return __extends(e,t),e}(BaseController);__reflect(GameController.prototype,"GameController");var GameProxy=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(BaseProxy);__reflect(GameProxy.prototype,"GameProxy");var GameView=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o._pool=[],o.isof=0,o.shootZd=0,o.shootIng=0,o.jskCd=3e4,o.jskUseTime=0,o.bdkCd=3e4,o.bdkUseTime=0,o.lostIceTime=0,o.startIceTime=0,o.sdkCd=3e4,o.sdkUseTime=0,o.skinName="TopContSkin",o}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.loadboguang(),this.socketListen(),this.system=Ice,Ice.init(),this.addEventListener(egret.Event.ENTER_FRAME,this.gameHit,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.move,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.shoot,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.stopShoot,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.fishClick,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.stopShoot,this),this.bdk.addEventListener(egret.TouchEvent.TOUCH_TAP,this.useBdk,this),this.jsk.addEventListener(egret.TouchEvent.TOUCH_TAP,this.useJsk,this),this.sdk.addEventListener(egret.TouchEvent.TOUCH_TAP,this.useSdk,this),this.shop_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showShop,this),this.shop_btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.no,this)},e.prototype.close=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.gameHit,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.move,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.shoot,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.stopShoot,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.fishClick,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.stopShoot,this),this.bdk.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.useBdk,this),this.jsk.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.useJsk,this),this.sdk.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.useSdk,this),this.shop_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showShop,this),this.shop_btn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.no,this),Data.socket.disconnect()},e.prototype.fishClick=function(t){if(Data.sdkFishId)for(var e in Data.fishList){var n=Data.fishList[e];if(n.hitTestPoint(t.stageX,t.stageY,!0)&&e!=Data.sdkFishId){var o=Data.fishList[Data.sdkFishId];return o.removeLock(),Data.sdkFishId=e,Data.socket.emit("changeLockFish",{sdkFishId:e}),void n.lock()}}},e.prototype.no=function(t){t.stopImmediatePropagation()},e.prototype.showShop=function(){this.shop_group=new Shop,this.shop_group.x=0,this.shop_group.y=0,this.shop_group.reload(),this.shop_group.addEventListener("payShow",this.showPay,this),this.addChild(this.shop_group)},e.prototype.showPay=function(){this.payPanel=new PayPanel,this.payPanel.x=0,this.payPanel.y=0,this.payPanel.reload(),this.addChild(this.payPanel)},e.prototype.runZd=function(){for(var t in Data.zd)Data.zd[t].run()},e.prototype.loadboguang=function(){var t=RES.getRes("ef_boguang_json"),e=RES.getRes("ef_boguang_png"),n=new egret.MovieClipDataFactory(t,e),o=new egret.MovieClip(n.generateMovieClipData("ef_boguang"));return o.gotoAndPlay("play",-1),o.frameRate=8,o.alpha=.6,o.scaleX=6.8,o.scaleY=6.8,this.ef_guang.addChild(o),o},e.prototype.paotai=function(t){return this["paotai"+t]},e.prototype.hitTest=function(t,e){var n=((new Date).getTime(),t.getTop());return t.lockFishId&&t.lockFishId!=e.id?!1:e.hitTestPoint(n.x,n.y)?!0:!1},e.prototype.gameHit=function(){(new Date).getTime();this.lockFish();for(var t in Data.fishList){var e=Data.fishList[t];e.run();for(var n in Data.zd){var o=Data.zd[n];if(o.lockFishId&&o.lockFishId!=Data.allUser[o.userid].sdkFishId)o.remove();else if(o.run(),this.hitTest(o,e)){var i=o.getTop(),r=o.coin;o.remove(!0),o.userid==Data.myId&&Data.socket.emit("attackFish",{id:e.id,x:i.x,y:i.y,betIndex:r})}}}},e.prototype.lockFish=function(){var t=(new Date).getTime(),e=this.width,n=this.height;if(Data.sdkFishId){var o=Data.fishList[Data.sdkFishId],i=o.localToGlobal(o._lock.x,o._lock.y),r=i.x,s=i.y;this.changePTr(r,s),t-this.sdkUseTime<this.sdkCd?Data.coinCount>=GameConst.paotai_num?this.autoShoot():this.stopShoot():(this.stopShoot(),o.removeLock(),Data.sdkFishId=""),(0>=r||r>=e||0>=s||s>=n)&&(o.removeLock(),Data.sdkFishId="")}if(t-this.sdkUseTime<this.sdkCd&&!Data.sdkFishId)for(var a=0,h=Data.fishOrder;a<h.length;a++){var c=h[a];for(var l in Data.fishList){var u=Data.fishList[l],i=u.localToGlobal(u._lock.x,u._lock.y),r=i.x,s=i.y;if(u.fishName==c&&r>0&&e>r&&s>0&&n>s)return Data.sdkFishId=u.id,Data.socket.emit("changeLockFish",{sdkFishId:u.id}),u.lock(),this.changePTr(r,s),void(Data.coinCount>=GameConst.paotai_num&&this.autoShoot())}}},e.prototype.socketListen=function(){var t=this;Data.socket.on("addUser",function(e){t.bdk.setTime(Data.bdkNum),t.jsk.setTime(Data.jskNum),t.sdk.setTime(Data.sdkNum);for(var n=0,o=e.allUserData;n<o.length;n++){var i=o[n];t.addUser(i)}}),Data.socket.on("joinUser",function(e){t.addUser(e)}),Data.socket.on("removeUser",function(e){t.removeUser(e)}),Data.socket.on("shoot",function(e){var n=e.userid,o=e.rotation,i=e.betIndex,r=e.lockFishId,s=Data.allUser[n].paotai,a=(GameConst.paotai_num,0);for(var h in Data.zd)a++;a>120||(s.pao.rotation=o+s.pao.parent.parent.rotation,s.pao_num.text=GameConst.paotai_num.toString(),t.shootBullet(s,n,!1,r,i))}),Data.socket.on("createFish",function(e){var n=new Fish(e);t.fish_group.addChild(n);var o=e.id;Data.fishList[o]=n,n.addEventListener("remove",function(){delete Data.fishList[o]},t)}),Data.socket.on("initFish",function(e){for(var n=e.list,o=e.surplusTime,i=function(e){var n=new Fish(e);t.fish_group.addChild(n);var o=e.id;Data.fishList[o]=n,n.addEventListener("remove",function(){delete Data.fishList[o]},t)},r=0,s=n;r<s.length;r++){var a=s[r];i(a)}o>0&&t.iceSkill(o)}),Data.socket.on("changeLockFish",function(t){Data.allUser[t.userid].sdkFishId=t.sdkFishId}),Data.socket.on("autoRemoveFish",function(t){Data.fishList[t].remove()}),Data.socket.on("attackFish",function(e){var n=0;if(e.bouns){Data.fishList[e.id].bouns=e.bouns;var o=new BaoJi(e.x,e.y,e.bouns,e.isMore,e.userid);t.addChild(o);var i=Data.allUser[e.userid].paotai;Data.fishList[e.id].pt=i,n=99999999}if(Data.fishList[e.id].decHp(n),e.userid==Data.myId&&e.skillCard&&0!=e.skillCard){var r=t.addOneSkill(e.skillCard);r.x=e.x,r.y=e.y,t.fish_group.addChild(r);var s={};if("jsk"==e.skillCard){var a=t.jsk.localToGlobal();s.x=a.x+(t.jsk.width-r.width)/4,s.y=a.y+(t.jsk.height-r.height)/4}if("bdk"==e.skillCard){var a=t.bdk.localToGlobal();s.x=a.x+(t.bdk.width-r.width)/4,s.y=a.y+(t.bdk.height-r.height)/4}if("sdk"==e.skillCard){var a=t.sdk.localToGlobal();s.x=a.x+(t.sdk.width-r.width)/4,s.y=a.y+(t.sdk.height-r.height)/4}if("zs"==e.skillCard){var i=Data.allUser[Data.myId].paotai,a=i.localToGlobal(i.diamonds_group.x,i.diamonds_group.y);s.x=a.x+100,s.y=a.y+30,s.scaleX=.3,s.scaleY=.3}egret.Tween.get(r).wait(500).to(s,500,egret.Ease.sineOut).call(function(){"jsk"==e.skillCard?(Data.jskCount++,t.jsk.setTime(Data.jskCount)):"bdk"==e.skillCard?(Data.bdkCount++,t.bdk.setTime(Data.bdkCount)):"sdk"==e.skillCard?(Data.sdkCount++,t.sdk.setTime(Data.sdkCount)):"zs"==e.skillCard&&Data.diamondsCount++,r.parent.removeChild(r)})}}),Data.socket.on("setMoney",function(t){var e=t.userid,n=t.afterMoney,o=0;for(var i in Data.zd)Data.zd[i].userid==e&&e==Data.myId&&(o+=(Data.zd[i].coin-1)*Data.betBase+GameConst.multiple_min);Data.allUser[e].paotai.money.text=n-o,e==Data.myId&&(Data.coinCount=n-o)}),Data.socket.on("useSkill",function(t){t.skillName}),Data.socket.on("startIce",function(e){var n=e.time;t.iceSkill(n,!0)}),Data.socket.on("logout",function(){t.logout()})},e.prototype.addOneSkill=function(t){var e;return"zs"==t?e=createImg.createBitmapByName("zuan_png"):(e=new SkillCard,e.setTime(1)),e.scaleX=.8,e.scaleY=.8,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.currentState=t,e},e.prototype.move=function(t){return!Data.sdkFishId&&Data.myId&&this.changePTr(t.stageX,t.stageY),!0},e.prototype.changePTr=function(t,e){var n=Data.allUser[Data.myId].paotai;n.setRrotation({x:t,y:e})},e.prototype.shoot=function(t){this.move(t)&&(this.shootZd=1,this.autoShoot())},e.prototype.autoShoot=function(){this.shootIng||(this.shootIng=1,this.addZd())},e.prototype.stopShoot=function(){this.shootZd=0},e.prototype.useJsk=function(){var t=(new Date).getTime();if(!(t-this.jskUseTime<this.jskCd)){if(Data.jskCount<=0){if(Data.diamondsCount<Data.skillDiamonds)return void this.showShop();Data.diamondsCount-=Data.skillDiamonds}else Data.jskCount--,this.jsk.setTime(Data.jskCount);Data.socket.emit("useSkill",{skillName:"jsk"}),this.jskUseTime=t,this.jsk.cd.scaleY=1,egret.Tween.get(this.jsk.cd).to({scaleY:0},this.jskCd).call(function(){Data.shootSpeed=240}),Data.shootSpeed=120}},e.prototype.useBdk=function(){var t=(new Date).getTime();if(!(t-this.bdkUseTime<this.bdkCd)){if(Data.bdkCount<=0){if(Data.diamondsCount<Data.skillDiamonds)return void this.showShop();Data.diamondsCount-=Data.skillDiamonds}else Data.bdkCount--,this.bdk.setTime(Data.bdkCount);Data.socket.emit("useSkill",{skillName:"bdk"}),this.bdkUseTime=t,this.bdk.cd.scaleY=1,egret.Tween.get(this.bdk.cd).to({scaleY:0},this.jskCd).call(function(){})}},e.prototype.iceSkill=function(t,e){var n=this;void 0===e&&(e=!1),this.system.start();var o=(new Date).getTime(),i=this.lostIceTime-o+this.startIceTime;0>i&&(i=0);var r=t-i;for(var s in Data.fishList)e&&(Data.fishList[s].createTime+=r),Data.fishList[s].stop=!0;this.isIceTimeout&&egret.clearTimeout(this.isIceTimeout),this.lostIceTime=t,this.startIceTime=o,this.isIceTimeout=egret.setTimeout(function(){n.system.stop();for(var t in Data.fishList)Data.fishList[t].stop=!1},this,t)},e.prototype.useSdk=function(){var t=(new Date).getTime();if(!(t-this.sdkUseTime<this.sdkCd)){if(Data.sdkCount<=0){if(Data.diamondsCount<Data.skillDiamonds)return void this.showShop();Data.diamondsCount-=Data.skillDiamonds}else Data.sdkCount--,this.sdk.setTime(Data.sdkCount);Data.socket.emit("useSkill",{skillName:"sdk"}),this.sdkUseTime=t,this.sdk.cd.scaleY=1,egret.Tween.get(this.sdk.cd).to({scaleY:0},this.sdkCd)}},e.prototype.addZd=function(){var t=this,e=0;if(Data.myId){var n=Data.allUser[Data.myId].paotai;n.my_Adr_status&&(n.my_Adr_status=!1,n.my_Adr.parent.removeChild(n.my_Adr));for(var o in Data.zd)Data.zd[o].userid==Data.myId&&e++;if(Data.coinCount<GameConst.paotai_num)return e>0?void(this.shootIng=0):(this.showPay(),void(this.shootIng=0));Data.coinCount-=GameConst.paotai_num,setTimeout(function(){t.shootZd?t.addZd():t.shootIng=0},Data.shootSpeed),e>=30||(Data.socket.emit("shoot",{rotation:n.getGlobalRotation(),betIndex:Data.betIndex,lockFishId:Data.sdkFishId}),this.shootBullet(n,Data.myId,!0,Data.sdkFishId))}},e.prototype.shootBullet=function(t,e,n,o,i){void 0===n&&(n=!0);var r=t.pao.localToGlobal(t.pao.x,t.pao.y);t.atkRun();var s=t.money.text,a=i||Data.betIndex;t.money.text=(s-((a-1)*Data.betBase+GameConst.multiple_min)).toString();var h=this.createBullet();h.lockFishId=o,h.onCreate(r,t.getGlobalRotation(),a),n&&App.SoundManager.playEffect("fapao_mp3"),h.userid=e,this.fish_group.addChild(h)},e.prototype.createBullet=function(){var t,e=this;return this._pool&&this._pool.length?t=this._pool.shift():(t=new Zd,t.addEventListener("remove",function(){e.destroyBullet(t)},t)),t},e.prototype.destroyBullet=function(t){null==this._pool&&(this._pool=[]),this._pool.push(t)},e.prototype.addUser=function(t){var e=this.paotai(t.index);e.join(t),Data.myId==t.userid&&(e.nickname.visible=!1,e.diamonds_group.visible=!0,e.diamonds.text=t.diamonds.toString(),e.my_Adr=new MyAdr,e.my_Adr.x=95,e.my_Adr.y=20,e.my_Adr_status=!0,e.pt_group.addChildAt(e.my_Adr,0)),Data.allUser[t.userid]={paotai:e,sdkFishId:t.sdkFishId}},e.prototype.removeUser=function(t){var e=this.paotai(t.index);e.currentState="wait"},e.prototype.logout=function(){Data.socket.disconnect()},e.prototype.setDiamonds=function(t){var e=Data.allUser[Data.myId].paotai;0>t&&(t=0),e.diamonds.text=t.toString()},e}(BaseEuiView);__reflect(GameView.prototype,"GameView");var BgSkinTS=function(t){function e(){var e=t.call(this)||this;return e.skinName="BgSkin",e}return __extends(e,t),e}(eui.Component);__reflect(BgSkinTS.prototype,"BgSkinTS");var BtnSkinTS=function(t){function e(){var e=t.call(this)||this;return e.skinName="BtnSkin",e}return __extends(e,t),e.prototype.init=function(){this.lab=this.btn.labelDisplay},e}(eui.Component);__reflect(BtnSkinTS.prototype,"BtnSkinTS");var CoinCountTS=function(t){function e(){var e=t.call(this)||this;return e.count=0,e.x=20,e.y=20,e.skinName="CoinCountSkin",e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.no,e),e}return __extends(e,t),e.prototype.no=function(t){t.stopImmediatePropagation()},e.prototype.setCoin=function(t){this.count=t,this.coinNum.text=t},e}(eui.Component);__reflect(CoinCountTS.prototype,"CoinCountTS");var Fish=function(t){function e(e){var n=t.call(this)||this;return n.bouns=0,n.stop=!1,n.spaceX=e.spaceX,n.spaceY=e.spaceY,n.speedX=e.speedX,n.speedY=e.speedY,n.id=e.id,n.hp=1,n.hpMax=e.hpMax,n.bouns=e.bouns,n.fishName=e.name,n.createTime=e.createTime,n.addEventListener(egret.Event.ADDED_TO_STAGE,n.create,n),n}return __extends(e,t),e.prototype.create=function(){this.movieClip=this.load(this.fishName,"yu1"),this.addChild(this.movieClip),this.movieClip.gotoAndPlay("yu1",-1),this.setLoca()},e.prototype.setLoca=function(){this.x=this.spaceX,this.y=this.spaceY,this._lock=new Lock,this.lock_x=Data.fishLockData[this.fishName].lock_x,this.lock_y=Data.fishLockData[this.fishName].lock_y,this.rotation=90-180*Math.atan2(this.speedX,this.speedY)/Math.PI},e.prototype.decHp=function(t){var e=this,n=[1,0,0,0,-50,0,1,0,0,-50,0,0,1,0,-50,0,0,0,1,0],o=new egret.ColorMatrixFilter(n);this.filters=[o],egret.setTimeout(function(){e.filters=[]},this,200),this.hp-=t,t>0&&this.remove()},e.prototype.run=function(){if(!this.stop){var t=Data.getSeverTime(),e=t-this.createTime;this.x=this.spaceX+this.speedX*e,this.y=this.spaceY+this.speedY*e}},e.prototype.remove=function(){var t=this;Data.sdkFishId==this.id&&(Data.sdkFishId=""),this.dispatchEventWith("remove",!1,{x:this.x-this.width/2,y:this.y}),this.hp<=0?(App.SoundManager.playEffect("gold_mp3"),egret.setTimeout(function(){t.addCoin(),t.visible=!1},this,1e3)):this.parent.removeChild(this)},e.prototype.load=function(t,e){void 0===e&&(e=t);var n=RES.getRes(t+"_json"),o=RES.getRes(t+"_png"),i=new egret.MovieClipDataFactory(n,o),r=new egret.MovieClip(i.generateMovieClipData(e));return r},e.prototype.addCoin=function(){var t,e=this,n=this.coin(),o=Math.ceil(this.width/n.width),i=(Math.ceil(this.height/n.height),(this.height-n.height)/2),r=function(){var o=t*n.width;egret.setTimeout(function(){e._addCoin(o,i)},s,100*t)},s=this;for(t=0;o>t;t++)r();egret.setTimeout(function(){e.parent.removeChild(e)},this,100*t)},e.prototype._addCoin=function(t,e){var n=this.pt.userid==Data.myId?this.coin():this.coin(!0),o=this.pt.pao.localToGlobal(this.pt.pao.x,this.pt.pao.y),i={x:o.x,y:o.y};n.x=this.x+t,n.y=this.y+e,this.parent.addChild(n),setTimeout(function(){egret.Tween.get(n).to(i,500,egret.Ease.sineOut).call(function(){n.parent.removeChild(n)})},500)},e.prototype.coin=function(t){void 0===t&&(t=!1);var e;return e=t?this.load("coin2"):this.load("coin"),e.gotoAndPlay("run",-1),e},e.prototype.lock=function(){this._lock.x=this.lock_x,this._lock.y=this.lock_y,this.addChild(this._lock),this._lock.start()},e.prototype.removeLock=function(){this._lock&&this.removeChild(this._lock)},e}(egret.Sprite);__reflect(Fish.prototype,"Fish");var His=function(t){function e(){var e=t.call(this)||this;return e.current_page=0,e.last_page=1,e.s_isLoading=!1,e.skinName="HisSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.init,e),e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.no,e),e}return __extends(e,t),e.prototype.no=function(t){t.stopImmediatePropagation()},e.prototype.init=function(){this.percentHeight=100,this.percentWidth=100,this.width=this.stage.stageWidth,this.height=this.stage.stageHeight,this.collection=new eui.ArrayCollection,this.list.dataProvider=this.collection,this.list.itemRenderer=HisItem,this.list.itemRendererSkinName="HisItemSkin",this.list.selectedIndex=0,this.scroller.addEventListener(eui.UIEvent.CHANGE_END,this.loadData,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tag,this),this.reload.addEventListener(egret.TouchEvent.TOUCH_TAP,this.reloadData,this),this.loadData()},e.prototype.reloadData=function(){var t=this;this.current_page=0,this.collection.removeAll(),this.scroller.viewport.scrollV=0,egret.setTimeout(function(){t.loadData()},this,100)},e.prototype.tag=function(){this.parent.removeChild(this)},Object.defineProperty(e.prototype,"isLoading",{get:function(){return this.s_isLoading},set:function(t){t?this.tips.text="数据加载中...":this.tips.text="上拉加载更多"},enumerable:!0,configurable:!0}),e.prototype.loadData=function(){var t=this.scroller.viewport.scrollV-this.scroller.viewport.contentHeight+this.scroller.viewport.height;this.isLoading||0>t||this.current_page>=this.last_page||(this.isLoading=!0,this.current_page++,Http.get(Data.HIS_LIST_URL+"?page="+this.current_page).addEventListener(egret.Event.COMPLETE,this.setData,this))},e.prototype.setData=function(t){this.isLoading=!1;var e=t.currentTarget,n=JSON.parse(e.response);this.current_page=n.current_page,this.last_page=n.last_page,this.current_page>=this.last_page&&(this.tips.text="所有数据加载完成");for(var o=0,i=n.data;o<i.length;o++){var r=i[o];this.collection.addItem(r)}},e}(eui.Component);__reflect(His.prototype,"His");var HisItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="HisItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=(this.data.dishu_id-1,"fish_"+this.data.name+"_png");this.shu_img.source=t,this.shu_name.text=this.data.title,this.t_num.text=this.data.bet_money,this.data.bouns>0?(this.bouns.text="奖励 "+this.data.bouns,this.hit_str.textColor=3735326,this.hit_str.text="捕获"):(this.bouns.text="",this.hit_str.textColor=16732160,this.hit_str.text="未捕获")},e}(eui.ItemRenderer);__reflect(HisItem.prototype,"HisItem");var Ice=function(){function t(){}return t.init=function(){var e=RES.getRes("ice_json"),n=RES.getRes("ice_png");t.IceMcMyFactory=new egret.MovieClipDataFactory(e,n),t.ice_img=createImg.createBitmapByName("freezing004_png")},t.start=function(){t.ice_img.x=0,t.ice_img.y=0,t.ice_img.width=Data.view.width,t.ice_img.height=Data.view.height,Data.view.addChild(t.ice_img),egret.Tween.get(t.ice_img,{loop:!0}).to({alpha:.5},1200).to({alpha:1},1200),t.chaoshui(),setTimeout(function(){t.chaoshui(2)},400)},t.stop=function(){Data.view.removeChild(t.ice_img)},t.chaoshui=function(e){void 0===e&&(e=1);var n=new egret.MovieClip(t.IceMcMyFactory.generateMovieClipData("ice"));n.scaleX=4,n.scaleY=4,n.gotoAndPlay("1",-1);var o=0;2==e&&(o=Data.view.width-4*n.width),n.x=o,n.y=Data.view.height,Data.view.addChild(n);var i=egret.Tween.get(n,{loop:!1});i.to({y:-500},1100,egret.Ease.sineInOut),i.call(function(){Data.view.removeChild(n)})},t}();__reflect(Ice.prototype,"Ice");var MenuSkinTS=function(t){function e(){var e=t.call(this)||this;return e.skinName="MenuSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.init,e),e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.no,e),e}return __extends(e,t),e.prototype.init=function(){this.x=this.stage.stageWidth-this.width-20,this.y=20,this.menuBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.menu,this),this.gameIndex.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toGameIndex,this),this.btn_his.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showHis,this),this.btn_bouns.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showBouns,this),this.btn_help.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showHelp,this),this.back_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goBack,this)
},e.prototype.showHis=function(){this.stage.addChild(new His)},e.prototype.showBouns=function(){this.stage.addChild(new BounsShow)},e.prototype.showHelp=function(){this.stage.addChild(new Help)},e.prototype.menu=function(t){this.currentState="open"==this.currentState?"close":"open"},e.prototype.no=function(t){t.stopImmediatePropagation()},e.prototype.toIndex=function(){window.top.location.href="/"},e.prototype.toGameIndex=function(){window.top.location.href="/index/Game/"},e.prototype.goBack=function(){App.SceneManager.runScene(SceneConsts.Farm)},e}(eui.Component);__reflect(MenuSkinTS.prototype,"MenuSkinTS");var MoreCoinSkinTS=function(t){function e(){var e=t.call(this)||this;return e.skinName="MoreCoinSkin",e}return __extends(e,t),e}(eui.Component);__reflect(MoreCoinSkinTS.prototype,"MoreCoinSkinTS");var My=function(t){function e(){var e=t.call(this)||this;return e.status=["1","5","10","20","50"],e._level=0,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.setXY,e),e}return __extends(e,t),e.prototype.fj=function(){this.box=new eui.Component,this.box.skinName="FjSkin",this.addChild(this.box)},e.prototype.setXY=function(){this.fj(),this.anchorOffsetX=this.box.width/2,this.anchorOffsetY=this.box.height/2+20,this.x=this.anchorOffsetX,this.y=this.anchorOffsetY},Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(t){var e=this.status.length;t>=e||0>t||(this._level=t,this.box.currentState=this.status[t])},enumerable:!0,configurable:!0}),e.prototype.addBullet=function(){this.level++},e.prototype.decBullet=function(){this.level--},e}(egret.Sprite);__reflect(My.prototype,"My");var PTTS=function(t){function e(){var e=t.call(this)||this;return e.userid=0,e.status=["l_b","r_b","l_t","r_t"],e.my_Adr_status=!1,e.skinName="PTSkin",e.pao_num.text=GameConst.paotai_num.toString(),e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.no,e),e}return __extends(e,t),e.prototype.no=function(t){t.stopImmediatePropagation()},e.prototype.createChildren=function(){var e=this;t.prototype.createChildren.call(this),this.x=(this.stage.stageWidth-this.width)/2,this.y=this.stage.stageHeight-this.height,this.addBullet.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.setBetIndex(!0)},this),this.decBullet.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.setBetIndex(!1)},this)},e.prototype.setBetIndex=function(t){void 0===t&&(t=!0),App.SoundManager.playEffect("diamondChange_mp3"),t?Data.betIndex++:Data.betIndex--;var e=(GameConst.multiple_max-GameConst.multiple_min)/Data.betBase+1;Data.betIndex>e&&(Data.betIndex=1),Data.betIndex<1&&(Data.betIndex=e),Data.socket.emit("setBetIndex",{betIndex:Data.betIndex}),this.pao_num.text=GameConst.paotai_num.toString()},e.prototype.atkRun=function(){this.atk.stop(),this.atk.play()},e.prototype.getGlobalRotation=function(){return this.pao.rotation+this.pao.parent.parent.rotation},e.prototype.join=function(t){this.userid=t.userid,Data.getBLen(t.nickname)>8&&(t.nickname=t.nickname.substr(0,7)+".."),this.nickname.text=t.nickname,this.money.text=t.money.toString(),this.currentState=this.status[t.index],Data.myId==this.userid?(this.addBullet.visible=!0,this.decBullet.visible=!0):(this.addBullet.visible=!1,this.decBullet.visible=!1)},e.prototype.setRrotation=function(t){var e=t.x,n=t.y,o=this.pao.localToGlobal(this.pao.x,this.pao.y);this.pao.rotation=180*Math.atan2(e-o.x,o.y-n)/Math.PI+this.pao.parent.parent.rotation},e}(eui.Component);__reflect(PTTS.prototype,"PTTS");var SkillCard=function(t){function e(){var e=t.call(this)||this;return e.num=0,e.skinName="CardSkin",e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.no,e),e.diamonds.text="x "+Data.skillDiamonds.toString(),e}return __extends(e,t),e.prototype.no=function(t){t.stopImmediatePropagation()},e.prototype.setTime=function(t){0>=t?(this.diamonds_group.visible=!0,this.num_group.visible=!1):(this.diamonds_group.visible=!1,this.num_group.visible=!0),this.num=t,this.time.text="x "+this.num.toString()},e}(eui.Component);__reflect(SkillCard.prototype,"SkillCard");var Zd=function(t){function e(){var e=t.call(this)||this;e.baoNum=1,e.speed=.8,e.coin=0,e.speedX=0,e.speedY=0;var n=new eui.Component;return n.skinName="WBoomSkin",e.boom=n,e}return __extends(e,t),e.prototype.onCreate=function(t,e,n){this.coin=n||Data.betIndex,this.space=t,this.rotation=e,this.skinName="ZdSkin",this.createTime=(new Date).getTime(),this.startX=this.space.x,this.startY=this.space.y,this.startR=e,this.create()},e.prototype.create=function(){this.id=e.zdid++,Data.zd[this.id]=this,this.anchorOffsetX=this.width/2,this.anchorOffsetY=109,this.speedX=this.speed*Math.sin(Math.PI*this.rotation/180),this.speedY=-this.speed*Math.cos(Math.PI*this.rotation/180),this.x=this.space.x,this.y=this.space.y},e.prototype.run=function(){var t=(new Date).getTime()-this.createTime,e=this.startX+t*this.speedX,n=this.startY+t*this.speedY,o=Math.floor(e/this.stage.stageWidth),i=Math.floor(n/this.stage.stageHeight),r=e%this.stage.stageWidth,s=n%this.stage.stageHeight,a=Math.pow(-1,o),h=Math.pow(-1,i),c=r*a,l=s*h;0>c&&(c=this.stage.stageWidth+c),0>l&&(l=this.stage.stageHeight+l);var u=this.speedX*a,p=this.speedY*h,d=180-180*Math.atan2(u,p)/Math.PI;this.x=c,this.y=l,this.rotation=d},e.prototype.getTop=function(){var t=this.anchorOffsetY*Math.sin(Math.PI*this.rotation/180),e=this.anchorOffsetY*Math.cos(Math.PI*this.rotation/180),n=this.x+t,o=this.y-e;return{x:n,y:o}},e.prototype.remove=function(t){var e=this;if(void 0===t&&(t=!1),t){var n=this.boom;n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2;var o=this.getTop();n.x=o.x,n.y=o.y,this.parent.addChild(n),n.alpha=1,n.scaleX=.5,n.scaleY=.5,egret.Tween.get(n).to({scaleX:1,scaleY:1},100,egret.Ease.backOut).to({rotation:30},200).to({rotation:60,alpha:0},200).call(function(){n.parent.removeChild(n),e.dispatchEventWith("remove")})}else{this.userid==Data.myId&&(Data.coinCount+=(this.coin-1)*Data.betBase+GameConst.multiple_min);var i=Data.allUser[this.userid].paotai.money.text;Data.allUser[this.userid].paotai.money.text=parseInt(i)+(this.coin-1)*Data.betBase+GameConst.multiple_min}this.parent.removeChild(this),delete Data.zd[this.id]},e.prototype.getBao=function(){var t=Math.floor(10*Math.random());return 1>t?5:2>t?4:3>t?3:4>t?2:1},e.prototype.writeBao=function(){var t=this.baoNum;if(!(1>=t)){var e=this.getTop(),n=new egret.BitmapText;n.font=RES.getRes("bj_fnt"),n.textAlign=egret.HorizontalAlign.CENTER,n.scaleX=0,n.scaleY=0,this.parent.addChild(n),n.text="暴击*"+t,n.y=e.y,n.anchorOffsetY=n.height,n.anchorOffsetX=n.width/2,n.x=e.x,egret.Tween.get(n).to({scaleX:1,scaleY:1},200,egret.Ease.sineIn).wait(800).to({scaleX:0,scaleY:0},200,egret.Ease.sineOut).call(function(){n.parent.removeChild(n)})}},e.zdid=0,e}(eui.Component);__reflect(Zd.prototype,"Zd");var BounsShow=function(t){function e(){var e=t.call(this)||this;return e.skinName="BounsShowSkin",e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.no,e),e}return __extends(e,t),e.prototype.no=function(t){t.stopImmediatePropagation()},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.percentHeight=100,this.percentWidth=100,this.width=this.stage.stageWidth,this.height=this.stage.stageHeight,this.bg_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.hide,this)},e.prototype.hide=function(){this.parent.removeChild(this)},e}(eui.Component);__reflect(BounsShow.prototype,"BounsShow");var Help=function(t){function e(){var e=t.call(this)||this;return e.skinName="HelpSkin",e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.no,e),e}return __extends(e,t),e.prototype.no=function(t){t.stopImmediatePropagation()},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.percentHeight=100,this.percentWidth=100,this.width=this.stage.stageWidth,this.height=this.stage.stageHeight,this.bg_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.hide,this)},e.prototype.hide=function(){this.parent.removeChild(this)},e}(eui.Component);__reflect(Help.prototype,"Help");var Lock=function(t){function e(){var e=t.call(this)||this;return e.skinName="LockSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2},e.prototype.start=function(){var t=this;this.scaleX=3,this.scaleY=3;var e=egret.Tween.get(this,{loop:!1});e.to({scaleX:1,scaleY:1},600),e.call(function(){playAnimation.play(t.lock_play,!0)})},e}(eui.Component);__reflect(Lock.prototype,"Lock");var MyAdr=function(t){function e(){var e=t.call(this)||this;return e.skinName="MyAdrSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.start()},e.prototype.start=function(){playAnimation.play(this.my_play,!0)},e}(eui.Component);__reflect(MyAdr.prototype,"MyAdr");var Pao=function(t){function e(){var e=t.call(this)||this;return e.skinName="PaoSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e}(eui.Component);__reflect(Pao.prototype,"Pao");var HomeConst=function(){function t(){}return t.SoundOn=!0,t}();__reflect(HomeConst.prototype,"HomeConst");var HomeController=function(t){function e(){var e=t.call(this)||this;return e.proxy=new HomeProxy(e),e.homeView=new HomeView(e,LayerManager.UI_Main),App.ViewManager.register(ViewConst.Home,e.homeView),e}return __extends(e,t),e}(BaseController);__reflect(HomeController.prototype,"HomeController");var HomeProxy=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(BaseProxy);__reflect(HomeProxy.prototype,"HomeProxy");var HomeView=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.api=Data.DONAME+"fish50/index/getInfo",o.skinName="HomeMainSkin",o}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.jjcMc(),this.ylMc(),playAnimation.play(this.ylc_tw,!0)},e.prototype.open=function(){this.yl_game.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goGame,this),this.jj_game.addEventListener(egret.TouchEvent.TOUCH_TAP,this.noOpen,this),this.back_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goBack,this),this.shop_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showShop,this),this.recharge_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showPay,this),this.sound_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeBgSound,this),this.rank_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.noOpen,this),this.task_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.noOpen,this),Http.get(this.api).addEventListener(egret.Event.COMPLETE,this.initInfo,this)},e.prototype.close=function(){this.yl_game.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.narrow,this),this.yl_game.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.reduction,this),this.yl_game.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goGame,this),this.jj_game.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.jjNarrow,this),this.jj_game.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.jjReduction,this),this.jj_game.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.noOpen,this),this.back_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goBack,this),this.shop_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showShop,this),this.recharge_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showPay,this),this.sound_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeBgSound,this),this.rank_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.noOpen,this),this.task_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.noOpen,this)},e.prototype.initInfo=function(t){var e=t.currentTarget,n=JSON.parse(e.response);this.money.text=n.money,this.nick_name.text=n.nick_name,this.photo.source=Data.DONAME+"index/Image/load?url="+n.photo},e.prototype.changeBgSound=function(){HomeConst.SoundOn=!HomeConst.SoundOn,HomeConst.SoundOn?this.sound_btn.skinName="skins.SoundOnButtonSkin":this.sound_btn.skinName="skins.SoundOffButtonSkin",App.SoundManager.setBgOn(HomeConst.SoundOn),App.SoundManager.setEffectOn(HomeConst.SoundOn)},e.prototype.showShop=function(){this.shop_group=new Shop,this.shop_group.x=0,this.shop_group.y=0,this.shop_group.reload(),this.addChild(this.shop_group)},e.prototype.showPay=function(){var t=new PayPanel;t.x=0,t.y=0,t.reload(),this.addChild(t)},e.prototype.narrow=function(){var t=this.yl_game.getChildAt(0);t.stop(),t.x=.1*t.width/2,t.y=.1*t.height/2,t.scaleX=.95,t.scaleY=.95,t.alpha=.95},e.prototype.reduction=function(){var t=this.yl_game.getChildAt(0);t.gotoAndPlay("go",-1),t.x=0,t.y=0,t.scaleX=1,t.scaleY=1,t.alpha=1},e.prototype.jjNarrow=function(){var t=this.jj_game.getChildAt(0);t.stop(),t.x=.1*t.width/2,t.y=.1*t.height/2,t.scaleX=.95,t.scaleY=.95,t.alpha=.95},e.prototype.jjReduction=function(){var t=this.jj_game.getChildAt(0);t.gotoAndPlay("go",-1),t.x=0,t.y=0,t.scaleX=1,t.scaleY=1,t.alpha=1},e.prototype.jjcMc=function(){var t=RES.getRes("jjc_mc_json"),e=RES.getRes("jjc_tex_png"),n=new egret.MovieClipDataFactory(t,e),o=new egret.MovieClip(n.generateMovieClipData("go"));o.y=-20,this.jj_game.addChild(o),o.gotoAndPlay("go",-1)},e.prototype.ylMc=function(){var t=RES.getRes("ylc_mc_json"),e=RES.getRes("ylc_tex_png"),n=new egret.MovieClipDataFactory(t,e),o=new egret.MovieClip(n.generateMovieClipData("go"));o.x=-20,o.y=-40,this.yl_game.addChild(o),o.gotoAndPlay("go",-1)},e.prototype.goGame=function(){App.SceneManager.runScene(SceneConsts.Farm)},e.prototype.goBack=function(){window.top.history.go(-1)},e.prototype.noOpen=function(){TipsUtils.showTipsDownToUp("暂未开放")},e}(BaseEuiView);__reflect(HomeView.prototype,"HomeView");var LoadingConst=function(){function t(){}return t.SetProgress=10001,t}();__reflect(LoadingConst.prototype,"LoadingConst");var LoadingController=function(t){function e(){var e=t.call(this)||this;return e.loadingView=new LoadingView(e,LayerManager.UI_Main),App.ViewManager.register(ViewConst.Loading,e.loadingView),e.registerFunc(LoadingConst.SetProgress,e.setProgress,e),e}return __extends(e,t),e.prototype.setProgress=function(t,e){this.loadingView.setProgress(t,e)},e}(BaseController);__reflect(LoadingController.prototype,"LoadingController");var LoadingView=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.skinName="LoadingUISkin",o}return __extends(e,t),e.prototype.setProgress=function(t,e){this.loading_jd.percentWidth=t/e*100},e}(BaseEuiView);__reflect(LoadingView.prototype,"LoadingView");var FarmScene=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onEnter=function(){t.prototype.onEnter.call(this),this.addLayerAt(LayerManager.UI_Main,0),App.ViewManager.open(ViewConst.Farm)},e.prototype.onExit=function(){t.prototype.onExit.call(this)},e}(BaseScene);__reflect(FarmScene.prototype,"FarmScene");var GameScene=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onEnter=function(){t.prototype.onEnter.call(this),this.addLayerAt(LayerManager.UI_Main,0),App.ViewManager.open(ViewConst.Game),App.SoundManager.playBg("bgmu_mp3")},e.prototype.onExit=function(){t.prototype.onExit.call(this),App.ViewManager.unregister(ViewConst.Game)},e}(BaseScene);__reflect(GameScene.prototype,"GameScene");var HomeScene=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onEnter=function(){t.prototype.onEnter.call(this),this.addLayerAt(LayerManager.UI_Main,0),this.addLayer(LayerManager.UI_Tips),App.ViewManager.open(ViewConst.Home),App.SoundManager.playBg("home_bg_mp3")},e.prototype.onExit=function(){t.prototype.onExit.call(this)},e}(BaseScene);__reflect(HomeScene.prototype,"HomeScene");var LayerManager=function(){function t(){}return t.Game_Bg=new BaseSpriteLayer,t.Game_Main=new BaseSpriteLayer,t.UI_Main=new BaseEuiLayer,t.UI_Popup=new BaseEuiLayer,t.UI_Message=new BaseEuiLayer,t.UI_Tips=new BaseEuiLayer,t}();__reflect(LayerManager.prototype,"LayerManager");var LoadingScene=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onEnter=function(){t.prototype.onEnter.call(this),this.addLayer(LayerManager.UI_Main),App.ViewManager.open(ViewConst.Loading)},e.prototype.onExit=function(){t.prototype.onExit.call(this)},e}(BaseScene);__reflect(LoadingScene.prototype,"LoadingScene");var App=function(){function t(){}return Object.defineProperty(t,"Http",{get:function(){return Http.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ControllerManager",{get:function(){return ControllerManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ViewManager",{get:function(){return ViewManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SceneManager",{get:function(){return SceneManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DebugUtils",{get:function(){return DebugUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MessageCenter",{get:function(){return MessageCenter.getInstance(0)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TimerManager",{get:function(){return TimerManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DateUtils",{get:function(){return DateUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MathUtils",{get:function(){return MathUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RandomUtils",{get:function(){return RandomUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DisplayUtils",{get:function(){return DisplayUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"StageUtils",{get:function(){return StageUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"StringUtils",{get:function(){return StringUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CommonUtils",{get:function(){return CommonUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SoundManager",{get:function(){return SoundManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DeviceUtils",{get:function(){return DeviceUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"EgretExpandUtils",{get:function(){return EgretExpandUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ShockUtils",{get:function(){return ShockUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ResourceUtils",{get:function(){return ResourceUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RenderTextureManager",{get:function(){return RenderTextureManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TextFlowMaker",{get:function(){return TextFlowMaker.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"NotificationCenter",{get:function(){return null==t._notificationCenter&&(t._notificationCenter=new MessageCenter(1)),t._notificationCenter},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DelayOptManager",{get:function(){return DelayOptManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ArrayUtils",{get:function(){return ArrayUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"EasyLoading",{get:function(){return EasyLoading.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ResVersionManager",{get:function(){return ResVersionManager.getInstance()},enumerable:!0,configurable:!0}),t.Init=function(){t.GlobalData=RES.getRes("data_config_json"),t.DebugUtils.isOpen(t.GlobalData.IsDebug),t.DebugUtils.setThreshold(5),t.EgretExpandUtils.init(),t.Http.initServer(t.GlobalData.HttpSerever)},t.ProxyUserFlag="",t.GlobalData=null,t.ProtoFile=null,t.ProtoConfig=null,t}();__reflect(App.prototype,"App");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function o(o){e.call(n,o,t)}if(RES.hasRes(t)){var i=RES.getRes(t);i?o(i):RES.getResAsync(t,o,this)}else RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,o){function i(t){e.call(o,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),n.call(o))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.registerImplementation("eui.IAssetAdapter",new AssetAdapter),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),App.ResourceUtils.addConfig("resource/default.res.json?v=4","resource/"),App.ResourceUtils.loadConfig(this.onConfigComplete,this)},e.prototype.onConfigComplete=function(t){var e=new eui.Theme("resource/default.thm.json?v=1.2.9",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},e.prototype.onThemeLoadComplete=function(){this.initScene(),this.initModule(),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("loading")},e.prototype.onResourceLoadComplete=function(t){"loading"==t.groupName&&(App.SceneManager.runScene(SceneConsts.LOADING),Data.init_one(),new ResMain)},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.initScene=function(){App.SceneManager.register(SceneConsts.LOADING,new LoadingScene),App.SceneManager.register(SceneConsts.Home,new HomeScene),App.SceneManager.register(SceneConsts.Game,new GameScene),App.SceneManager.register(SceneConsts.Farm,new FarmScene),egret.ImageLoader.crossOrigin="anonymous",egret.TextField.default_fontFamily="Microsoft YaHei"},e.prototype.initModule=function(){App.ControllerManager.register(ControllerConst.Loading,new LoadingController)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var EasyLoading=function(t){function e(){var e=t.call(this)||this;return e.content=null,e.speed=.6,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.averageUtils=new AverageUtils,this.content=new egret.Sprite,this.content.graphics.beginFill(0,.2),this.content.graphics.drawRect(0,0,App.StageUtils.getWidth(),App.StageUtils.getHeight()),this.content.graphics.endFill(),this.content.touchEnabled=!0,this.uiImageContainer=new egret.DisplayObjectContainer,this.uiImageContainer.x=.5*this.content.width,this.uiImageContainer.y=.5*this.content.height,this.content.addChild(this.uiImageContainer),RES.getResByUrl("resource/assets/load_Reel.png",function(t){var e=new egret.Bitmap;e.texture=t,e.x=.5*-e.width,e.y=.5*-e.height,this.uiImageContainer.addChild(e)},this,RES.ResourceItem.TYPE_IMAGE)},e.prototype.showLoading=function(){App.StageUtils.getStage().addChild(this.content),App.TimerManager.doFrame(1,0,this.enterFrame,this)},e.prototype.hideLoading=function(){this.content&&this.content.parent&&(App.StageUtils.getStage().removeChild(this.content),this.uiImageContainer.rotation=0),App.TimerManager.remove(this.enterFrame,this)},e.prototype.enterFrame=function(t){this.averageUtils.push(this.speed*t),this.uiImageContainer.rotation+=this.averageUtils.getValue()},e}(BaseClass);__reflect(EasyLoading.prototype,"EasyLoading");var ControllerManager=function(t){function e(){var e=t.call(this)||this;return e._modules={},e}return __extends(e,t),e.prototype.clear=function(){this._modules={}},e.prototype.register=function(t,e){this.isExists(t)||(this._modules[t]=e)},e.prototype.unregister=function(t){this.isExists(t)&&(this._modules[t]=null,delete this._modules[t])},e.prototype.isExists=function(t){return null!=this._modules[t]},e.prototype.applyFunc=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var i=this._modules[t];if(i){for(var r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];return i.applyFunc.apply(i,r)}return Log.trace("模块"+t+"不存在"),null},e.prototype.getControllerModel=function(t){var e=this._modules[t];return e?e.getModel():null},e}(BaseClass);__reflect(ControllerManager.prototype,"ControllerManager");var ViewManager=function(t){function e(){var e=t.call(this)||this;return e._views={},e._opens=[],e}return __extends(e,t),e.prototype.clear=function(){this.closeAll(),this._views={}},e.prototype.register=function(t,e){null!=e&&(this._views[t]||(this._views[t]=e))},e.prototype.unregister=function(t){this._views[t]&&(this._views[t]=null,delete this._views[t])},e.prototype.destroy=function(t,e){void 0===e&&(e=null);var n=this.getView(t);n&&(this.unregister(t),n.destroy(),n=null),this.register(t,e)},e.prototype.open=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=this.getView(t);return null==o?void Log.trace("UI_"+t+"不存在"):o.isShow()?(o.open.apply(o,e),o):(o.isInit()?(o.addToParent(),o.open.apply(o,e)):(App.EasyLoading.showLoading(),o.loadResource(function(){o.setVisible(!1),o.addToParent()}.bind(this),function(){o.initUI(),o.initData(),o.open.apply(o,e),o.setVisible(!0),App.EasyLoading.hideLoading()}.bind(this))),this._opens.push(t),o)},e.prototype.close=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(this.isShow(t)){var o=this.getView(t);if(null!=o){var i=this._opens.indexOf(t);t>=0&&this._opens.splice(i,1),o.removeFromParent(),o.close.apply(o,e)}}},e.prototype.closeView=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=Object.keys(this._views),i=0,r=o.length;r>i;i++){var s=parseInt(o[i]);if(this._views[s]==t)return void this.close(s,e)}},e.prototype.getView=function(t){return this._views[t]},e.prototype.closeAll=function(){for(;this._opens.length;)this.close(this._opens[0])},e.prototype.currOpenNum=function(){return this._opens.length},e.prototype.isShow=function(t){return-1!=this._opens.indexOf(t)},e}(BaseClass);__reflect(ViewManager.prototype,"ViewManager");var BaoJi=function(t){function e(e,n,o,i,r){void 0===i&&(i=!1);var s=t.call(this)||this;return s.xiaoyuMusic=["yudie_mp3","yudie_mp3","yudie_mp3","yudie_mp3","dou_qi_fu_wo_mp3","o_no_mp3"],s.dayuMusic=["bu_yao_a_mp3","zhe_bu_shi_mp3"],s.x=e,s.y=n,s.bao=o,s.isMore=i,s.userid=r,s.scaleX=0,s.scaleY=0,s.addEventListener(egret.Event.ADDED_TO_STAGE,s.init,s),s}return __extends(e,t),e.prototype.init=function(){if(this.isMore){var t=this.dayuMusic[Math.floor(Math.random()*this.dayuMusic.length)];App.SoundManager.playEffect(t),this.getMore()}else{var t=this.xiaoyuMusic[Math.floor(Math.random()*this.xiaoyuMusic.length)];App.SoundManager.playEffect(t)}this.addCoin()},e.prototype.getMore=function(){App.SoundManager.playEffect("CoinLightMove_o_mp3");var t=new MoreCoinSkinTS;egret.Tween.get(t.guang).to({rotation:360},5e3),this.width=t.width,this.height=t.height,this.addChild(t)},e.prototype.addCoin=function(){var t=this;if(this.spr=new egret.Sprite,this.createNumber(),!this.isMore){var e=new egret.Bitmap;this.userid!=Data.myId?e.texture=RES.getRes("jiahao2_png"):e.texture=RES.getRes("jiahao_png"),this.spr.addChild(e),this.bmpText.x=e.width,this.spr.width=e.width+this.bmpText.width,this.spr.height=Math.max(e.height,this.bmpText.height)}this.spr.anchorOffsetX=this.spr.width/2,this.spr.anchorOffsetY=this.spr.height/2,this.addChild(this.spr),this.spr.x=this.width/2,this.spr.y=this.height/2,this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2;var n=this.isMore?1800:800;egret.Tween.get(this).to({scaleX:1,scaleY:1},200,egret.Ease.sineIn).wait(n).to({scaleX:0,scaleY:0},200,egret.Ease.sineOut).call(function(){t.parent.removeChild(t)})},e.prototype.createNumber=function(){var t=new egret.BitmapText;this.userid!=Data.myId?t.font=RES.getRes("bitmapNum_1_fnt"):t.font=RES.getRes("number_fnt"),t.textAlign=egret.HorizontalAlign.CENTER,t.text=this.bao,this.bmpText=t,this.spr.addChild(t),this.spr.width=this.bmpText.width,this.spr.height=this.bmpText.height},e}(eui.Group);__reflect(BaoJi.prototype,"BaoJi");var BaseModel=function(){function t(t){this._controller=t,this._controller.setModel(this)}return t}();__reflect(BaseModel.prototype,"BaseModel");var BgLoop=function(t){function e(){var e=t.call(this)||this;return e.skinName="BgSkin",e}return __extends(e,t),e}(eui.Component);__reflect(BgLoop.prototype,"BgLoop");var createImg=function(){function t(){}return t.createBitmapByName=function(t){var e=new egret.Bitmap,n=RES.getRes(t);return e.texture=n,e},t}();__reflect(createImg.prototype,"createImg");var BaseSpriteView=function(t){function e(e,n){var o=t.call(this)||this;return o._resources=null,o._controller=e,o._myParent=n,o._isInit=!1,App.StageUtils.getStage().addEventListener(egret.Event.RESIZE,o.onResize,o),o}return __extends(e,t),e.prototype.setResources=function(t){this._resources=t},Object.defineProperty(e.prototype,"myParent",{get:function(){return this._myParent},enumerable:!0,configurable:!0}),e.prototype.isInit=function(){return this._isInit},e.prototype.applyFunc=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this._controller.applyFunc.apply(this._controller,arguments)},e.prototype.applyControllerFunc=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return this._controller.applyControllerFunc.apply(this._controller,arguments)},e.prototype.isShow=function(){return null!=this.stage&&this.visible},e.prototype.addToParent=function(){this._myParent.addChild(this)},e.prototype.removeFromParent=function(){App.DisplayUtils.removeFromParent(this)},e.prototype.initUI=function(){this._isInit=!0},e.prototype.initData=function(){},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.destroy=function(){this._controller=null,this._myParent=null,this._resources=null},e.prototype.onResize=function(){},e.prototype.loadResource=function(t,e){this._resources&&this._resources.length>0?App.ResourceUtils.loadResource(this._resources,[],function(){t(),e()},null,this):(t(),e())},e.prototype.setVisible=function(t){this.visible=t},e}(egret.DisplayObjectContainer);__reflect(BaseSpriteView.prototype,"BaseSpriteView",["IBaseView"]);var DynamicChange=function(){function t(){this._dataCache=[],this._pUpdate=new ProxyUpdate(this._dataCache)}return Object.defineProperty(t.prototype,"pUpdate",{get:function(){return this._pUpdate},enumerable:!0,configurable:!0}),t.prototype.getCacheData=function(t){return this._dataCache[t]?this._dataCache[t]:null},t.prototype.clearCache=function(){for(var t=Object.keys(this._dataCache),e=0,n=t.length;n>e;e++){var o=t[e];this._dataCache[o]=null,delete this._dataCache[o]}},t.prototype.getCacheKeyInfos=function(){for(var t=[],e=Object.keys(this._dataCache),n=0,o=e.length;o>n;n++){var i=e[n],r=this._dataCache[i];t.push(r)}return t},t.prototype.isCache=function(t){return this._dataCache[t]},t}();__reflect(DynamicChange.prototype,"DynamicChange");var ProxyUpdate=function(){function t(t){this._cache=t}return t.prototype.isArray=function(t){return t instanceof Array},t.prototype.isObject=function(t){return t.indexOf("object")>-1},t.prototype.isNormal=function(t){var e=t.indexOf("@")>-1,n=t.indexOf(".")>-1,o=t.indexOf("_")>-1;return!e&&!n&&!o},t.prototype.isAddToArray=function(t){return"@a"==t},t.prototype.isRemoveToArray=function(t){var e=t.split("_");return e.length<=3&&"@d"==e[0]},t.prototype.isFilter=function(t){var e=t.split("_");
return"@f"==e[0]},t.prototype.isNumeric=function(t){return parseFloat(t).toString()==t.toString()},t.prototype._updateObject=function(t,e,n){var o=t.split(".");"@a"==o[0]||"@s"==o[0]?n[o[1]]=e:"@d"==o[0]&&delete n[o[1]]},t.prototype._getFilterObject=function(t,e){if(e){var n=t.split("_");if(3==n.length&&"@f"==n[0]&&this.isArray(e))for(var o=n[1],i=n[2],r=0;r<e.length;r++){var s=e[r];if(3==n.length&&this.isObject(s.toString())){var a=s[o];if(a&&("@"==i[0]&&(i=i.replace("@","")),i==a))return s}}}return null},t.prototype._addObjectToArray=function(t,e){if(this.isArray(e))for(var n=0;n<e.length;n++)t.push(e[n]);else t.push(e)},t.prototype._removeObjectFromArray=function(t,e,n){var o=e.split("_");if(o.length<=3&&"@d"==o[0]&&this.isArray(t))for(var i=t.length,r=i-1;r>=0;r--){var s=t[r];if(3==o.length){if(s.hasOwnProperty(o[1])){var a=o[2];"@"==a[0]&&(a=a.replace("@","")),a==s[o[1]]&&t.splice(r,1)}}else 2==o.length&&s.hasOwnProperty(o[1])?n==s[o[1]]&&t.splice(r,1):1==o.length&&n==s&&t.splice(r,1)}},t.prototype.update=function(t,e){if(this._cache[t]=e,e.hasOwnProperty("c"))for(var n=e.c,o=Object.keys(n),i=0,r=o.length;r>i;i++){var s=o[i];this._cache[s]&&(this._update(this._cache[s],n[s]),App.MessageCenter.dispatch(s+"_HttpUpdate"))}},t.prototype._update=function(t,e){if(t&&e&&this.isObject(e.toString()))for(var n=Object.keys(e),o=0,i=n.length;i>o;o++){var r=n[o],s=e[r];if(this.isNormal(r)&&this.isObject(s.toString()))t.hasOwnProperty(r)&&this._update(t[r],s);else if(this.isNormal(r)&&this.isNumeric(s)){var a=t[r];t[r]=a+s}else if(this.isNormal(r))t[r]=s;else if(this.isAddToArray(r))this._addObjectToArray(t,s);else if(this.isRemoveToArray(r))this._removeObjectFromArray(t,r,s);else if(this.isFilter(r)){var h=this._getFilterObject(r,t);h&&this._update(h,s)}else this._updateObject(r,s,t)}},t}();__reflect(ProxyUpdate.prototype,"ProxyUpdate");var Http=function(t){function e(){var e=t.call(this)||this;return e._data=new DynamicChange,e._cache=[],e._request=new egret.URLRequest,e._request.method=egret.URLRequestMethod.POST,e._urlLoader=new egret.URLLoader,e._urlLoader.addEventListener(egret.IOErrorEvent.IO_ERROR,e.onError,e),e}return __extends(e,t),e.prototype.initServer=function(t){this._serverUrl=t},Object.defineProperty(e.prototype,"Data",{get:function(){return this._data},enumerable:!0,configurable:!0}),e.prototype.onError=function(t){this.nextPost()},e.prototype.send=function(t,e){this._cache.push([t,e]),this.post()},e.prototype.post=function(){if(!this._isRequesting&&0!=this._cache.length){var t=this._cache.shift(),e=t[0],n=t[1];this._type=e,this._request.url=this._serverUrl,this._request.data=n,this._urlLoader.addEventListener(egret.Event.COMPLETE,this.onLoaderComplete,this),this._urlLoader.load(this._request),this._isRequesting=!0}},e.prototype.onLoaderComplete=function(t){this._urlLoader.removeEventListener(egret.Event.COMPLETE,this.onLoaderComplete,this);var e=JSON.parse(this._urlLoader.data);e.hasOwnProperty("s")&&0!=e.s?Log.trace("Http错误:"+e.s):(this._data.pUpdate.update(this._type,e),App.MessageCenter.dispatch(this._type,e)),this.nextPost()},e.prototype.nextPost=function(){this._isRequesting=!1,this.post()},e.get=function(t,e){if(e){var n=[];for(var o in e)n.push(o+"="+e[o]);t+="?"+n.join("&")}var i=new egret.HttpRequest;return i.responseType=egret.HttpResponseType.TEXT,i.open(t,egret.HttpMethod.GET),i.send(),i},e.prototype.onGetComplete=function(t){t.currentTarget},e}(BaseClass);__reflect(Http.prototype,"Http");var Data=function(){function t(){}return t.init_one=function(){t.DONAME="http://"+location.host+"/",t.HIS_LIST_URL=t.DONAME+"fish50/index/gethislist"},t.init=function(){t.allUser={},t.fishList={},t.zd={},t.dr=[],t.myId=0,t.socket=new Net,t.socket.on("init",function(e){t.db=e,t.myId=e.userid,t.allUser[e.userid]={sdkFishId:"",paotai:""},t.coinCount=t.db.coinCount,t._diamondsCount=t.db.diamondsCount,t.jskCount=t.db.jskCount,t.bdkCount=t.db.bdkCount,t.sdkCount=t.db.sdkCount,t.serverTime=e.serverTime,t.lostTime=(new Date).getTime()-t.serverTime,t.socket.emit("initUser")}),t.view=App.ViewManager.getView(ViewConst.Game)},Object.defineProperty(t,"sdkFishId",{get:function(){return t.myId?t.allUser[t.myId].sdkFishId:""},set:function(e){t.allUser[t.myId].sdkFishId=e},enumerable:!0,configurable:!0}),t.setStorage=function(e,n){t.db[e]=n,egret.localStorage.setItem("data",JSON.stringify(t.db))},Object.defineProperty(t,"coinCount",{get:function(){return t._coinCount},set:function(e){t._coinCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"diamondsCount",{get:function(){return t._diamondsCount},set:function(e){t._diamondsCount=e,t.view.setDiamonds(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"jskCount",{get:function(){return t.jskNum},set:function(e){t.jskNum=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"bdkCount",{get:function(){return t.bdkNum},set:function(e){t.bdkNum=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"sdkCount",{get:function(){return t.sdkNum},set:function(e){t.sdkNum=e},enumerable:!0,configurable:!0}),t.getSeverTime=function(){return(new Date).getTime()-t.lostTime},t.curWidth=function(){return egret.MainContext.instance.stage.stageWidth},t.curHeight=function(){return egret.MainContext.instance.stage.stageHeight},t.getBLen=function(t){return null==t?0:("string"!=typeof t&&(t+=""),t.replace(/[^\x00-\xff]/g,"01").length)},t.GetRandomNum=function(t,e){var n=e-t,o=Math.random();return t+Math.round(o*n)},t.KeyInObj=function(t,e){for(var n in t)if(e==n)return!0;return!1},t.fishList={},t.allUser={},t.db={coinCount:0,diamondsCount:0,jskCount:0,bdkCount:0,sdkCount:0},t.shootSpeed=240,t.zd={},t.dr=[],t._coinCount=2e3,t._diamondsCount=0,t.skillDiamonds=20,t.jskNum=0,t.bdkNum=0,t.sdkNum=0,t.fishOrder=["long","renyu","shayu","yinsha","11","10","9","8","7","6","5","4","3","2","1","0"],t.fishLockData={"long":{lock_x:308,lock_y:88},renyu:{lock_x:397,lock_y:100},shayu:{lock_x:228,lock_y:65},yinsha:{lock_x:180,lock_y:50},11:{lock_x:149,lock_y:65},10:{lock_x:100,lock_y:0},9:{lock_x:78,lock_y:47},8:{lock_x:78,lock_y:76},7:{lock_x:123,lock_y:88},6:{lock_x:57,lock_y:41},5:{lock_x:66,lock_y:31},4:{lock_x:57,lock_y:57},3:{lock_x:44,lock_y:29},2:{lock_x:42,lock_y:28},1:{lock_x:34,lock_y:22},0:{lock_x:36,lock_y:15}},t.DONAME="",t.HIS_LIST_URL=t.DONAME+"fish50/index/gethislist",t.betBase=50,t.betIndex=1,t.TextColors={white:16777215,milkWhite:16511407,grayWhite:13547170,yellow:16776960,lightYellow:16765813,orangeYellow:16750848,red:15799040,green:58624,blue:1742039,grayBlue:3101047,purple:15284466,pink:16724016,black:3026221,golden:16766720},t}();__reflect(Data.prototype,"Data");var ControllerConst;!function(t){t[t.Loading=1e4]="Loading",t[t.Home=10001]="Home",t[t.Game=10002]="Game",t[t.Farm=10003]="Farm"}(ControllerConst||(ControllerConst={}));var SceneConsts;!function(t){t[t.Home=1]="Home",t[t.Farm=2]="Farm",t[t.Game=3]="Game",t[t.LOADING=4]="LOADING",t[t.RpgGame=5]="RpgGame"}(SceneConsts||(SceneConsts={}));var SceneManager=function(t){function e(){var e=t.call(this)||this;return e._scenes={},e}return __extends(e,t),e.prototype.clear=function(){var t=this._scenes[this._currScene];t&&(t.onExit(),this._currScene=void 0),this._scenes={}},e.prototype.register=function(t,e){this._scenes[t]=e},e.prototype.runScene=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=this._scenes[t];if(null==o)return void Log.trace("场景"+t+"不存在");var i=this._scenes[this._currScene];i&&i.onExit(),o.onEnter.apply(o,e),this._currScene=t},e.prototype.getCurrScene=function(){return this._currScene},e}(BaseClass);__reflect(SceneManager.prototype,"SceneManager");var ViewConst;!function(t){t[t.Loading=1e4]="Loading",t[t.Home=10001]="Home",t[t.Game=10002]="Game",t[t.Farm=10003]="Farm",t[t.RpgGame=10004]="RpgGame"}(ViewConst||(ViewConst={}));var SoundBg=function(t){function e(){var e=t.call(this)||this;return e._currBg="",e}return __extends(e,t),e.prototype.stop=function(){this._currSoundChannel&&this._currSoundChannel.stop(),this._currSoundChannel=null,this._currSound=null,this._currBg=""},e.prototype.play=function(t){if(this._currBg!=t){this.stop(),this._currBg=t;var e=this.getSound(t);e&&this.playSound(e)}},e.prototype.playSound=function(t){this._currSound=t,this._currSoundChannel=this._currSound.play(0,0),this._currSoundChannel.volume=this._volume},e.prototype.setVolume=function(t){this._volume=t,this._currSoundChannel&&(this._currSoundChannel.volume=this._volume)},e.prototype.loadedPlay=function(t){this._currBg==t&&this.playSound(RES.getRes(t))},e.prototype.checkCanClear=function(t){return this._currBg!=t},e}(BaseSound);__reflect(SoundBg.prototype,"SoundBg");var SoundEffects=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.play=function(t){var e=this.getSound(t);e&&this.playSound(e)},e.prototype.playSound=function(t){var e=t.play(0,1);e.volume=this._volume},e.prototype.setVolume=function(t){this._volume=t},e.prototype.loadedPlay=function(t){this.playSound(RES.getRes(t))},e}(BaseSound);__reflect(SoundEffects.prototype,"SoundEffects");var SoundManager=function(t){function e(){var e=t.call(this)||this;return e.bgOn=!0,e.effectOn=!0,e.bgVolume=.5,e.effectVolume=.5,e.bg=new SoundBg,e.bg.setVolume(e.bgVolume),e.effect=new SoundEffects,e.effect.setVolume(e.effectVolume),e}return __extends(e,t),e.prototype.playEffect=function(t){this.effectOn&&this.effect.play(t)},e.prototype.playBg=function(t){this.currBg=t,this.bgOn&&this.bg.play(t)},e.prototype.stopBg=function(){this.bg.stop()},e.prototype.setEffectOn=function(t){this.effectOn=t},e.prototype.setBgOn=function(t){this.bgOn=t,this.bgOn?this.currBg&&this.playBg(this.currBg):this.stopBg()},e.prototype.setBgVolume=function(t){t=Math.min(t,1),t=Math.max(t,0),this.bgVolume=t,this.bg.setVolume(this.bgVolume)},e.prototype.getBgVolume=function(){return this.bgVolume},e.prototype.setEffectVolume=function(t){t=Math.min(t,1),t=Math.max(t,0),this.effectVolume=t,this.effect.setVolume(this.effectVolume)},e.prototype.getEffectVolume=function(){return this.effectVolume},e.CLEAR_TIME=18e4,e}(BaseClass);__reflect(SoundManager.prototype,"SoundManager");var AllAsyncExecutor=function(){function t(){this._functions=new Array,this._complateNum=0}return t.prototype.setCallBack=function(t,e){this._callBack=t,this._callBackTarget=e},t.prototype.regist=function(t,e){this._functions.push([t,e])},t.prototype.start=function(){App.ArrayUtils.forEach(this._functions,function(t){t[0].call(t[1])},this)},t.prototype.complate=function(){this._functions&&(this._complateNum++,this._complateNum==this._functions.length&&(this._callBack&&this._callBack.call(this._callBackTarget),this._callBack=null,this._callBackTarget=null,this._functions=null))},t}();__reflect(AllAsyncExecutor.prototype,"AllAsyncExecutor");var AnchorUtil=function(){function t(){}return t.init=function(){t._propertyChange=Object.create(null),t._anchorChange=Object.create(null),t.injectAnchor()},t.setAnchorX=function(t,e){t.anchorX=e},t.setAnchorY=function(t,e){t.anchorY=e},t.setAnchor=function(t,e){t.anchorX=t.anchorY=e},t.getAnchor=function(t){return t.anchorX!=t.anchorY&&console.log("target's anchorX != anchorY"),t.anchorX||0},t.getAnchorY=function(t){return t.anchorY||0},t.getAnchorX=function(t){return t.anchorX||0},t.injectAnchor=function(){Object.defineProperty(egret.DisplayObject.prototype,"width",{get:function(){return this.$getWidth()},set:function(e){var n=this;this.$setWidth(e),t._propertyChange[this.hashCode]=!0,egret.callLater(function(){t.changeAnchor(n)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(egret.DisplayObject.prototype,"height",{get:function(){return this.$getHeight()},set:function(e){var n=this;this.$setHeight(e),t._propertyChange[this.hashCode]=!0,egret.callLater(function(){t.changeAnchor(n)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(egret.DisplayObject.prototype,"anchorX",{get:function(){return this._anchorX},set:function(e){var n=this;this._anchorX=e,t._propertyChange[this.hashCode]=!0,t._anchorChange[this.hashCode]=!0,egret.callLater(function(){t.changeAnchor(n)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(egret.DisplayObject.prototype,"anchorY",{get:function(){return this._anchorY},set:function(e){var n=this;this._anchorY=e,t._propertyChange[this.hashCode]=!0,t._anchorChange[this.hashCode]=!0,egret.callLater(function(){t.changeAnchor(n)},this)},enumerable:!0,configurable:!0})},t.changeAnchor=function(e){t._propertyChange[e.hashCode]&&t._anchorChange[e.hashCode]&&(e.anchorOffsetX=e._anchorX*e.width,e.anchorOffsetY=e._anchorY*e.height,delete t._propertyChange[e.hashCode])},t}();__reflect(AnchorUtil.prototype,"AnchorUtil");var ArrayUtils=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.forEach=function(t,e,n){for(var o=0,i=t.length;i>o;o++)e.apply(n,[t[o]])},e}(BaseClass);__reflect(ArrayUtils.prototype,"ArrayUtils");var AverageUtils=function(){function t(t){void 0===t&&(t=10),this.nums=[],this.numsLen=0,this.numSum=0,this.maxNum=t}return t.prototype.push=function(t){this.numsLen>this.maxNum&&(this.numsLen--,this.numSum-=this.nums.shift()),this.nums.push(t),this.numSum+=t,this.numsLen++},t.prototype.getValue=function(){return this.numSum/this.numsLen},t.prototype.clear=function(){this.nums.splice(0),this.numsLen=0,this.numSum=0},t}();__reflect(AverageUtils.prototype,"AverageUtils");var CommonUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.addLableStrokeColor=function(t,e,n){t.strokeColor=e,t.stroke=n},e.copyDataHandler=function(t){var e;if(t instanceof Array)e=[];else{if(!(t instanceof Object))return t;e={}}for(var n=Object.keys(t),o=0,i=n.length;i>o;o++){var r=n[o];e[r]=this.copyDataHandler(t[r])}return e},e.lock=function(){App.StageUtils.getStage().touchEnabled=App.StageUtils.getStage().touchChildren=!1},e.unlock=function(){App.StageUtils.getStage().touchEnabled=App.StageUtils.getStage().touchChildren=!0},e.int64ToNumber=function(t){return parseInt(t.toString())},e.labelIsOverLenght=function(t,e){var n=null;n=1e5>e?e:1e6>e?Math.floor(e/1e3/10).toString()+"万":Math.floor(e/1e4).toString()+"万",t.text=n},e}(BaseClass);__reflect(CommonUtils.prototype,"CommonUtils");var DateUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getFormatBySecond=function(t,e){void 0===e&&(e=1);var n="";switch(e){case 1:n=this.getFormatBySecond1(t);break;case 2:n=this.getFormatBySecond2(t);break;case 3:n=this.getFormatBySecond3(t);break;case 4:n=this.getFormatBySecond4(t);break;case 5:n=this.getFormatBySecond5(t)}return n},e.prototype.getFormatBySecond1=function(t){void 0===t&&(t=0);var e,n=Math.floor(t/3600);e=0==n?"00":10>n?"0"+n:""+n;var o,i,r=Math.floor((t-3600*n)/60),s=Math.floor((t-3600*n)%60);return o=0==r?"00":10>r?"0"+r:""+r,i=0==s?"00":10>s?"0"+s:""+s,e+":"+o+":"+i},e.prototype.getFormatBySecond3=function(t){void 0===t&&(t=0);var e,n,o=Math.floor(t/3600),i=Math.floor((t-3600*o)/60),r=Math.floor((t-3600*o)%60);return e=0==i?"00":10>i?"0"+i:""+i,n=0==r?"00":10>r?"0"+r:""+r,e+":"+n},e.prototype.getFormatBySecond2=function(t){var e=new Date(t),n=e.getFullYear(),o=e.getMonth()+1,i=e.getDate(),r=e.getHours(),s=e.getMinutes(),a=e.getSeconds();return n+"-"+o+"-"+i+" "+r+":"+s+":"+a},e.prototype.getFormatBySecond4=function(t){var e=Math.floor(t/3600);return e>0?e>24?Math.floor(e/24)+"天前":e+"小时前":Math.floor(t/60)+"分钟前"},e.prototype.getFormatBySecond5=function(t){var e=86400,n=3600,o=60,i=Math.floor(t/e),r=Math.floor(t%e/n),s=Math.floor((t-r*n)/o),a=Math.floor((t-r*n)%o),h="",c="",l="",u="";return t>0?0==i?(h="",0==r?(c="",0==s?(l="",u=0==a?"":10>a?"0"+a+"秒":""+a+"秒"):(l=""+s+"分",u=0==a?"":10>a?"0"+a+"秒":""+a+"秒",l+u)):(c=r+"小时",0==s?(l="",u=0==a?"":10>a?"0"+a+"秒":""+a+"秒"):(l=10>s?"0"+s+"分":""+s+"分",c+l))):(h=i+"天",c=0==r?"":10>r?"0"+r+"小时":""+r+"小时",h+c):""},e}(BaseClass);__reflect(DateUtils.prototype,"DateUtils");var DebugUtils=function(t){function e(){var e=t.call(this)||this;return e._threshold=3,e._startTimes={},e}return __extends(e,t),e.prototype.isOpen=function(t){this._isOpen=t},Object.defineProperty(e.prototype,"isDebug",{get:function(){return this._isOpen},enumerable:!0,configurable:!0}),e.prototype.start=function(t){this._isOpen&&(this._startTimes[t]=egret.getTimer())},e.prototype.stop=function(t){if(!this._isOpen)return 0;if(!this._startTimes[t])return 0;var e=egret.getTimer()-this._startTimes[t];return e>this._threshold&&Log.trace(t+": "+e),e},e.prototype.setThreshold=function(t){this._threshold=t},e}(BaseClass);__reflect(DebugUtils.prototype,"DebugUtils");var DelayOptManager=function(t){function e(){var e=t.call(this)||this;return e.TIME_THRESHOLD=2,e._delayOpts=[],App.TimerManager.doFrame(1,0,e.runCachedFun,e),e}return __extends(e,t),e.prototype.addDelayOptFunction=function(t,e,n,o,i){this._delayOpts.push({fun:e,funPara:n,thisObj:t,callBack:o,para:i})},e.prototype.clear=function(){this._delayOpts.length=0},e.prototype.stop=function(){App.TimerManager.remove(this.runCachedFun,this)},e.prototype.runCachedFun=function(t){if(0!=this._delayOpts.length)for(var e,n=egret.getTimer();this._delayOpts.length&&(e=this._delayOpts.shift(),e.funPara?e.fun.call(e.thisObj,e.funPara):e.fun.call(e.thisObj),e.callBack&&(void 0!=e.para?e.callBack.call(e.thisObj,e.para):e.callBack()),!(egret.getTimer()-n>this.TIME_THRESHOLD)););},e}(BaseClass);__reflect(DelayOptManager.prototype,"DelayOptManager");var DeviceUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"IsHtml5",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.WEB},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsNative",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsMobile",{get:function(){return egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsPC",{get:function(){return!egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsQQBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("MQQBrowser")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsIEBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("MSIE")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsFirefoxBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Firefox")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsChromeBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Chrome")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsSafariBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Safari")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsOperaBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Opera")},enumerable:!0,configurable:!0}),e}(BaseClass);__reflect(DeviceUtils.prototype,"DeviceUtils");var DisplayUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createBitmap=function(t){var e=new egret.Bitmap,n=RES.getRes(t);return e.texture=n,e},e.prototype.createEuiImage=function(t){var e=new eui.Image,n=RES.getRes(t);return e.source=n,e},e.prototype.removeFromParent=function(t){null!=t.parent&&t.parent.removeChild(t)},e}(BaseClass);__reflect(DisplayUtils.prototype,"DisplayUtils");var EffectUtils;!function(t){function e(t,e){if(void 0===e&&(e=1e3),null==this.rotationArr&&(this.rotationArr=[]),!this.rotationArr[t.hashCode]){null!=this.rotationArr[t.hashCode]&&this.rotationArr[t.hashCode]||(this.rotationArr[t.hashCode]=!0);var n=function(){this.rotationArr[t.hashCode]&&null!=t&&(t.rotation=0,egret.Tween.get(t).to({rotation:360},e).call(n,this))};t.rotation=0,egret.Tween.get(t).to({rotation:360},e).call(n,this)}}function n(t){null==this.rotationArr&&(this.rotationArr=[]),this.rotationArr[t.hashCode]=!1}function o(t){var e=80,n=t.x;egret.Tween.get(t).to({x:t.x-10},e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20},e)},this,2*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x-20},e)},this,3*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20},e)},this,4*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:n},e)},this,5*e)}function i(t,e){if(void 0===e&&(e=1),!this.isPlayEffectPlay){t.anchorOffsetX=.5*t.width,t.anchorOffsetX=.5*t.width,this.isPlayEffectPlay=!0;var n=function(){this.isPlayEffectPlay=!1},o=function(){1==e?egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},500,egret.Ease.elasticOut).call(n,this):2==e?egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},500,egret.Ease.backOut).call(n,this):3==e&&egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},100).call(n,this)};egret.Tween.get(t).to({scaleX:.9,scaleY:.9,x:t.x+t.width/4,y:t.y+t.height/4},100,egret.Ease.sineIn).call(o,this)}}function r(t){var e=function(){if(null!=t){var n=function(){t.scaleX=1,t.scaleY=1,egret.Tween.get(t).to({alpha:1},1e3).call(e,self)};t.alpha=1,egret.Tween.get(t).to({scaleX:1.5,scaleY:1.5,alpha:0},1e3).call(n,self)}};e()}function s(t,e,n){void 0===n&&(n=50);var o=function(){if(null!=t){var i=function(){egret.Tween.get(t).to({y:t.y-n},e).call(o,this)};egret.Tween.get(t).to({y:t.y+n},e).call(i,this)}};o()}function a(t,e,n){void 0===n&&(n=20);var o=function(){if(null!=t){var i=function(){egret.Tween.get(t).to({rotation:-n},e).call(o,this)};egret.Tween.get(t).to({rotation:n},e).call(i,this)}};o()}function h(t,e,n){void 0===e&&(e=""),void 0===n&&(n=200);for(var o=e.split(""),i=o.length,r=0;i>r;r++)egret.setTimeout(function(){t.appendText(o[Number(this)])},r,n*r)}function c(t,e){for(var n=[[20,300],[15,300],[10,300],[5,300]],o="egret.Tween.get("+t+")",i=0,r=n.length;r>i;i++)o+=".to({'y':"+e+"-"+n[i][0]+"}, "+n[i][1]+")",o+=".to({'y':"+e+"}, "+n[i][1]+")";return o+=";"}function l(t,e){t.alpha=1,egret.Tween.get(t).to({alpha:0},e).to({alpha:1},e).call(this.startFlicker,this,[t,e])}function u(t){egret.Tween.removeTweens(t)}t.rotationEffect=e,t.removeRotationEffect=n,t.shakeObj=o;t.playEffect=i,t.playScaleEffect=r,t.flyObj=s,t.rockObj=a,t.typerEffect=h,t.macIconShake=c,t.startFlicker=l,t.stopFlicker=u}(EffectUtils||(EffectUtils={}));var EgretExpandUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){AnchorUtil.init()},e}(BaseClass);__reflect(EgretExpandUtils.prototype,"EgretExpandUtils");var FrameDelay=function(){function t(){}return t.prototype.delayCall=function(t,e,n){this.func=e,this.thisObj=n,egret.callLater(function(){App.TimerManager.doFrame(t,1,this.listener_enterFrame,this)},this)},t.prototype.listener_enterFrame=function(){this.func.call(this.thisObj)},t}();__reflect(FrameDelay.prototype,"FrameDelay");var FrameExecutor=function(){function t(t){this.delayFrame=t,this.frameDelay=new FrameDelay,this.functions=new Array}return t.prototype.regist=function(t,e){this.functions.push([t,e])},t.prototype.execute=function(){if(this.functions.length){var t=this.functions.shift();t[0].call(t[1]),this.frameDelay.delayCall(this.delayFrame,this.execute,this)}},t}();__reflect(FrameExecutor.prototype,"FrameExecutor");var Log=function(){function t(){}return t.trace=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];App.DebugUtils.isDebug&&(t[0]="[DebugLog]"+t[0],console.log.apply(console,t))},t}();__reflect(Log.prototype,"Log");var MathUtils=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getAngle=function(t){return 180*t/Math.PI},e.prototype.getRadian=function(t){return t/180*Math.PI},e.prototype.getRadian2=function(t,e,n,o){var i=n-t,r=o-e;return Math.atan2(r,i)},e.prototype.getDistance=function(t,e,n,o){var i=n-t,r=o-e,s=i*i+r*r;return Math.sqrt(s)},e}(BaseClass);__reflect(MathUtils.prototype,"MathUtils");var MessageCenter=function(t){function e(e){var n=t.call(this)||this;return n.type=e,n.dict={},n.eVec=new Array,n.lastRunTime=0,0==n.type&&App.TimerManager.doFrame(1,0,n.run,n),n}return __extends(e,t),e.prototype.clear=function(){this.dict={},this.eVec.splice(0)},e.prototype.addListener=function(t,e,n){var o=this.dict[t];null==o&&(o=new Array,this.dict[t]=o);var i=0,r=o.length;for(i;r>i;i++)if(o[i][0]==e&&o[i][1]==n)return;o.push([e,n])},e.prototype.removeListener=function(t,e,n){var o=this.dict[t];if(null!=o){var i=0,r=o.length;for(i;r>i;i++)if(o[i][0]==e&&o[i][1]==n){o.splice(i,1);break}0==o.length&&(this.dict[t]=null,delete this.dict[t])}},e.prototype.removeAll=function(t){for(var e=Object.keys(this.dict),n=0,o=e.length;o>n;n++){for(var i=e[n],r=this.dict[i],s=0;s<r.length;s++)r[s][1]==t&&(r.splice(s,1),s--);0==r.length&&(this.dict[i]=null,delete this.dict[i])}},e.prototype.dispatch=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(null!=this.dict[t]){var o=ObjectPool.pop("MessageVo");o.type=t,o.param=e,0==this.type?this.eVec.push(o):1==this.type?this.dealMsg(o):Log.trace("MessageCenter未实现的类型")}},e.prototype.run=function(){var t=egret.getTimer(),e=t-this.lastRunTime>100;if(this.lastRunTime=t,e)for(;this.eVec.length>0;)this.dealMsg(this.eVec.shift());else for(;this.eVec.length>0&&(this.dealMsg(this.eVec.shift()),!(egret.getTimer()-t>5)););},e.prototype.dealMsg=function(t){for(var e=this.dict[t.type],n=0,o=e.length,i=null;o>n;)i=e[n],i[0].apply(i[1],t.param),e.length!=o&&(o=e.length,n--),n++;t.dispose(),ObjectPool.push(t)},e}(BaseClass);__reflect(MessageCenter.prototype,"MessageCenter");var MessageVo=function(){function t(){}return t.prototype.dispose=function(){this.type=null,this.param=null},t}();__reflect(MessageVo.prototype,"MessageVo");var ObjectPool=function(){function t(){this._objs=new Array}return t.prototype.pushObj=function(t){this._objs.push(t)},t.prototype.popObj=function(){return this._objs.length>0?this._objs.pop():null},t.prototype.clear=function(){for(;this._objs.length>0;)this._objs.pop()},t.pop=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];t._content[e]||(t._content[e]=[]);var i=t._content[e];if(i.length)return i.pop();var r,s=egret.getDefinitionByName(e),a=n.length;return 0==a?r=new s:1==a?r=new s(n[0]):2==a?r=new s(n[0],n[1]):3==a?r=new s(n[0],n[1],n[2]):4==a?r=new s(n[0],n[1],n[2],n[3]):5==a&&(r=new s(n[0],n[1],n[2],n[3],n[4])),r.ObjectPoolKey=e,r},t.popWithExtraKey=function(e,n){t._content[e]||(t._content[e]=[]);var o,i=t._content[e];if(i.length)for(var r=0;r<i.length;r++)if(i[r].extraKey==n){o=i[r],i.splice(r,1);break}if(!o){var s=egret.getDefinitionByName(e);o=new s(n),o.extraKey=n,o.ObjectPoolKey=e}return o},t.push=function(e){if(null==e)return!1;var n=e.ObjectPoolKey;return t._content[n]?(t._content[n].push(e),!0):!1},t.clear=function(){t._content={}},t.clearClass=function(e,n){void 0===n&&(n=null);for(var o=t._content[e];o&&o.length;){var i=o.pop();n&&i[n](),i=null}t._content[e]=null,delete t._content[e]},t.dealFunc=function(e,n){var o=t._content[e];if(null!=o){var i=0,r=o.length;for(i;r>i;i++)o[i][n]()}},t._content={},t}();__reflect(ObjectPool.prototype,"ObjectPool");var Percent=function(){function t(t,e){this.currentValue=t,this.totalValue=e}return t.prototype.computePercent=function(){return this.currentValue/this.totalValue*100},t.prototype.computeRate=function(){return this.currentValue/this.totalValue},t.prototype.reverse=function(){return this.currentValue=this.totalValue-this.currentValue,this},t.prototype.copy=function(){return new t(this.currentValue,this.totalValue)},t.prototype.computePercentReverse=function(){return(this.totalValue-this.currentValue)/this.totalValue*100},t.prototype.computeRateReverse=function(){return(this.totalValue-this.currentValue)/this.totalValue},t}();__reflect(Percent.prototype,"Percent");var playAnimation=function(){function t(){}return t.play=function(t,e){if(e)for(var n in t.items)t.items[n].props={loop:!0};t.play()},t}();__reflect(playAnimation.prototype,"playAnimation");var QueueExecutor=function(){function t(){this._functions=new Array}return t.prototype.setCallBack=function(t,e){this._callBack=t,this._callBackTarget=e},t.prototype.regist=function(t,e){this._functions.push([t,e])},t.prototype.start=function(){this.next()},t.prototype.next=function(){if(this._functions)if(0==this._functions.length)this._callBack&&this._callBack.call(this._callBackTarget),this._callBack=null,this._callBackTarget=null,this._functions=null;else{var t=this._functions.shift();t[0].call(t[1])}},t}();__reflect(QueueExecutor.prototype,"QueueExecutor");var RandomUtils=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.limit=function(t,e){t=Math.min(t,e),e=Math.max(t,e);var n=e-t;return t+Math.random()*n},e.prototype.limitInteger=function(t,e){return Math.round(this.limit(t,e))},e.prototype.randomArray=function(t){var e=Math.floor(Math.random()*t.length);return t[e]},e}(BaseClass);__reflect(RandomUtils.prototype,"RandomUtils");var RenderTextureManager=function(t){function e(){var e=t.call(this)||this;return e._pool=[],e._useNum=0,e.isLowerQQBrowser()?e._maxNum=18:e._maxNum=-1,e}return __extends(e,t),e.prototype.isLowerQQBrowser=function(){if(App.DeviceUtils.IsQQBrowser){for(var t=["2013022","Lenovo A630t","SM-G3818","vivo X3t","GT-I9100"],e=!1,n=0,o=t.length;o>n;n++)if(-1!=navigator.userAgent.indexOf(t[n])){e=!0;break}return e}return!1},e.prototype.pop=function(){var t=this._pool.pop();return t||(-1==this._maxNum||this._useNum<this._maxNum)&&(t=new egret.RenderTexture,this._useNum++),t},e.prototype.push=function(t){for(var e=!1,n=0,o=this._pool.length;o>n;n++)if(this._pool[n]==t){e=!0;break}e||this._pool.push(t)},e}(BaseClass);__reflect(RenderTextureManager.prototype,"RenderTextureManager");var ResourceUtils=function(t){function e(){var e=t.call(this)||this;return e._groupIndex=0,e._configs=new Array,e._groups={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,e.onResourceLoadComplete,e),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,e.onResourceLoadProgress,e),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,e.onResourceLoadError,e),e}return __extends(e,t),e.prototype.addConfig=function(t,e){this._configs.push([t,e])},e.prototype.loadConfig=function(t,e){this._onConfigComplete=t,this._onConfigCompleteTarget=e,this.loadNextConfig()},e.prototype.loadNextConfig=function(){if(0==this._configs.length)return this._onConfigComplete.call(this._onConfigCompleteTarget),this._onConfigComplete=null,void(this._onConfigCompleteTarget=null);var t=this._configs.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(t[0],t[1])},e.prototype.onConfigCompleteHandle=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()},e.prototype.loadGroup=function(t,e,n,o){this._groups[t]=[e,n,o],RES.loadGroup(t)},e.prototype.loadGroups=function(t,e,n,o,i){RES.createGroup(t,e,!0),this.loadGroup(t,n,o,i)},e.prototype.pilfererLoadGroup=function(t,e){void 0===e&&(e=null);var n="pilferer_"+t;e||(e=[t]),RES.createGroup(n,e,!0),RES.loadGroup(n,-1)},e.prototype.onResourceLoadComplete=function(t){var e=t.groupName;if(this._groups[e]){var n=this._groups[e][0],o=this._groups[e][2];null!=n&&n.apply(o,[e]),this._groups[e]=null,delete this._groups[e]}},e.prototype.onResourceLoadProgress=function(t){var e=t.groupName;if(this._groups[e]){var n=this._groups[e][1],o=this._groups[e][2];null!=n&&n.call(o,t.itemsLoaded,t.itemsTotal)}},e.prototype.onResourceLoadError=function(t){Log.trace(t.groupName+"资源组有资源加载失败"),this.onResourceLoadComplete(t)},e.prototype.loadResource=function(t,e,n,o,i){void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===n&&(n=null),void 0===o&&(o=null),void 0===i&&(i=null);var r=t.concat(e),s="loadGroup"+this._groupIndex++;RES.createGroup(s,r,!0),this._groups[s]=[n,o,i],RES.loadGroup(s)
},e.prototype.createGroup=function(t,e){RES.createGroup(t,e,!0)},e.prototype.createResource=function(t,e,n){var o={name:t,type:e,url:n};RES.parseConfig({resources:[o]})},e}(BaseClass);__reflect(ResourceUtils.prototype,"ResourceUtils");var ResVersionManager=function(t){function e(){var e=t.call(this)||this;return e.res_loadByVersion(),e}return __extends(e,t),e.prototype.res_loadByVersion=function(){RES.web.Html5VersionController.prototype.getVirtualUrl=function(t){var n="",o=e.resVersionData,i=t.substring(9);return o&&o[i]&&(n=o[i]),0==n.length&&(n=Math.random()+""),t+=-1==t.indexOf("?")?"?v="+n:"&v="+n}},e.prototype.loadConfig=function(t,e,n){this.complateFunc=e,this.complateFuncTarget=n,RES.getResByUrl(t,this.loadResVersionComplate,this)},e.prototype.loadResVersionComplate=function(t){e.resVersionData=t,this.complateFunc.call(this.complateFuncTarget)},e}(BaseClass);__reflect(ResVersionManager.prototype,"ResVersionManager");var ShockUtils=function(t){function e(){var e=t.call(this)||this;return e.MAP=0,e.SPRITE=1,e.mapPoss=[new egret.Point(0,3),new egret.Point(0,0),new egret.Point(0,-2)],e.spritePoss=[new egret.Point(5,0),new egret.Point(-5,0),new egret.Point(5,0)],e._shockLength=0,e._shockCount=0,e._rx=0,e._ry=0,e._type=0,e._repeatCount=0,e}return __extends(e,t),e.prototype.destroy=function(){this.stop()},e.prototype.shock=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=null),void 0===n&&(n=3),this._target||(this._type=t,this._target=e,this._type==this.MAP?(this._shockPoss=this.mapPoss.concat(),this._shockLength=this._shockPoss.length):this._type==this.SPRITE&&(this._shockPoss=this.spritePoss.concat(),this._shockLength=this._shockPoss.length),this.start(n))},e.prototype.start=function(t){void 0===t&&(t=1),this.repeatCount=t,this._shockCount=0,this._target&&(this._type!=this.MAP&&(this._rx=this._target.x),this._ry=this._target.y,App.TimerManager.doFrame(1,0,this.onShockEnter,this))},e.prototype.stop=function(){this._target&&(this._type!=this.MAP&&(this._target.x=this._rx),this._target.y=this._ry,App.TimerManager.remove(this.onShockEnter,this)),this._target=null},e.prototype.onShockEnter=function(t){var e=this._shockLength*this._repeatCount;if(this._shockCount>=e)return void this.stop();var n=this._shockCount%this._shockLength,o=this._shockPoss[n];this._target&&(this._type!=this.MAP&&(this._target.x=this._rx+o.x),this._target.y=this._ry+o.y),this._shockCount++},Object.defineProperty(e.prototype,"repeatCount",{get:function(){return this._repeatCount},set:function(t){this._repeatCount=t},enumerable:!0,configurable:!0}),e}(BaseClass);__reflect(ShockUtils.prototype,"ShockUtils");var StageUtils=function(t){function e(){var n=t.call(this)||this;return null==e._uiStage&&(e._uiStage=new eui.UILayer,e._uiStage.percentHeight=100,e._uiStage.percentWidth=100,e._uiStage.touchEnabled=!1,n.getStage().addChild(e._uiStage)),n}return __extends(e,t),e.prototype.getHeight=function(){return this.getStage().stageHeight},e.prototype.getWidth=function(){return this.getStage().stageWidth},e.prototype.setTouchChildren=function(t){this.getStage().touchChildren=t},e.prototype.setMaxTouches=function(t){this.getStage().maxTouches=t},e.prototype.setFrameRate=function(t){this.getStage().frameRate=t},e.prototype.setScaleMode=function(t){this.getStage().scaleMode=t},e.prototype.getStage=function(){return egret.MainContext.instance.stage},e.prototype.getUIStage=function(){return e._uiStage},e.prototype.startFullscreenAdaptation=function(t,e,n){this.designWidth=t,this.designHeight=e,this.resizeCallback=n,this.stageOnResize()},e.prototype.stageOnResize=function(){this.getStage().removeEventListener(egret.Event.RESIZE,this.stageOnResize,this);var t=this.designWidth,e=this.designHeight,n=window.innerWidth,o=window.innerHeight,i=n/o,r=t/e,s=i/r;if(i>r){var a=s,h=s;t=Math.floor(t*a),e=Math.floor(e*h)}this.getStage().setContentSize(t,e),this.resizeCallback&&this.resizeCallback(),this.getStage().addEventListener(egret.Event.RESIZE,this.stageOnResize,this)},e}(BaseClass);__reflect(StageUtils.prototype,"StageUtils");var StringBuffer=function(){function t(){this._strings=new Array}return t.prototype.append=function(t){this._strings.push(t)},t.prototype.toString=function(){return this._strings.join("")},t.prototype.clear=function(){this._strings.length=0},t}();__reflect(StringBuffer.prototype,"StringBuffer");var StringUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.trimSpace=function(t){return t.replace(/^\s*(.*?)[\s\n]*$/g,"$1")},e.prototype.getStringLength=function(t){for(var e=t.split(""),n=0,o=0;o<e.length;o++){var i=e[o];n+=this.isChinese(i)?2:1}return n},e.prototype.isChinese=function(t){var e=/^.*[\u4E00-\u9FA5]+.*$/;return e.test(t)},e}(BaseClass);__reflect(StringUtils.prototype,"StringUtils");var TextFlowMaker=function(t){function e(){var e=t.call(this)||this;return e.STYLE_COLOR="C",e.STYLE_SIZE="S",e.PROP_TEXT="T",e}return __extends(e,t),e.prototype.generateTextFlow=function(t){for(var e=t.split("|"),n=[],o=0,i=e.length;i>o;o++)n.push(this.getSingleTextFlow(e[o]));return n},e.prototype.getSingleTextFlow=function(t){for(var e,n=t.split("&"),o={style:{}},i=0,r=n.length;r>i;i++)e=n[i].split(":"),e[0]==this.PROP_TEXT?o.text=e[1]:e[0]==this.STYLE_SIZE?o.style.size=parseInt(e[1]):e[0]==this.STYLE_COLOR?o.style.textColor=parseInt(e[1]):o.text=e[0];return o},e}(BaseClass);__reflect(TextFlowMaker.prototype,"TextFlowMaker");var TimerManager=function(t){function e(){var e=t.call(this)||this;return e._handlers=new Array,e._delHandlers=new Array,e._currTime=egret.getTimer(),e._currFrame=0,e._count=0,e._timeScale=1,egret.Ticker.getInstance().register(e.onEnterFrame,e),e}return __extends(e,t),e.prototype.setTimeScale=function(t){this._timeScale=t},e.prototype.onEnterFrame=function(){this._currFrame++,this._currTime=egret.getTimer(),App.DebugUtils.start("TimerManager:");for(var t=0;t<this._count;t++){var e=this._handlers[t],n=e.userFrame?this._currFrame:this._currTime;n>=e.exeTime&&(App.DebugUtils.start(e.method.toString()),e.method.call(e.methodObj,(this._currTime-e.dealTime)*this._timeScale),App.DebugUtils.stop(e.method.toString()),e.dealTime=this._currTime,e.exeTime+=e.delay,e.repeat||(e.repeatCount>1?e.repeatCount--:(e.complateMethod&&e.complateMethod.apply(e.complateMethodObj),this._delHandlers.push(e))))}for(;this._delHandlers.length;){var e=this._delHandlers.pop();this.remove(e.method,e.methodObj)}App.DebugUtils.stop("TimerManager:")},e.prototype.create=function(t,e,n,o,i,r,s){if(!(0>e||0>n||null==o)){this.remove(o,i);var a=ObjectPool.pop("TimerHandler");a.userFrame=t,a.repeat=0==n,a.repeatCount=n,a.delay=e,a.method=o,a.methodObj=i,a.complateMethod=r,a.complateMethodObj=s,a.exeTime=e+(t?this._currFrame:this._currTime),a.dealTime=this._currTime,this._handlers.push(a),this._count++}},e.prototype.doTimer=function(t,e,n,o,i,r){void 0===i&&(i=null),void 0===r&&(r=null),this.create(!1,t,e,n,o,i,r)},e.prototype.doFrame=function(t,e,n,o,i,r){void 0===i&&(i=null),void 0===r&&(r=null),this.create(!0,t,e,n,o,i,r)},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.remove=function(t,e){for(var n=0;n<this._count;n++){var o=this._handlers[n];if(o.method==t&&o.methodObj==e){this._handlers.splice(n,1),ObjectPool.push(o),this._count--;break}}},e.prototype.removeAll=function(t){for(var e=0;e<this._count;e++){var n=this._handlers[e];n.methodObj==t&&(this._handlers.splice(e,1),ObjectPool.push(n),this._count--,e--)}},e.prototype.isExists=function(t,e){for(var n=0;n<this._count;n++){var o=this._handlers[n];if(o.method==t&&o.methodObj==e)return!0}return!1},e}(BaseClass);__reflect(TimerManager.prototype,"TimerManager");var TimerHandler=function(){function t(){this.delay=0,this.repeatCount=0,this.exeTime=0,this.dealTime=0}return t.prototype.clear=function(){this.method=null,this.methodObj=null,this.complateMethod=null,this.complateMethodObj=null},t}();__reflect(TimerHandler.prototype,"TimerHandler");var TipsUtils;!function(t){function e(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);var n=new egret.TextField;n.size=24,n.y=Data.curHeight()/2,e?n.textColor=Data.TextColors.red:n.textColor=Data.TextColors.green,n.alpha=0,n.text=t,n.strokeColor=0,n.x=Data.curWidth()/2-n.width/2,n.stroke=2,n.bold=!0,n.textAlign=egret.HorizontalAlign.CENTER,LayerManager.UI_Tips.contains(n)||LayerManager.UI_Tips.addChild(n);var o=function(){LayerManager.UI_Tips.contains(n)&&(LayerManager.UI_Tips.removeChild(n),n=null)},i=function(){egret.Tween.get(n).to({alpha:0},500).call(o,this)};n.visible=!0,egret.Tween.get(n).to({y:n.y-120,alpha:1},800,egret.Ease.backOut).call(i,this)}function n(t,e,n){void 0===t&&(t=""),void 0===e&&(e=!1),void 0===n&&(n=!0);var o=new egret.TextField;o.size=24,o.y=Data.curHeight()/2,e?o.textColor=Data.TextColors.red:o.textColor=Data.TextColors.green,o.alpha=0,o.text=t,o.strokeColor=0,n?o.x=-o.width:o.x=Data.curWidth(),o.stroke=2,o.bold=!0,o.textAlign=egret.HorizontalAlign.CENTER,LayerManager.UI_Tips.contains(o)||LayerManager.UI_Tips.addChild(o),n?egret.Tween.get(o).to({x:Data.curWidth()/2-o.width/2-50,alpha:1},300,egret.Ease.sineInOut):egret.Tween.get(o).to({x:Data.curWidth()/2-o.width/2+50,alpha:1},300,egret.Ease.sineInOut),egret.setTimeout(function(){n?egret.Tween.get(o).to({x:o.x+100},500):egret.Tween.get(o).to({x:o.x-100},500)},this,300),egret.setTimeout(function(){n?egret.Tween.get(o).to({x:Data.curWidth()},300,egret.Ease.sineIn):egret.Tween.get(o).to({x:-o.width},300,egret.Ease.sineIn)},this,800),egret.setTimeout(function(){LayerManager.UI_Tips.contains(o)&&(LayerManager.UI_Tips.removeChild(o),o=null)},this,1100)}function o(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);var n=new egret.TextField;n.size=24,n.y=Data.curHeight()/2,e?n.textColor=Data.TextColors.red:n.textColor=Data.TextColors.green,n.alpha=0,n.text=t,n.strokeColor=0,n.x=Data.curWidth()/2,n.stroke=2,n.bold=!0,n.textAlign=egret.HorizontalAlign.CENTER,LayerManager.UI_Tips.contains(n)||LayerManager.UI_Tips.addChild(n),n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,n.scaleX=0,n.scaleY=0;var o=function(){LayerManager.UI_Tips.contains(n)&&(LayerManager.UI_Tips.removeChild(n),n=null)};egret.Tween.get(n).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(n).to({alpha:0},500).call(o,this)},this,1e3)}function i(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);var n=new egret.TextField;n.size=24,n.y=Data.curHeight()/2,e?n.textColor=Data.TextColors.red:n.textColor=Data.TextColors.green,n.alpha=0,n.text=t,n.strokeColor=0,n.x=Data.curWidth()/2,n.stroke=2,n.bold=!0,n.textAlign=egret.HorizontalAlign.CENTER,LayerManager.UI_Tips.contains(n)||LayerManager.UI_Tips.addChild(n),n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,n.scaleX=4,n.scaleY=4;var o=function(){LayerManager.UI_Tips.contains(n)&&(LayerManager.UI_Tips.removeChild(n),n=null)};egret.Tween.get(n).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(n).to({alpha:0},500).call(o,this)},this,1e3)}t.showTipsDownToUp=e,t.showTipsLeftOrRight=n,t.showTipsFromCenter=o,t.showTipsBigToSmall=i}(TipsUtils||(TipsUtils={}));var EgretSocket=function(){function t(){this.createChildren()}return t.prototype.createChildren=function(){this.socket=new egret.WebSocket,this.socket.type=egret.WebSocket.TYPE_STRING,this.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.socket.addEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.socket.addEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketError,this),this.socket.connect("192.168.0.102",8925)},t.prototype.onReceiveMessage=function(){console.log("egret.ProgressEvent.SOCKET_DATA")},t.prototype.onSocketOpen=function(){console.log("egret.Event.CONNECT")},t.prototype.onSocketClose=function(){console.log("egret.Event.CLOSE")},t.prototype.onSocketError=function(){console.log("egret.IOErrorEvent.IO_ERROR")},t}();__reflect(EgretSocket.prototype,"EgretSocket");var Net=function(){function t(){this.socketFunc={connect:function(){console.log("连接成功")},disconnect:function(){console.log("断开连接")},loginok:function(){console.log("登录服务器成功")},login:function(){console.log("登录服务器失败")},shoot:function(){}},this.emitFunc={login:function(){console.log("开始登陆服务器")}},this.socketInit()}return t.prototype.socketInit=function(){var t=this;this.socket=io.connect("http://"+document.domain+":8925",{transports:["websocket"]}),this.socket.on("connect",function(){t.getSid()});var e=this.socketFunc;for(var n in e)this.socket.on(n,e[n])},t.prototype.on=function(t,e){this.socketFunc[t]=e,this.socket.on(t,e)},t.prototype.emit=function(t,e){void 0===e&&(e={}),this.socket.emit(t,e)},t.prototype.getSid=function(){var t=new egret.HttpRequest;t.responseType=egret.HttpResponseType.TEXT,t.open(Data.DONAME+"fish50/index/getSid",egret.HttpMethod.GET),t.send(),t.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this)},t.prototype.onGetComplete=function(t){var e=t.currentTarget,n=JSON.parse(e.response);this.emit("login",{token:n.sid,multiple:GameConst.multiple_index})},t.prototype.disconnect=function(){this.socket.disconnect()},t}();__reflect(Net.prototype,"Net");var Alert2=function(t){function e(){var e=t.call(this)||this;return e.percentWidth=100,e.percentHeight=100,e.skinName="Alert2Skin",e}return __extends(e,t),e.prototype.show=function(t,e){var n=this;void 0===e&&(e=1e3),Data.view.addChild(this),this.content.text=t;setTimeout(function(){n.hide()},e)},e.prototype.hide=function(){this.parent.removeChild(this)},e}(eui.Component);__reflect(Alert2.prototype,"Alert2");var AllBg=function(){function t(){}return t.addAllBg=function(e){void 0===e&&(e=.7);var n=Data.view.getChildIndex(t.all_bg);return-1!=n?t.auto_remove=!1:(t.all_bg=new egret.Shape,t.all_bg.graphics.beginFill(0),t.all_bg.width=Data.view.width,t.all_bg.height=Data.view.height,t.all_bg.graphics.drawRect(0,0,t.all_bg.width,t.all_bg.height),t.all_bg.graphics.endFill(),t.all_bg.alpha=e,void Data.view.addChild(t.all_bg))},t.removeAllBg=function(){t.auto_remove=!0;egret.Tween.get(t.all_bg,{loop:!1});t.all_bg.parent&&t.all_bg.parent.removeChild(t.all_bg)},t.auto_remove=!0,t}();__reflect(AllBg.prototype,"AllBg");var DiamondsItem=function(t){function e(e){var n=t.call(this)||this;return n.data={money:"10",diamonds:"6"},n.data=e,n.skinName="DiamondsItemSkin",n.addEventListener(egret.Event.ADDED_TO_STAGE,n.init,n),n}return __extends(e,t),e.prototype.init=function(){this.money.text="￥"+this.data.money+" 购买",this.diamonds.text=this.data.diamonds,this.award.text="额外赠送"+this.data.award+"金豆",this.money.addEventListener(egret.TouchEvent.TOUCH_TAP,this.go,this)},e.prototype.go=function(){window.top.location.href="/pay/pay/index/num/"+this.data.money+"/type/2"},e}(eui.Component);__reflect(DiamondsItem.prototype,"DiamondsItem");var PayItem=function(t){function e(e){var n=t.call(this)||this;return n.data={money:"10",award:"6",coin:"12"},n.data=e,n.skinName="PayItemSkin",n.addEventListener(egret.Event.ADDED_TO_STAGE,n.init,n),n}return __extends(e,t),e.prototype.init=function(){var t=this;this.money.text="￥"+this.data.money+" 购买",this.coin.text=this.data.coin,this.award.text="额外赠送"+this.data.award+"金豆",this.money.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){window.top.location.href="/pay/pay/index/num/"+t.data.money},this)},e}(eui.Component);__reflect(PayItem.prototype,"PayItem");var PayPanel=function(t){function e(){var e=t.call(this)||this;return e.host=Data.DONAME,e.api="/index/Recharge/getRechargeList",e.userApi="/index/user/getInfo",e.content=[],e.api=e.host+e.api,e.userApi=e.host+e.userApi,e.skinName="PayPanelSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.init,e),e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.no,e),e.auto_zh.addEventListener(eui.UIEvent.CHANGE,e.reload,e),e}return __extends(e,t),e.prototype.no=function(t){t.stopImmediatePropagation()},e.prototype.init=function(){var t=this;this.width=this.stage.stageWidth,this.height=this.stage.stageHeight,this.close_bg.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.parent&&t.parent.removeChild(t)},this)},e.prototype.reload=function(){Http.get(this.userApi).addEventListener(egret.Event.COMPLETE,this.setCoin,this),this.clearChild(),this.scroller.viewport.scrollV=0;var t=this.auto_zh.selected;t?(Http.get(this.api).addEventListener(egret.Event.COMPLETE,this.createList,this),this.title.text="充值金豆"):(Http.get(this.api).addEventListener(egret.Event.COMPLETE,this.diamondsList,this),this.title.text="充值钻石")},e.prototype.setCoin=function(t){var e=t.currentTarget,n=JSON.parse(e.response);n.err||(this.coin.text=n.data.money,this.diamonds.text=n.data.diamonds)},e.prototype.clearChild=function(){this.loading_group.visible=!0;var t=this.content;if(0!=t.length)for(var e=0,n=t;e<n.length;e++){var o=n[e];o.parent.removeChild(o)}this.content=[]},e.prototype.createList=function(t){var e=t.currentTarget,n=JSON.parse(e.response);if(!n.err){this.loading_group.visible=!1;for(var o=0,i=n.data;o<i.length;o++){var r=i[o],s=new PayItem(r);this.content.push(s),this.scroller_box.addChild(s)}}},e.prototype.diamondsList=function(t){var e=t.currentTarget,n=JSON.parse(e.response);if(!n.err){this.loading_group.visible=!1;for(var o=0,i=n.data;o<i.length;o++){var r=i[o],s=new DiamondsItem(r);this.content.push(s),this.scroller_box.addChild(s)}}},e}(eui.Component);__reflect(PayPanel.prototype,"PayPanel");var Shop=function(t){function e(e){void 0===e&&(e="");var n=t.call(this)||this;return n.api="/index/shop/getDiamondsBuy",n.userApi="/index/user/getInfo",n.percentWidth=100,n.skinName="ShopSkin",n.api=Data.DONAME+n.api,n.userApi=Data.DONAME+n.userApi,n.addEventListener(egret.Event.ADDED_TO_STAGE,n.init,n),n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,n.no,n),n}return __extends(e,t),e.prototype.no=function(t){t.stopImmediatePropagation()},e.prototype.init=function(){this.width=this.stage.stageWidth,this.height=this.stage.stageHeight,this.loading.visible=!0,Http.get(this.api).addEventListener(egret.Event.COMPLETE,this.createList,this),this.close_bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.close_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},e.prototype.close=function(){this.parent&&this.parent.removeChild(this)},e.prototype.reload=function(){Http.get(this.userApi).addEventListener(egret.Event.COMPLETE,this.setCoin,this)},e.prototype.setCoin=function(t){var e=t.currentTarget,n=JSON.parse(e.response);n.err||(this.money.text=n.data.money,this.diamonds.text=n.data.diamonds)},e.prototype.createList=function(t){this.loading.visible=!1;var e=t.currentTarget,n=JSON.parse(e.response);if(!n.err)for(var o=1,i=0,r=n.data;i<r.length;i++){var s=r[i];s.index=o;var a=new ShopItem(s);this.scroller_box.addChild(a),o++}},e}(eui.Component);__reflect(Shop.prototype,"Shop");var ShopItem=function(t){function e(e){var n=t.call(this)||this;return n.data={money:10,diamonds:10,index:1},n.data=e,n.percentHeight=100,n.skinName="ShopItemSkin",n.money.text=e.money,n.diamonds.text=e.diamonds,e.index>10&&(e.index=10),n.pro_img.source=RES.getRes("Shopping Mall2_json."+e.index+"钻"),n.addEventListener(egret.Event.ADDED_TO_STAGE,n.init,n),n}return __extends(e,t),e.prototype.init=function(){var t=this;this.addEventListener(egret.TouchEvent.TOUCH_END,this.go,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.reduction,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){t.scaleX=.98,t.percentHeight=98},this)},e.prototype.reduction=function(){this.scaleX=1,this.percentHeight=100},e.prototype.go=function(){this.reduction(),window.top.location.href="/pay/pay/index/num/"+this.data.money+"/type/2"},e.prototype.payDiamonds=function(t){var e=t.currentTarget,n=JSON.parse(e.response);if(!n.err){Data.diamondsCount=n.diamonds,Data.view.shop_group.close();var o=new Alert2;o.show("购买成功，获得"+this.data.diamonds+"个钻石")}},e}(eui.Component);__reflect(ShopItem.prototype,"ShopItem");