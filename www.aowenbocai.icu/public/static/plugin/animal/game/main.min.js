var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),PayItem=function(t){function e(e){var i=t.call(this)||this;return i.data={money:"10",award:"6",coin:"12"},i.data=e,i.skinName="PayItemSkin",i.addEventListener(egret.Event.ADDED_TO_STAGE,i.init,i),i}return __extends(e,t),e.prototype.init=function(){var t=this;this.money.text="￥"+this.data.money+" 购买",this.coin.text=this.data.coin,this.award.text="额外赠送"+this.data.award+"金豆",this.money.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){window.top.location.href="/pay/pay/index/num/"+t.data.money},this)},e}(eui.Component);__reflect(PayItem.prototype,"PayItem");var AllAnimal=function(){function t(){}return t.init=function(){var e=RES.getRes("animal2_json"),i=RES.getRes("animal2_png");t.animalFactory=new egret.MovieClipDataFactory(e,i),t.animalFactory.enableCache=!0;var n=RES.getRes("10animal3_json"),a=RES.getRes("10animal3_png");t.animalFactory2=new egret.MovieClipDataFactory(n,a),t.animalFactory2.enableCache=!0;var o=RES.getRes("huo_ef_json"),s=RES.getRes("huo_ef_png");t.huaFactory=new egret.MovieClipDataFactory(o,s),t.huaFactory.enableCache=!0;var r=RES.getRes("efc-2_json"),l=RES.getRes("efc-2_png");t.huaFactory2=new egret.MovieClipDataFactory(r,l),t.huaFactory2.enableCache=!0},t.remove=function(e){delete t.list[e]},t.getIdAnimal=function(e){return t.list[e]},t.bingAnimal=function(){if(t.list)for(var e in t.list)t.list[e].addFrame(),t.list[e].ice(),t.list[e].addCreateTime();else;},t.removeBing=function(){if(t.list)for(var e in t.list)t.list[e].iceRemove();else;},t.animalIndex=function(){if(t.index_list=[],t.list){for(var e in t.list)t.list[e].addFrame(),t.index_list.push({animal:t.list[e],my_index:t.list[e].y+t.list[e].height});t.index_list.sort(function(t,e){return t.my_index-e.my_index});for(var i in t.index_list)t.index_list[i].animal.parent.setChildIndex(t.index_list[i].animal,i)}else;},t.GetRandomNum=function(t,e){var i=e-t,n=Math.random();return t+Math.round(n*i)},t.list={},t.index_list=[],t}();__reflect(AllAnimal.prototype,"AllAnimal");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var a=RES.getRes(t);a?n(a):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Bg=function(t){function e(){var e=t.call(this)||this;return e.skinName="skins.BgSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.percentWidth=100,this.animal_group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.animalClick,this),this.add_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.recharge,this),this.nav_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.navShow,this),this.rank_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.rankShow,this),this.back_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,Data.goHome,this),this.task_group.addEventListener(egret.TouchEvent.TOUCH_TAP,Task.showTaskInfo,this),this.code_sp_jia.addEventListener(egret.TouchEvent.TOUCH_TAP,this.coodeSpAdd,this),this.code_sp_jian.addEventListener(egret.TouchEvent.TOUCH_TAP,this.coodeSpJian,this);for(var i=this.code_group.numChildren,n=0;i>n;n++)0==n&&(this.code_group.getChildAt(n).selected=!0,this.code_base_num=this.code_num=100),this.code_group.getChildAt(n).addEventListener(eui.UIEvent.CHANGE,this.toggleChangeHandler,this);this.main_group.touchEnabled=!1;var a=RES.getRes("rem_json"),o=RES.getRes("rem_png");this.mcMyFactory=new egret.MovieClipDataFactory(a,o);var s=this.addMy();this.my_group.width=.85*s.width,this.my_group.height=.85*s.height,this.my_group.addChild(s),this.nav_skin=new Nav,this.rank_skin=new Rank,Task.getTask(),this.hit_sound=RES.getRes("zoo_hit_mp3");var r=RES.getRes("hit_user_json"),l=RES.getRes("hit_user_png");this.bulletMyFactory=new egret.MovieClipDataFactory(r,l),this.bulletMyFactory.enableCache=!0,UserAction.bullet={blue:new egret.MovieClip(this.bulletMyFactory.generateMovieClipData("blue")),my:new egret.MovieClip(this.bulletMyFactory.generateMovieClipData("my")),red:new egret.MovieClip(this.bulletMyFactory.generateMovieClipData("red")),green:new egret.MovieClip(this.bulletMyFactory.generateMovieClipData("green")),zise:new egret.MovieClip(this.bulletMyFactory.generateMovieClipData("zise"))},AllAnimal.init(),this.hit_animal_sound=RES.getRes("zoo_base_mp3"),Data.net.on("hitAnimal",function(t){e.boomAnimal(t)}),Data.net.on("noHitAnimal",function(t){if(t.user_id==Main.user_id){var i=t.ice_cd-Main.bing_angle;t.ice_cd>=360&&(i=360-Main.bing_angle),i>0&&e.bing_group.addBingCd(i),e.hit_animal_sound.play(0,1)}else UserAction.userHit(t.id,t.user_id)}),Data.net.on("removeAnimal",function(t){var i=AllAnimal.getIdAnimal(t);e.removeAnimal(i)}),Data.net.on("userChange",function(t){e.getUser(t)}),Data.net.on("setMoney",function(t){Data.money=parseInt(t.money),Main.bg_skin.money.text=Data.money}),Data.net.on("hitTask",function(t){Task.getTaskCommon(t)})},e.prototype.animalClick=function(t){for(var e in AllAnimal.list){var i=AllAnimal.list[e].animalMc;if(i.hitTestPoint(t.stageX,t.stageY,!0))return this.pushAnimal(AllAnimal.list[e]),void this.showHit(t)}},e.prototype.rankShow=function(t){this.rank_skin.show(),AllBg.all_bg.touchEnabled=!0,AllBg.all_bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.rankHide,this)},e.prototype.rankHide=function(t){AllBg.all_bg.touchEnabled=!1,this.rank_skin.hide()},e.prototype.navShow=function(t){this.nav_skin.show(),AllBg.all_bg.touchEnabled=!0,AllBg.all_bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.navHide,this)},e.prototype.navHide=function(t){AllBg.all_bg.touchEnabled=!1,this.nav_skin.hide()},e.prototype.toggleChangeHandler=function(t){for(var e=this.code_group.numChildren,i=t.$target,n=0;e>n;n++){var a=this.code_group.getChildAt(n);a.selected=a==t.target}i.label!=this.code_base_num&&(this.code_base_num=this.code_show.text=this.code_num=i.label,this.code_sp_num.text="1",Data.net.emit("Bullet",{bullet_code:this.code_num}))},e.prototype.coodeSpAdd=function(t){var e=parseInt(this.code_sp_num.text);e>=10?(this.code_num=10*this.code_base_num,this.code_sp_num.text="10"):(this.code_num=this.code_base_num*(e+1),this.code_sp_num.text=(e+1).toString()),this.code_show.text=this.code_num.toString(),Data.net.emit("Bullet",{bullet_code:this.code_num})},e.prototype.coodeSpJian=function(t){var e=parseInt(this.code_sp_num.text);1>=e?(this.code_sp_num.text="1",this.code_num=this.code_base_num):(this.code_sp_num.text=(e-1).toString(),this.code_num=this.code_base_num*(e-1)),this.code_show.text=this.code_num.toString(),Data.net.emit("Bullet",{bullet_code:this.code_num})},e.prototype.recharge=function(){this.pay_group=new PayPanel,this.pay_group.x=0,this.pay_group.y=0,this.pay_group.reload(),this.addChild(this.pay_group)},e.prototype.addMy=function(){return this.my_mc=new egret.MovieClip(this.mcMyFactory.generateMovieClipData("myplay")),this.my_mc.scaleX=.85,this.my_mc.scaleY=.85,this.my_mc},e.prototype.showHit=function(t){this.hit_sound.play(0,1);var e=t.$stageX,i=t.$stageY;UserAction.addBullet(e,i,"my"),this.my_mc.gotoAndPlay("1",1)},e.prototype.addAnimal=function(t){var e=new Anim;e.id=t.id;var i=this.stage.stageWidth,n=(new Date).getTime(),a=30,o=165,s=400;e.speedY=t.speedY,e.spaceY=t.spaceY,e.create_time=n-t.go_life,t.speedX>0?(e.speedX=1e3*(i+s-o/2)/(t.life*a),e.spaceX=-(s-o/2)):(e.speedX=-1e3*(i+s-o/2)/(t.life*a),e.spaceX=i+o-(s-o)),e.life=t.life,e.go_life=t.go_life,e.y=t.spaceY,e.x=e.spaceX,t.animalType-=1,e.animalType=t.animalType,this.beforeAnimal(t.animalType),AllAnimal.list[t.id]=e,this.animal_group.addChild(e),e.addEventListener("boom",this.moveTop,this),e.addEventListener("hit_animal",this.pushAnimal,this)},e.prototype.moveTop=function(t){var e=this;t.target.touchEnabled=!1;var i=t.target,n=1e3;2==i.animalType&&1==i.die_type?(n=3e3,this.main_group.addChild(t.target)):1==i.animalType&&1==i.die_type?(n=3e3,this.main_group.addChild(t.target)):2==i.die_type?(n=2e3,this.main_group.addChildAt(t.target,0)):3==i.die_type?(n=2e3,this.main_group.addChildAt(t.target,0)):this.main_group.addChild(t.target),egret.setTimeout(function(){e.hitRemoveAnimal(i)},this,n)},e.prototype.hitRemoveAnimal=function(t){var e=User.getGroup(t.user_id),i=egret.Tween.get(t,{loop:!1}),n=e.x-15;t.user_id!=Main.user_id&&t.user_id||(n+=70);var a=t.parent.height-55;i.wait(300),i.to({x:n,y:a,scaleX:.2,scaleY:.2},700,egret.Ease.sineInOut),i.call(function(){this.removeAnimal(t)})},e.prototype.removeAnimal=function(t){t.removeAnimal(),t.removeEventListener("boom",this.moveTop,this),t.removeEventListener("hit_animal",this.pushAnimal,this)},e.prototype.pushAnimal=function(t){if(this.code_num>Data.money)return void this.recharge();var e=t.id;Data.net.emit("pushAnimal",{id:e})},e.prototype.boomAnimal=function(t){var e=AllAnimal.getIdAnimal(t.id);e.die_type=1,e.user_id=t.user_id,t.user_id!=Main.user_id&&e.setFont(),e.boom();var i=t.money;if(0!=t.children.length)for(var n,a=0,o=function(o){var r=AllAnimal.getIdAnimal(o.id);r.setMoney=o.money,r.user_id=t.user_id,t.user_id!=Main.user_id&&r.setFont(),i+=o.money*s.code_num/100,2==e.animalType?(r.die_type=2,r.boom()):1==e.animalType&&(r.die_type=3,n=egret.setTimeout(function(){r.boom()},s,500+100*a)),a++},s=this,r=0,l=t.children;r<l.length;r++){var h=l[r];o(h)}e.setMoney=i},e.prototype.getUser=function(t){User.inti(t,this.user_group.$children)},e.prototype.beforeAnimal=function(t){if(!(t>1)){var e=new BeforeAnimal;e.x=0,e.y=-100,0==t?e.daXiangShow():1==t&&e.zhadanrenShow(),this.main_group.addChild(e),egret.setTimeout(function(){e.parent.removeChild(e)},this,4e3)}},e}(eui.Component);__reflect(Bg.prototype,"Bg");var createImg=function(){function t(){}return t.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},t}();__reflect(createImg.prototype,"createImg");var Data=function(){function t(){}return t.init=function(){var e=RES.getRes("data_config_json");t.animalType=e.animal,t.local_url="http://"+location.host+"/",t.server_url="http://"+location.host+":8926",t.net=new Net},t.reload=function(){window.top.location.reload()},t.goHome=function(){window.top.location.href=t.local_url},t.getBLen=function(t){return null==t?0:("string"!=typeof t&&(t+=""),t.replace(/[^\x00-\xff]/g,"01").length)},t.server_url="http://192.168.0.104:8926",t.local_url="http://192.168.0.104:81/",t.record_page=1,t.animalType=[{name:"熊猫",odds:100,scale:.7},{name:"炸弹人",odds:100,scale:1.1},{name:"恐龙走",odds:20,scale:1.1},{name:"鸵鸟",odds:7,scale:.7},{name:"长颈鹿",odds:5,scale:.7},{name:"企鹅",odds:5,scale:.7},{name:"猫",odds:4,scale:.7},{name:"羊",odds:8,scale:.7},{name:"狐狸",odds:8,scale:.7},{name:"斑马",odds:6,scale:.7},{name:"鳄鱼",odds:10,scale:1.1}],t.record_data=[],t.rank_data=[],t.rank_data_key=1,t.money=0,t.task_array={animalType:0,num:0,countvalue:0,id:0},t.task_money={},t}();__reflect(Data.prototype,"Data");var Loading=function(t){function e(){var e=t.call(this)||this;return e.percentWidth=100,e.skinName="resource/eui_skins/Loading.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.height=this.stage.stageHeight,this.dispatchEventWith("childrenCreated")},e}(eui.Component);__reflect(Loading.prototype,"Loading",["eui.UIComponent","egret.DisplayObject"]);var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.loading=new Loading,this.loading.percentWidth=100,this.addChild(this.loading),this.loading.addEventListener("childrenCreated",this.loadComplete,this)},e.prototype.loadComplete=function(){this.loading.bar.width=0,this.dispatchEventWith("loadComplete")},e.prototype.setProgress=function(t,e){this.loading.bar.percentWidth=100*t/e,this.loading.progress.text=t+"/"+e},e}(eui.Group);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isThemeLoadEnd=!1,e.isResourceLoadEnd=!1,e.intAnimalNum=1,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json?v=1","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json?v=61",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},e.prototype.onThemeLoadComplete=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("loading"),this.isThemeLoadEnd=!0,this.createScene()},e.prototype.onResourceLoadComplete=function(t){"loading"==t.groupName?(this.loadingView=new LoadingUI,this.loadingView.width=this.stage.stageWidth,this.loadingView.addEventListener("loadComplete",this.loadNext,this),this.stage.addChild(this.loadingView)):"preload"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},e.prototype.loadNext=function(){RES.loadGroup("preload")},e.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.startCreateScene=function(){var t=this;egret.ImageLoader.crossOrigin="anonymous",this.stage.removeChild(this.loadingView),Data.init();var i=new Bg;e.bg_skin=i,this.addChild(i),this.animal_group=i.animal_group,this.shadow_bing=i.shadow_bing,e.bg_sound=RES.getRes("zoo_bg_mp3"),this.iosSound()||e.bg_sound.play(0,0);var n=RES.getRes("animal_json"),a=RES.getRes("animal_png");this.mcAnimalFactory=new egret.MovieClipDataFactory(n,a),e.rank_list=new RankList,i.bing_group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.bingEvent,this),this.addEventListener(egret.Event.ENTER_FRAME,AllAnimal.animalIndex,this),Data.net.on("addAnimal",function(t){e.bg_skin.addAnimal(t)}),Data.net.on("initAnimal",function(t){if(t.list.length)for(var i=0,n=t.list;i<n.length;i++){var a=n[i];e.bg_skin.addAnimal(a.info)}t.surplusTime&&(e.bing_time=t.surplusTime/1e3,e.bg_skin.bing_group.iceStar({user_id:0}))}),Data.net.on("getUser",function(t){e.user_id=t.user_id,Data.money=parseInt(t.money),e.bg_skin.money.text=Data.money}),Data.net.on("iceInfo",function(t){t.ice_cd>360&&(t.ice_cd=360),e.bing_angle=t.ice_cd,e.bg_skin.bing_group.addBingCd(0,!0)}),Data.net.on("ice",function(t){e.bing_time=10,e.bg_skin.bing_group.iceStar(t)}),Data.net.on("disconnect",function(){var e=new Alert;e.content.text="连接已超时！请重新登陆。",e.show(),e.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,Data.reload,t)})},e.prototype.bingEvent=function(t){if(e.bing_angle>=360)Data.net.emit("ice");else{var i=new Alert;i.content.text="当前技能冷却中....\n动物抓捕失败时技能状态会累积，直到进度满格可以释放一次冰封技能！",i.show()}},e.prototype.addAnimal=function(t){var e=new egret.MovieClip(this.mcAnimalFactory.generateMovieClipData(t));return e.gotoAndPlay("1",-1),e},e.prototype.GetRandomNum=function(t,e){var i=e-t,n=Math.random();return t+Math.round(n*i)},e.prototype.sortNumber=function(t,e){return t-e},e.prototype.iosSound=function(){var t=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return t?(e.bg_skin.$addListener(egret.TouchEvent.TOUCH_TAP,this.startSound,this),!0):!1},e.prototype.startSound=function(){e.bg_sound.play(0,0),e.bg_skin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startSound,this)},e.bing_angle=0,e.bing_time=0,e.iceBeaginTime=0,e}(eui.UILayer);__reflect(Main.prototype,"Main");var Task=function(){function t(){}return t.showTaskInfo=function(e){var i=new Alert;i.content.text=t.task_txt,i.show()},t.getTaskCommon=function(e){if(0!=e.data.task_level){if(Main.bg_skin.task_title.text=e.data.content,Main.bg_skin.task_num.text=e.data.over+"/"+e.data.countValue,Data.task_array.animalType=parseInt(e.data.info)-1,Data.task_array.num=e.data.over,Data.task_array.id=e.data.activeid,Data.task_array.countvalue=parseInt(e.data.countValue),Data.task_array.countvalue<=parseInt(e.data.over))return this.getAward();var i=void 0;if(1==Data.task_array.animalType||2==Data.task_array.animalType){var n=RES.getRes("animal2_json"),a=RES.getRes("animal2_png");i=new egret.MovieClipDataFactory(n,a)}else{var n=RES.getRes("10animal3_json"),a=RES.getRes("10animal3_png");i=new egret.MovieClipDataFactory(n,a)}var o=Data.animalType[Data.task_array.animalType];t.task_animal_mc&&t.task_animal_mc.parent.removeChild(t.task_animal_mc),t.task_animal_mc=new egret.MovieClip(i.generateMovieClipData(o.name)),t.task_animal_mc.gotoAndPlay("1",-1),t.task_animal_mc.stop(),t.task_animal_mc.scaleX=.3,t.task_animal_mc.scaleY=.3,t.task_animal_mc.x=(Main.bg_skin.task_animal.width-.3*t.task_animal_mc.width)/2,t.task_animal_mc.y=(Main.bg_skin.task_animal.height-.3*t.task_animal_mc.height)/2,Main.bg_skin.task_animal.addChild(t.task_animal_mc),e.data.task_level%3==1&&(Main.bg_skin.task_1.currentState="dangqian",Main.bg_skin.task_2.currentState="no",Main.bg_skin.task_3.currentState="no",Main.bg_skin.task_1.playAnimation(!0)),e.data.task_level%3==2&&(Main.bg_skin.task_1.currentState="over",Main.bg_skin.task_1.guang.stop(),Main.bg_skin.task_2.currentState="dangqian",Main.bg_skin.task_3.currentState="no",Main.bg_skin.task_2.playAnimation(!0)),e.data.task_level%3==0&&(Main.bg_skin.task_1.currentState="over",Main.bg_skin.task_1.guang.stop(),Main.bg_skin.task_2.currentState="over",Main.bg_skin.task_2.guang.stop(),Main.bg_skin.task_3.currentState="dangqian",Main.bg_skin.task_3.playAnimation(!0))}else Main.bg_skin.task_1.currentState="over",Main.bg_skin.task_1.guang.stop(),Main.bg_skin.task_2.currentState="over",Main.bg_skin.task_2.guang.stop(),Main.bg_skin.task_3.currentState="over",Main.bg_skin.task_3.guang.stop(),Main.bg_skin.task_title.text="明天继续加油吧",Main.bg_skin.task_num.text="全部完成",Data.task_array.animalType=0,Data.task_array.num=0,Data.task_array.id=0,Data.task_array.countvalue=0},t.getTask=function(){var e=this,i=function(i){var n=i.currentTarget,a=JSON.parse(n.response);if(0==a.err){for(var o=1,s=0,r=a.all;s<r.length;s++){var l=r[s];Data.task_money[l.activeid]=[l.content,l.award.coin.value],t.task_txt+="任务"+o+"：\n"+l.content+"，奖励："+l.award.coin.value+"\n",o++}e.getTaskCommon(a)}},n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,n.open(Data.local_url+"animal/Index/getTask?type=1",egret.HttpMethod.POST),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(),n.addEventListener(egret.Event.COMPLETE,i,this)},t.getAward=function(){var t=this,e=function(e){var i=e.currentTarget,n=JSON.parse(i.response);if(0==n.err){var a=new Alert2,o=Data.task_money[Data.task_array.id];a.show("恭喜您!"+o[0]+"完成，奖励"+o[1],3e3),Data.money+=parseInt(o[1]),Main.bg_skin.money.text=Data.money,t.getTaskCommon(n)}else{setTimeout(function(){t.getAward()},2e3)}},i=new egret.HttpRequest;i.responseType=egret.HttpResponseType.TEXT,i.open(Data.local_url+"animal/Index/getAward?active_id="+Data.task_array.id,egret.HttpMethod.POST),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(),i.addEventListener(egret.Event.COMPLETE,e,this)},t.task_txt="",t}();__reflect(Task.prototype,"Task");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function a(t){e.call(n,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,a,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var User=function(){function t(){}return t.inti=function(e,i){var n=[],a=[];if(e.length)for(var o=0,s=e;o<s.length;o++){var r=s[o];r.user_id!=Main.user_id&&n.push(r.user_id)}if(t.list)for(var l in t.list){var r=t.list[l];t.contains(n,r.user_id)?a.push(r.user_id):(t.removeUser(r.group),delete t.list[r.user_id])}else;if(e.length)for(var h=0,c=e;h<c.length;h++){var r=c[h];r.user_id!=Main.user_id&&(t.contains(a,r.user_id)||(t.list[r.user_id]={user_id:r.user_id,photo:r.photo,group:t.getEmpty(i),username:r.nickname}))}t.addUser()},t.getGroup=function(e){if(e==Main.user_id)return Main.bg_skin.my_group;if(t.list){for(var i in t.list){var n=t.list[i];if(e==n.user_id)return n.group}return Main.bg_skin.my_group}},t.addUser=function(){if(t.list)for(var e in t.list){var i=t.list[e];i.user_id!=Main.user_id&&(i.group.photo=Data.local_url+"index/Image/load?url="+i.photo,i.group.nickname=i.username)}},t.removeUser=function(t){t.photo="",t.nickname="空席"},t.getEmpty=function(e){for(var i=0;4>i;i++)if(!t.contains(t.getHasGroup(),e[i]))return e[i]},t.getHasGroup=function(){var e=[];if(t.list)for(var i in t.list){var n=t.list[i];e.push(n.group)}else;return e},t.contains=function(t,e){var i=t.findIndex(function(t){return t==e});return-1==i?!1:!0},t.removeArr=function(t,e){for(var i=0;i<t.length;i++)if(t[i]==e){t.splice(i,1);break}},t.list={},t}();__reflect(User.prototype,"User");var UserAction=function(){function t(){}return t.userHit=function(e,i){Main.bg_skin.hit_sound.play(0,1);var n=AllAnimal.getIdAnimal(e),a=0;a=180==n.animal.skewY?n.x+n.animal.x-n.animal.width*n.scale/2:n.x+n.animal.x+n.animal.width*n.scale/2;var o=Main.bg_skin.main_group.y+n.y+n.animal.y+n.animal.height*n.scale/2,s=User.getGroup(i);t.addBullet(a,o,s.name)},t.addBullet=function(e,i,n){var a=t.bullet[n];a.gotoAndPlay("1",1),a.x=e-a.width/2,a.y=i-a.height/2,Main.bg_skin.addChild(a)},t.user_tw={},t.bullet={},t}();__reflect(UserAction.prototype,"UserAction");var Http=function(){function t(){}return t.get=function(t){var e=new egret.HttpRequest;return e.responseType=egret.HttpResponseType.TEXT,e.open(t,egret.HttpMethod.POST),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(),e},t}();__reflect(Http.prototype,"Http");var Net=function(){function t(){this.login=0,this.socketFunc={connect:function(){console.log("连接成功")},disconnect:function(){console.log("断开连接")},loginok:function(){console.log("登录服务器成功")},shoot:function(){}},this.emitFunc={login:function(){console.log("开始登陆服务器")}},this.socketInit()}return t.prototype.socketInit=function(){var t=this;this.socket=io.connect(Data.server_url,{transports:["websocket"]}),this.socket.on("connect",function(){t.getSid()});var e=this.socketFunc;for(var i in e)this.socket.on(i,e[i])},t.prototype.on=function(t,e){this.socketFunc[t]=e,this.socket.on(t,e)},t.prototype.emit=function(t,e){void 0===e&&(e={}),this.socket.emit(t,e)},t.prototype.getSid=function(){var t=new egret.HttpRequest;t.responseType=egret.HttpResponseType.TEXT,t.open(Data.local_url+"fish50/index/getSid",egret.HttpMethod.GET),t.send(),t.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this)},t.prototype.onGetComplete=function(t){if(!this.login){this.login=1;var e=t.currentTarget,i=JSON.parse(e.response);this.emit("login",{token:i.sid})}},t}();__reflect(Net.prototype,"Net");var DiamondsItem=function(t){function e(e){var i=t.call(this)||this;return i.data={money:"10",diamonds:"6"},i.data=e,i.skinName="DiamondsItemSkin",i.addEventListener(egret.Event.ADDED_TO_STAGE,i.init,i),i}return __extends(e,t),e.prototype.init=function(){this.money.text="￥"+this.data.money+" 购买",this.diamonds.text=this.data.diamonds,this.award.text="额外赠送"+this.data.award+"金豆",this.money.addEventListener(egret.TouchEvent.TOUCH_TAP,this.go,this)},e.prototype.go=function(){window.top.location.href="/pay/pay/index/num/"+this.data.money+"/type/2"},e}(eui.Component);__reflect(DiamondsItem.prototype,"DiamondsItem");var AllBg=function(){function t(){}return t.addAllBg=function(e){void 0===e&&(e=.7);var i=Main.bg_skin.getChildIndex(t.all_bg);return-1!=i?t.auto_remove=!1:(t.all_bg=new egret.Shape,t.all_bg.graphics.beginFill(0),t.all_bg.width=Main.bg_skin.width,t.all_bg.height=Main.bg_skin.height,t.all_bg.graphics.drawRect(0,0,t.all_bg.width,t.all_bg.height),t.all_bg.graphics.endFill(),t.all_bg.alpha=e,void Main.bg_skin.addChild(t.all_bg))},t.removeAllBg=function(){t.auto_remove=!0;egret.Tween.get(t.all_bg,{loop:!1});t.all_bg.parent&&t.all_bg.parent.removeChild(t.all_bg)},t.auto_remove=!0,t}();__reflect(AllBg.prototype,"AllBg");var PayPanel=function(t){function e(){var e=t.call(this)||this;return e.host=Data.local_url,e.api="/index/Recharge/getRechargeList",e.userApi="/index/user/getInfo",e.content=[],e.api=e.host+e.api,e.userApi=e.host+e.userApi,e.skinName="PayPanelSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.init,e),e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.no,e),e.auto_zh.addEventListener(eui.UIEvent.CHANGE,e.reload,e),e}return __extends(e,t),e.prototype.no=function(t){t.stopImmediatePropagation()},e.prototype.init=function(){var t=this;this.width=this.stage.stageWidth,this.height=this.stage.stageHeight,this.close_bg.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.parent&&t.parent.removeChild(t)},this)},e.prototype.reload=function(){Http.get(this.userApi).addEventListener(egret.Event.COMPLETE,this.setCoin,this),this.clearChild(),this.scroller.viewport.scrollV=0;var t=this.auto_zh.selected;t?(Http.get(this.api).addEventListener(egret.Event.COMPLETE,this.createList,this),this.title.text="充值金豆"):(Http.get(this.api).addEventListener(egret.Event.COMPLETE,this.diamondsList,this),this.title.text="充值钻石")},e.prototype.setCoin=function(t){var e=t.currentTarget,i=JSON.parse(e.response);i.err||(this.coin.text=i.data.money,this.diamonds.text=i.data.diamonds)},e.prototype.clearChild=function(){this.loading_group.visible=!0;var t=this.content;if(0!=t.length)for(var e=0,i=t;e<i.length;e++){var n=i[e];n.parent.removeChild(n)}this.content=[]},e.prototype.createList=function(t){var e=t.currentTarget,i=JSON.parse(e.response);if(!i.err){this.loading_group.visible=!1;for(var n=0,a=i.data;n<a.length;n++){var o=a[n],s=new PayItem(o);this.content.push(s),this.scroller_box.addChild(s)}}},e.prototype.diamondsList=function(t){var e=t.currentTarget,i=JSON.parse(e.response);if(!i.err){this.loading_group.visible=!1;for(var n=0,a=i.data;n<a.length;n++){var o=a[n],s=new DiamondsItem(o);this.content.push(s),this.scroller_box.addChild(s)}}},e}(eui.Component);__reflect(PayPanel.prototype,"PayPanel");var RankItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="rankItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){Data.rank_data_key%2==0?this.my_bg.fillColor=2964812:this.my_bg.fillColor=2503230,this.animal_pic.source=RES.getRes("pic2_json."+this.data.animalType);var t=this.data.nick_name;Data.getBLen(t)>20&&(t=t.substr(0,7)+".."),this.nick_name.text=t,this.win_money.text=this.data.win_money,this.hit_money.text=this.data.hit_money,this.user_pic.source=Data.local_url+"index/Image/load?url="+this.data.photo,this.user_pic.mask=this.pic_mask,this.create_time.text=this.data.create_time,Data.rank_data_key+=1},e}(eui.ItemRenderer);__reflect(RankItem.prototype,"RankItem");var RankList=function(t){function e(){var e=t.call(this)||this;return e.dataList=new eui.List,e.viewport=e.dataList,e.percentWidth=100,e.dataList.itemRenderer=RankItem,e}return __extends(e,t),e.prototype.bindData=function(){var t=new eui.ArrayCollection(Data.rank_data);this.dataList.dataProvider=t},e}(eui.Scroller);__reflect(RankList.prototype,"RankList");var RecordItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RecordItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){this.pic.source=RES.getRes("pic2_json."+this.data.animalType),this.hit_money.text="消耗"+this.data.bullet+"金豆",this.create_time.text=this.data.create_time,this.m_name.text=this.data.name,0==this.data.status?(this.status.textColor=16777215,this.status.text="捕获失败"):(this.status.text="+"+this.data.status,this.status.textColor=14659875)},e}(eui.ItemRenderer);__reflect(RecordItem.prototype,"RecordItem");var RecordList=function(t){function e(){var e=t.call(this)||this;return e.current_page=0,e.last_page=1,e.s_isLoading=!1,e.skinName="RecordDataSkin",e.percentWidth=100,e.percentHeight=100,e.collection=new eui.ArrayCollection,e.list.dataProvider=e.collection,e.list.itemRenderer=RecordItem,e.list.selectedIndex=0,e.scroller.addEventListener(eui.UIEvent.CHANGE_END,e.loadData,e),e.loadData(),e}return __extends(e,t),e.prototype.reloadData=function(){var t=this;this.current_page=0,this.collection.removeAll(),this.scroller.viewport.scrollV=0,egret.setTimeout(function(){t.loadData()},this,100)},e.prototype.tag=function(){this.visible=!1},Object.defineProperty(e.prototype,"isLoading",{get:function(){return this.s_isLoading},set:function(t){t?this.tips.text="数据加载中...":this.tips.text="上拉加载更多"},enumerable:!0,configurable:!0}),e.prototype.loadData=function(){var t=this.scroller.viewport.scrollV-this.scroller.viewport.contentHeight+this.scroller.viewport.height;this.isLoading||0>t||this.current_page>=this.last_page||(this.isLoading=!0,this.current_page++,Http.get(Data.local_url+"animal/Index/getrecord?page="+this.current_page).addEventListener(egret.Event.COMPLETE,this.setData,this))},e.prototype.setData=function(t){this.isLoading=!1;var e=[],i=t.currentTarget,n=JSON.parse(i.response);if(n.data.length)for(var a=0,o=n.data;a<o.length;a++){var s=o[a];e.push({animalType:s.animal_type,name:s.name,create_time:s.friend_time,bullet:s.bullet,status:s.bonus})}this.current_page=n.current_page,this.last_page=n.last_page,this.current_page>=this.last_page&&(this.tips.text="所有数据加载完成");for(var r=0,l=e;r<l.length;r++){var h=l[r];this.collection.addItem(h)}},e}(eui.Component);__reflect(RecordList.prototype,"RecordList");var Alert=function(t){function e(){var e=t.call(this)||this;return e.skinName="AlertSkin",e.percentWidth=100,e.closeButton.$addListener(egret.TouchEvent.TOUCH_TAP,e.hide,e),e}return __extends(e,t),e.prototype.show=function(){AllBg.addAllBg(.4),AllBg.all_bg.touchEnabled=!0,Main.bg_skin.addChild(this)},e.prototype.hide=function(){AllBg.removeAllBg(),AllBg.all_bg.touchEnabled=!1,this.parent.removeChild(this)},e}(eui.Component);__reflect(Alert.prototype,"Alert");var Alert2=function(t){function e(){var e=t.call(this)||this;return e.percentWidth=100,e.skinName="Alert2Skin",e}return __extends(e,t),e.prototype.show=function(t,e){var i=this;void 0===e&&(e=1e3),Main.bg_skin.addChild(this),this.content.text=t;setTimeout(function(){i.hide()},e)},e.prototype.hide=function(){this.parent.removeChild(this)
},e}(eui.Component);__reflect(Alert2.prototype,"Alert2");var Anim=function(t){function e(){var e=t.call(this)||this;return e.s_speed_x=0,e.s_speed_y=0,e.s_space_x=0,e.s_space_y=0,e.spaceX=0,e.spaceY=0,e.m_speed_x=0,e.m_speed_y=0,e.scale=1,e.skinName="AnimSkin",e.currentState="index",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.init,e),e}return __extends(e,t),e.prototype.init=function(){this.speedX>0&&(this.animal.skewY=180);var t=this.animal.width/this.shadow.width;this.shadow.scaleX=t,this.shadow.scaleY=t},e.prototype.addFrame=function(){var t,e=30,i=(new Date).getTime();if(t=e*(i-this.create_time)/1e3,0==this.speedX)this.x=this.x,this.y=this.y;else{this.x=this.spaceX+t*this.speedX;var n=this.spaceY+t*this.speedY;n+this.height<=15?this.y=15-this.height:this.y+this.height>=Main.bg_skin.animal_group.height?this.y=Main.bg_skin.animal_group.height-this.height:this.y=n}},Object.defineProperty(e.prototype,"setMoney",{set:function(t){this.money.text=t,this.money0.text="+"+t},enumerable:!0,configurable:!0}),e.prototype.setFont=function(){this.money0.font=RES.getRes("other_bit_fnt"),this.money.font=RES.getRes("other_bit_fnt")},Object.defineProperty(e.prototype,"speedX",{get:function(){return this.s_speed_x},set:function(t){this.m_speed_x=t,this.s_speed_x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speedY",{get:function(){return this.s_speed_y},set:function(t){this.s_speed_y=t,this.m_speed_y=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animalType",{get:function(){return this.s_type},set:function(t){this.s_type=t,this.addMovieClip()},enumerable:!0,configurable:!0}),e.prototype.stop=function(){this.s_speed_x=0,this.s_speed_y=0},e.prototype.run=function(){this.s_speed_x=this.m_speed_x,this.s_speed_y=this.m_speed_y},e.prototype.removeAnimal=function(){AllAnimal.remove(this.id),this.parent.removeChild(this)},e.prototype.ice=function(){this.stop(),this.currentState="ice"},e.prototype.addCreateTime=function(){this.create_time+=1e3*Main.bing_time},e.prototype.iceRemove=function(){this.run(),this.currentState="index"},e.prototype.addMovieClip=function(){var t=Data.animalType[this.animalType];1==this.animalType||2==this.animalType?this.animalFactory=AllAnimal.animalFactory:this.animalFactory=AllAnimal.animalFactory2,this.scale=t.scale,this.animalMc=new egret.MovieClip(this.animalFactory.generateMovieClipData(t.name)),this.animalMc.gotoAndPlay("1",-1),this.animal.width=this.animalMc.width*this.scale,this.animal.height=this.animalMc.height*this.scale,this.animalMc.touchEnabled=!0,this.animalMc.scaleX=this.scale,this.animalMc.scaleY=this.scale,this.animal.addChild(this.animalMc),this.y-=this.height,this.spaceY=this.y},e.prototype.pkqIntEffects=function(){this.pkqHitEffects("1");var t=new egret.MovieClip(this.animalFactory.generateMovieClipData("喷火"));t.gotoAndPlay("1",-1),t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.width/2,this.my_mc=t},e.prototype.pkqHitEffects=function(t){void 0===t&&(t=""),this.pkqMcFactory=AllAnimal.huaFactory;var e=new egret.MovieClip(AllAnimal.huaFactory.generateMovieClipData("火圈"));e.gotoAndPlay("1",-1),t?(e.scaleX=1.5,e.scaleY=1.5):(e.scaleX=1.2,e.scaleY=1.2),e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.width/2,this.boom_box.addChild(e)},e.prototype.huapaoEffects=function(){var t=new egret.MovieClip(AllAnimal.huaFactory2.generateMovieClipData("EFC5"));t.gotoAndPlay("1",-1),t.scaleX=1.5,t.scaleY=1.5,t.width=247,t.height=247,t.x=54,t.y=54,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.name="huapao",this.boom_box.addChild(t)},e.prototype.codeEffects=function(){for(var t=Data.animalType[this.animalType],e=t.odds,i=[],n=0;e>n;n++){i[n]=createImg.createBitmapByName("zoo_sheet2_json.zoo_sheet2009");var a=AllAnimal.GetRandomNum(this.animal.x,this.animal.x+this.animal.width),o=AllAnimal.GetRandomNum(60,85);180==this.animal.skewY?i[n].x=a-this.animal.width:i[n].x=a;var s=this.animal.y-o+50,r=this.animal.y-o+100;i[n].y=s,i[n].scaleX=.8,i[n].scaleY=.8,i[n].anchorOffsetX=i[n].width/2;var l=egret.Tween.get(i[n]);l.to({y:r},500,egret.Ease.backOut),this.addChild(i[n])}},e.prototype.skill=function(){for(var t=function(t){var i=new egret.MovieClip(e.pkqMcFactory.generateMovieClipData("喷火"));i.gotoAndPlay("1",-1),i.x=e.boom_box.x-e.boom_box.anchorOffsetX,i.y=e.boom_box.y-e.boom_box.anchorOffsetY,i.rotation=t,i.anchorOffsetX=100,i.anchorOffsetY=150,e.boom_box.addChildAt(i,0),i.scaleX=0,i.scaleY=0,egret.Tween.get(i).to({scaleX:1,scaleY:1},200).to({rotation:i.rotation+50},1e3).to({scaleX:0,scaleY:0,rotation:i.rotation+180},400).call(function(){i.parent.removeChild(i)})},e=this,i=0;360>i;i+=30)t(i)},e.prototype.boom=function(){var t=this.die_type;this.animalMc.stop(),this.animalMc.skewY=this.animal.skewY,180==this.animal.skewY&&(this.animalMc.anchorOffsetX=this.animal.width/2+this.animalMc.width/2*(1+this.scale/2),(2==this.animalType&&1==t||1==this.animalType&&1==t||10==this.animalType)&&(this.animalMc.anchorOffsetX-=65)),this.animalMc.x=(this.animal1.width-this.animalMc.width*this.scale)/2,this.animalMc.y=(this.animal1.height-this.animalMc.height*this.scale)/2,this.animalMc.touchEnabled=!1,this.shadow.alpha=0,this.touchEnabled=!1,this.stop();var e=Data.animalType[this.animalType];if(e.odds>=10&&e.odds<100){var i=RES.getRes("zoo_bomb_mp3");i.play(0,1),this.currentState="boom1"}else if(e.odds>=100){var i=RES.getRes("zoo_bomb_win_mp3");i.play(0,1),this.currentState="boom2"}else 3==t?this.currentState="boom1":this.currentState="boom0";if("boom0"==this.currentState?(this.animal0.width=this.animal.width,this.animal0.height=this.animal.height,this.animalMc.x=0,this.animalMc.y=0,this.animal0.addChild(this.animalMc)):this.animal1.addChild(this.animalMc),2==this.animalType&&1==t){var i=RES.getRes("zoo_lion_mp3");i.play(0,1),this.pkqIntEffects(),egret.Tween.get(this.my_mc).wait(1400).to({scaleY:0,scaleX:0},1e3),this.skill(),this.yao.play()}else if(1==this.animalType&&1==t){var i=RES.getRes("zoo_bomb_mp3");i.play(0,1),this.huapaoEffects(),this.yao.play()}else if(2==t){var i=RES.getRes("zoo_lion_mp3");i.play(0,1),this.pkqHitEffects(),this.money0.alpha=0,this.yao.play()}else if(3==t){var i=RES.getRes("zoo_bomb_win_mp3");i.play(0,1),this.huapaoEffects(),this.yao.play()}else{var i=RES.getRes("zoo_coin_mp3");i.play(0,1),"boom0"==this.currentState?this.codeEffects():this.huapaoEffects(),this.yao.play()}this.dispatchEventWith("boom")},e}(eui.Component);__reflect(Anim.prototype,"Anim");var Article=function(t){function e(){var e=t.call(this)||this;return e.skinName="ArticleSkin",e.percentWidth=100,e.close_btn.$addListener(egret.TouchEvent.TOUCH_TAP,e.hide,e),e.alpha=0,e}return __extends(e,t),e.prototype.recordShow=function(){this.title.text="游戏记录",Data.record_page=1,Data.record_data=[];var t=new RecordList;this.article_box.addChild(t),Main.bg_skin.addChild(this);var e=egret.Tween.get(this,{loop:!1});e.to({alpha:1},500)},e.prototype.palyInfoShow=function(){this.title.text="玩法介绍";var t=new PlayInfo;t.setScrollerHeight(this.article_box.height),this.article_box.addChild(t),Main.bg_skin.addChild(this);var e=egret.Tween.get(this,{loop:!1});e.to({alpha:1},500)},e.prototype.hide=function(){var t=egret.Tween.get(this,{loop:!1});t.to({alpha:0},500),t.call(function(){Main.bg_skin.removeChild(this)})},e}(eui.Component);__reflect(Article.prototype,"Article");var BeforeAnimal=function(t){function e(){var e=t.call(this)||this;return e.skinName="BeforeAnimalSkin",e.percentWidth=100,e.touchEnabled=!1,e}return __extends(e,t),e.prototype.daXiangShow=function(){this.currentState="daxiang",this.daxiang.play()},e.prototype.zhadanrenShow=function(){this.currentState="zhadanren",this.zhadanren.play()},e}(eui.Component);__reflect(BeforeAnimal.prototype,"BeforeAnimal");var Nav=function(t){function e(){var e=t.call(this)||this;return e.skinName="NavSkin",e.play_info_nav.$addListener(egret.TouchEvent.TOUCH_TAP,e.playInfo,e),e.record_nav.$addListener(egret.TouchEvent.TOUCH_TAP,e.record,e),e.go_home.$addListener(egret.TouchEvent.TOUCH_TAP,Data.goHome,e),e.task_nav.$addListener(egret.TouchEvent.TOUCH_TAP,e.task,e),e}return __extends(e,t),e.prototype.task=function(t){this.hide(),Task.showTaskInfo(t)},e.prototype.show=function(){AllBg.addAllBg(),this.right=80,this.y=65,Main.bg_skin.addChild(this)},e.prototype.hide=function(){AllBg.removeAllBg(),Main.bg_skin.removeChild(this)},e.prototype.playInfo=function(){var t=new Article;this.hide(),t.palyInfoShow()},e.prototype.record=function(){var t=new Article;this.hide(),t.recordShow()},e}(eui.Component);__reflect(Nav.prototype,"Nav");var PlayInfo=function(t){function e(){var e=t.call(this)||this;return e.skinName="PlayInfoSkin",e.percentWidth=100,e}return __extends(e,t),e.prototype.setScrollerHeight=function(t){this.scroller.height=t},e}(eui.Component);__reflect(PlayInfo.prototype,"PlayInfo");var Rank=function(t){function e(){var e=t.call(this)||this;return e.skinName="rankSkin",e.close_btn.$addListener(egret.TouchEvent.TOUCH_TAP,e.hide,e),e}return __extends(e,t),e.prototype.show=function(){AllBg.addAllBg(),this.horizontalCenter=0,this.verticalCenter=0,this.getRank(),Main.rank_list.height=this.article_box.height,this.article_box.addChild(Main.rank_list),Main.bg_skin.addChild(this)},e.prototype.hide=function(){AllBg.removeAllBg(),Main.bg_skin.removeChild(this)},e.prototype.getRank=function(){var t=function(t){Data.rank_data=[];var e=t.currentTarget,i=JSON.parse(e.response);if(i.data.length)for(var n=0,a=i.data;n<a.length;n++){var o=a[n];Data.rank_data.push({animalType:o.animal_type,nick_name:o.user_info.nickname,create_time:o.friend_time,hit_money:o.bullet,win_money:o.bonus,photo:o.user_info.photo})}Main.rank_list.bindData()},e=new egret.HttpRequest;e.responseType=egret.HttpResponseType.TEXT,e.open(Data.local_url+"animal/Index/getRank",egret.HttpMethod.POST),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(),e.addEventListener(egret.Event.COMPLETE,t,this)},e}(eui.Component);__reflect(Rank.prototype,"Rank");var TaskSatus=function(t){function e(){var e=t.call(this)||this;return e.skinName="taskSatusSkin",e}return __extends(e,t),e.prototype.playAnimation=function(t){var e=this.guang;if(t)for(var i in e.items)e.items[i].props={loop:!0};e.play()},e}(eui.Component);__reflect(TaskSatus.prototype,"TaskSatus");var Ice=function(t){function e(){var e=t.call(this)||this;return e.skinName="IceSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.bingCd(),this.bingSkillCd();var e=RES.getRes("efc-1_json"),i=RES.getRes("efc-1_png");this.iceMcFactory=new egret.MovieClipDataFactory(e,i)},e.prototype.bingCd=function(){var t=this.bing_shape=new egret.Shape;t.x=this.shadow_bing.width/2,t.y=this.shadow_bing.height/2,this.addChild(t)},e.prototype.addBingCd=function(t,e){function i(t){return this.changeGraphics(this.cd_bing,this.bing_shape,n),n+=1,(n>=360||n>a)&&(egret.stopTick(i,this),n>=360&&this.changeGraphics(this.cd_bing,this.bing_shape,n)),!1}void 0===e&&(e=!1);var n=Main.bing_angle,a=n+t;Main.bing_angle=a,360>=n&&(e?this.changeGraphics(this.cd_bing,this.bing_shape,n):egret.startTick(i,this))},e.prototype.changeGraphics=function(t,e,i){0!=i?t.mask=e:t.mask=null,i>=360&&t==this.cd_bing?this.cd_full.visible=!0:360>i&&t==this.cd_bing&&(this.cd_full.visible=!1),i>=360&&(i=0),e.graphics.clear(),e.graphics.beginFill(65535,1),e.graphics.moveTo(0,0),e.graphics.lineTo(200,0),e.graphics.drawArc(0,0,200,0,i*Math.PI/180,!0),e.graphics.lineTo(0,0),e.graphics.endFill()},e.prototype.bingSkillCd=function(){var t=this.bing_skill_shape=new egret.Shape;t.x=this.all_group.width/2,t.y=this.all_group.height/2,this.addChild(t),this.shadow_bing.mask=this.bing_skill_shape},e.prototype.BingStarCd=function(){function t(n){var a=(e-(new Date).getTime())/1e3,o=(360-i)/(60*a)+.03;return 0>=o&&(i=360,o=0),this.changeGraphics(this.shadow_bing,this.bing_skill_shape,i),i+=o,(i>=360||0>=a)&&(egret.stopTick(t,this),this.shadow_bing.visible=!1,this.touchEnabled=!0,this.touchChildren=!0),!1}this.shadow_bing.visible=!0,this.touchEnabled=!1,this.touchChildren=!1,this.addBingCd(0,!0);var e=(new Date).getTime()+1e3*Main.bing_time,i=0;egret.startTick(t,this)},e.prototype.iceStar=function(t){AllBg.addAllBg();var e=createImg.createBitmapByName("zoo_sheet3_json.zoo_sheet3012");e.x=253,e.y=112,Main.bg_skin.addChild(e);var i=new egret.MovieClip(this.iceMcFactory.generateMovieClipData("ice"));i.gotoAndPlay("1",-1),Main.bg_skin.addChild(i),i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.x=this.stage.stageWidth/2,i.y=this.stage.stageHeight/2-50;var n=createImg.createBitmapByName("zoo_ice_effect_sheet1_json.zoo_ice_effect_sheet1006");n.x=this.stage.stageWidth/2-n.width/2,n.y=this.stage.stageHeight/2-n.height/2,Main.bg_skin.addChild(n),t.user_id==Main.user_id&&(Main.bing_angle=0),this.BingStarCd();egret.setTimeout(function(t){n.parent.removeChild(n),e.parent.removeChild(e),AllBg.removeAllBg(),this.removeBingTw(i)},this,1e3,"egret");AllAnimal.bingAnimal();egret.setTimeout(function(t){AllAnimal.removeBing(),Main.bing_time=0},this,1e3*Main.bing_time,"egret")},e.prototype.removeBingTw=function(t){var e=egret.Tween.get(t,{loop:!1});t.stop(),e.to({scaleX:8,scaleY:8},400),e.call(function(){t.parent.removeChild(t)})},e}(eui.Component);__reflect(Ice.prototype,"Ice");var UserPhoto=function(t){function e(){var e=t.call(this)||this;return e.s_photo="",e.s_nickname="空席",e.strokeColor=16646144,e.nickname2="",e.skinName="UserPhotoSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.m_nickname.text=this.s_nickname,this.bor.strokeColor=this.strokeColor,this.m_photo.mask=this.photo_mask},Object.defineProperty(e.prototype,"nickname",{get:function(){return this.s_nickname},set:function(t){this.s_nickname=t,this.m_nickname.text=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"photo",{get:function(){return this.s_photo},set:function(t){this.s_photo=t,this.m_photo.source=this.s_photo},enumerable:!0,configurable:!0}),e}(eui.Component);__reflect(UserPhoto.prototype,"UserPhoto");