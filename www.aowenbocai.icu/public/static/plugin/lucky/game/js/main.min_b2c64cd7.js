var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},Game=function(t){function e(){var e=t.call(this)||this;return e.isGame=!1,e.index=0,e.oIndex=3,e.autoIndex=0,e.code=[],e.skinName="GameUiSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.height=this.stage.stageHeight,this.setButtons(),this.init(),this.pay(),this.re.addEventListener(egret.TouchEvent.TOUCH_TAP,this._balance,this),this.begin.addEventListener(egret.TouchEvent.TOUCH_TAP,this._begin,this),this.cut.addEventListener(egret.TouchEvent.TOUCH_TAP,this._cut,this),this.add.addEventListener(egret.TouchEvent.TOUCH_TAP,this._add,this),this.lucky.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this._luckyBegin,this),this.lucky.addEventListener(egret.TouchEvent.TOUCH_END,this._luckyEnd,this),this.bigget.addEventListener(egret.TouchEvent.TOUCH_TAP,this._bigget,this),this.menu.addEventListener(egret.TouchEvent.TOUCH_TAP,this._menu,this),this.autoGame.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Music.PlayClick()},this)},e.prototype.init=function(){this.autoGame.selected=!1;var t=Math.floor(7*Math.random()),e=Math.floor(7*Math.random());Data.chooseLucky=t+1,this.lucky.source=Data.imgs[t],this.luckyImg.source=Data.imgs[e];for(var i=0;3>i;i++){var n=this["box_"+i].getChildAt(0),o=Math.floor(7*Math.random());n.source=Data.imgs[o],Data.lastCode.push(o)}this.auto.text=Data.autoIndex.toString(),this.bet.text=Data.bet.toString(),Http.get(Data.USER_INFO_URL).addEventListener(egret.Event.COMPLETE,this._setMoney,this)},e.prototype._setMoney=function(t){var e=t.currentTarget,i=JSON.parse(e.response);i&&(this.setBalance=Number(i.money))},e.prototype.pay=function(){this.balance.parent.addEventListener(egret.TouchEvent.TOUCH_TAP,this.payMenu,this)},e.prototype.payMenu=function(){var t=new PayPanel;t.x=0,t.y=0,t.reload(),this.addChild(t)},e.prototype._menu=function(){Music.PlayClick();var t=new Menu;this.addChild(t),t.addEventListener("dele",function(){t.parent.removeChild(t)},this),t.addEventListener("false",function(){Music.IsMusic=!0},this),t.addEventListener("true",function(){Music.StopBGM(),Music.IsMusic=!1},this)},e.prototype.setButtons=function(){for(var t=0,e=0,i=this.buttons.$children;e<i.length;e++){var n=i[e];t++;var o="";o=Data.buttons[t]>=1e4?Data.buttons[t]/1e4+"万":Data.buttons[t].toString(),n.label=o,n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnTouch,this)}},e.prototype.btnTouch=function(t){if(Music.PlayClick(),3==this.oIndex){var e=t.target,i=e.parent.getChildIndex(e);Data.coin=Data.buttons[i+1]}},e.prototype._add=function(){return Music.PlayClick(),3==this.oIndex?Data.bet>=4e6?void this.alert("单次下注最大不能超过400W！"):void(this.setBet+=Data.coin):void 0},e.prototype.alert=function(t){void 0===t&&(t="");var e=new eui.Label;e.text=t,e.textColor=8190976,e.size=40;var i=(this.stage.stageWidth-e.width)/2,n=this.stage.stageHeight-e.height-400;e.x=i,e.y=this.stage.stageHeight,this.stage.addChild(e),egret.Tween.get(e).to({y:n},800,egret.Ease.backInOut).wait(1500).to({y:this.stage.stageHeight},500,egret.Ease.backIn).call(function(){e.parent.removeChild(e)},this)},e.prototype._cut=function(){if(Music.PlayClick(),3==this.oIndex){if(Data.bet<Data.coin||Data.bet<=100)return void this.alert("单次下注不能小于100");Data.bet-=Data.coin,this.bet.text=Data.bet.toString()}},e.prototype._bigget=function(){if(Music.PlayClick(),3==this.oIndex){var t=Data.balance-Math.floor(Data.balance%100);t>=4e6&&(this.alert("单次下注最大不能超过400W！"),t=4e6),this.setBet=t}},e.prototype._luckyBegin=function(t){3==this.oIndex&&(this.onOffsetX=t.stageX,this.lucky.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.imgChange,this))},e.prototype._luckyEnd=function(){this.lucky.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.imgChange,this)},e.prototype.imgChange=function(t){this.lucky.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.imgChange,this),this.afterOffsetX=t.stageX;var e=this.afterOffsetX-this.onOffsetX;0>e?(this.index--,this.index<=-1&&(this.index=6),this.lucky.source=Data.imgs[this.index]):e>0&&(this.index++,this.index>=7&&(this.index=0),this.lucky.source=Data.imgs[this.index]),Data.chooseLucky=this.index+1},e.prototype._begin=function(){if(Music.PlayClick(),3==this.oIndex&&1!=this.isGame){if(Data.balance<Data.bet)return void this.payMenu();this.isGame=!0,this.autoGame.selected?this.alertAuto():Http.get(Data.BETTING_URL,{money:Data.bet,type:Data.chooseLucky}).addEventListener(egret.Event.COMPLETE,this.betting,this)}},e.prototype.betting=function(t){var e=t.currentTarget,i=JSON.parse(e.response);if(0==i.err){for(var n=0,o=i.common;n<o.length;n++){var s=o[n];this.code.push(s-1)}Data.code=this.code,Data.luckySp=i.sp_award.lucky,Data.common=Number(i.sp_award.common),Data.bouns=Number(i.bouns),this.setBalance-=Data.bet,Data.luckyIndex=i.lucky-1,this.animation();var a=(new Date).getTime();this.endTime=new Date(a+8500).getTime(),Data.lastCode=Data.code,egret.setTimeout(this.luckyAnimation,this,3e3)}},e.prototype.alertAuto=function(){var t=new Balance;t.height=this.height,t.currentState="auto",t.addEventListener("outAutoGame",this.outAutoGame,this),this.addChild(t),this._alertAuto=t,this._autoGame()},e.prototype._autoGame=function(){var t=this;this.autoIndex++,this._alertAuto.allAuto.text="自动局数："+Data.autoIndex.toString()+"  局",this._alertAuto.nowAuto.text="当前局数：第 "+this.autoIndex.toString()+" 局",Http.get(Data.BETTING_URL,{money:Data.bet,type:Data.chooseLucky}).addEventListener(egret.Event.COMPLETE,this.betting,this);var e=egret.setTimeout(function(){var e=Data.autoIndex-t.autoIndex;0>=e?t.outAutoGame():t._autoGame()},this,15e3);this.setAuto=e},e.prototype.outAutoGame=function(){this._alertAuto&&this._alertAuto.parent&&this.removeChild(this._alertAuto),this.autoIndex=0,egret.clearTimeout(this.setAuto),this.autoGame.selected=!1},e.prototype.animation=function(){var t=this;this.oIndex=0;for(var e=function(e){var n=new Food;n.setFoodIndex(Data.code[e],Data.lastCode[e]),n.addEventListener("IMG_CREATED",function(){n.y=-n.height+250,egret.Tween.get(n).wait(500*e).to({y:0},6e3,egret.Ease.cubicInOut).wait(500).call(function(){t.oIndex++})},i),i["box_"+e].removeChildren(),i["box_"+e].addChild(n)},i=this,n=0;3>n;n++)e(n)},e.prototype.luckyAnimation=function(){var t=this;egret.setTimeout(function(){var e=(new Date).getTime(),i=Math.floor((t.endTime-e)/1e3);0>i&&(i=0);var n=Math.floor(7*Math.random());t.luckyImg.source=Data.imgs[n],0>=i?t.result():t.luckyAnimation()},this,100)},e.prototype.result=function(){this.luckyImg.source=Data.imgs[Data.luckyIndex],egret.setTimeout(this.showResult,this,1e3)},e.prototype.showResult=function(){var t=new ShowResult;this.addChild(t),t.addEventListener("newGame",this.newGame,this)},e.prototype.newGame=function(){this.setBalance+=Data.bouns,this.begin.touchEnabled=!0,this.isGame=!1,this.code=[],Data.bouns=0},e.prototype._balance=function(){Music.PlayClick(),this.payMenu()},Object.defineProperty(e.prototype,"setBalance",{get:function(){return Data.balance},set:function(t){Data.balance=t,this.balance.text=Data.balance.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setBet",{get:function(){return Data.bet},set:function(t){Data.bet=t,this.bet.text=Data.bet.toString()},enumerable:!0,configurable:!0}),e}(eui.Component);__reflect(Game.prototype,"Game");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var o=RES.getRes(t);o?n(o):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Http=function(){function t(){}return t.get=function(t,e){if(e){var i=[];for(var n in e)i.push(n+"="+e[n]);t+="?"+i.join("&")}var o=new egret.HttpRequest;return o.responseType=egret.HttpResponseType.TEXT,o.open(t,egret.HttpMethod.GET),o.send(),o},t.prototype.onGetComplete=function(t){t.currentTarget},t}();__reflect(Http.prototype,"Http");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.draw,e),e}return __extends(e,t),e.prototype.draw=function(){this.height=this.stage.stageHeight;var t=this.createBitMapByName("loadbgxiu1_jpg");t.height=this.height,this.addChild(t),this.createView()},e.prototype.createView=function(){this.textField=new egret.TextField,this.textField.width=480,this.textField.textAlign="center";var t=this.createBitMapByName("progress_png"),e=this.createBitMapByName("progressBox_png");this.progress=t,this.progressBox=e,e.x=(this.stage.stageWidth-t.width)/2,e.y=this.stage.stageHeight-300,t.x=e.x+5,t.y=e.y+5,this.textField.x=(this.stage.stageWidth-this.textField.width)/2,this.textField.y=t.y-this.textField.height/2+10,this.addChild(e),this.addChild(t),this.addChild(this.textField)},e.prototype.setProgress=function(t,e){this.progress.width=(this.progressBox.width-10)*t/e,this.textField.text="努力加载中..."+Math.floor(t/e*100)+"%"},e.prototype.createBitMapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isThemeLoadEnd=!1,e.isResourceLoadEnd=!1,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("load",1),RES.loadGroup("preload",0)},e.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},e.prototype.onResourceLoadComplete=function(t){"load"==t.groupName&&(this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView)),"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},e.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.startCreateScene=function(){Music.init(),"ios"==egret.Capabilities.os.toLowerCase()?this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.checkCookies,this):this.checkCookies();var t=new Game;this.addChild(t)},e.prototype.checkCookies=function(){if(this.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.checkCookies,this),Data.getCookies("music"))switch(Data.getCookies("music")){case"false":Music.PlayBGM();break;case"true":Music.StopBGM()}else Music.PlayBGM()},e}(eui.UILayer);__reflect(Main.prototype,"Main");var Music=function(){function t(){}return t.init=function(){t._click=RES.getRes("btn3_mp3"),t._back=RES.getRes("back_mp3"),t._wrong=RES.getRes("erro_mp3"),t._turn=RES.getRes("turn1_mp3"),t._hua=RES.getRes("hua_mp3"),t._bgm=RES.getRes("BGM_mp3")},t.PlayBGM=function(){t.IsMusic&&(t._bgm_channel=t._bgm.play(0,0))},t.StopBGM=function(){t._bgm_channel&&t._bgm_channel.stop(),t._click_channel&&t._click_channel.stop(),t._turn_channel&&t._turn_channel.stop()},t.PlayClick=function(){t.IsMusic&&(t._click_channel=t._click.play(0,1))},t.PlayTurn=function(){t.IsMusic&&(t._turn_channel=t._turn.play(0,1),egret.setTimeout(function(){t._turn_channel.stop()},this,7e3))},t.PlayBack=function(){t.IsMusic&&t._back.play(0,1)},t.PlayWrong=function(){t.IsMusic&&t._wrong.play(0,1)},t.PlayHua=function(){t.IsMusic&&t._hua.play(0,1)},Object.defineProperty(t,"IsMusic",{get:function(){var t=Data.getCookies("ismusic");return null==t||""==t?!0:"1"==t},set:function(e){e?(Data.setCookies("ismusic","1"),t.PlayBGM()):(Data.setCookies("ismusic","0"),t.StopBGM())},enumerable:!0,configurable:!0}),t}();__reflect(Music.prototype,"Music");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function o(t){e.call(n,t)}function s(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(n))}"undefined"!=typeof generateEUI&&egret.callLater(function(){e.call(n,generateEUI)},this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var Balance=function(t){function e(){var e=t.call(this)||this;return e.skinName="BalanceSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.cancel.addEventListener(egret.TouchEvent.TOUCH_TAP,this._cancel,this),this.back.addEventListener(egret.TouchEvent.TOUCH_TAP,this._back,this)},e.prototype._back=function(){this.dispatchEventWith("outAutoGame")},e.prototype._cancel=function(){this.parent.removeChild(this)},e}(eui.Component);__reflect(Balance.prototype,"Balance");var Food=function(t){function e(){var e=t.call(this)||this;return e.index=28,e.imgCount=0,e.skinName="FoodSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){},e.prototype.setFoodIndex=function(t,e){this.index+=t,this.index-=e;for(var i=this.index;i>=0;i--){var n=(i+e)%Data.imgs.length,o=new FoodRect(Data.imgs[n]);o.addEventListener(egret.Event.ADDED_TO_STAGE,this.addImg,this),this.food_Box.addChild(o)}},e.prototype.addImg=function(){this.imgCount++,this.imgCount==this.index&&this.dispatchEventWith("IMG_CREATED")},e}(eui.Component);__reflect(Food.prototype,"Food");var FoodRect=function(t){function e(e){var i=t.call(this)||this;return i.imageSource=e,i.skinName="FoodRectSkin",i.addEventListener(egret.Event.ADDED_TO_STAGE,i.init,i),i}return __extends(e,t),e.prototype.init=function(){this.img.source=this.imageSource},e}(eui.Component);__reflect(FoodRect.prototype,"FoodRect");var Data=function(){function t(){}return t.setCookies=function(t,e){document.cookie=t+"="+e+";"},t.getCookies=function(t){for(var e=t+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){var o=i[n].trim();if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""},t.local_url="http://"+location.host,t.USER_INFO_URL=t.local_url+"/lucky/index/getInfo",t.HISTORY_URL=t.local_url+"/lucky/index/getHisList",t.BETTING_URL=t.local_url+"/lucky/index/lucky",t.current_page=1,t.last_page=0,t.autoIndex=10,t.bouns=0,t.luckyBouns=0,t.buttons=[100,100,1e3,1e4,5e4],t.luckySp=0,t.common=0,t.coin=100,t.bet=100,t.balance=31233,t.lastCode=[],t.code=[],t.luckyIndex=0,t.chooseLucky=0,t.helpImg=["help_png","help3_png"],t.luckySpImg=["win-bgNewxiu_json.win-bgNewxiu000","win-bgNewxiu_json.win-bgNewxiu001","win-bgNewxiu_json.win-bgNewxiu002"],t.imgs=["icon-goNewxiu_json.icon-goNewxiu003","icon-goNewxiu_json.icon-goNewxiu001","icon-goNewxiu_json.icon-goNewxiu002","icon-goNewxiu_json.icon-goNewxiu000","icon-goNewxiu_json.icon-goNewxiu004","icon-goNewxiu_json.icon-goNewxiu006","icon-goNewxiu_json.icon-goNewxiu005"],t}();__reflect(Data.prototype,"Data");var HisItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="HisItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=Number(this.data.bouns),e=Math.floor(t);this.time.text=this.data.create_time,this.bet.text="下注"+this.data.money+"金豆",this.bouns.text="获得"+e.toString()+"金豆",this.chooseLucky.text=this.data.codeRs,this.gift.text="开奖结果："+this.data.PlanList},e}(eui.ItemRenderer);__reflect(HisItem.prototype,"HisItem");var HistoryPanel=function(t){function e(){var e=t.call(this)||this;return e.isLoading=!0,e.skinName="HistorySkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.height=this.stage.stageHeight,this.back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.home,this),this.back2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.home,this),Http.get(Data.HISTORY_URL).addEventListener(egret.Event.COMPLETE,this.history,this)},e.prototype.history=function(t){var e=t.currentTarget,i=JSON.parse(e.response);if(this.isLoading=!1,i.data.length<=0)return void(this.zero.visible=!0);Data.last_page=Number(i.last_page),Data.current_page=Number(i.current_page);var n=new eui.ArrayCollection;this.hisList.dataProvider=n,this.hisList.itemRenderer=HisItem;for(var o=0,s=i.data;o<s.length;o++){var a=s[o];n.addItem(a)}this.collection=n,this.hisScrollor.addEventListener(eui.UIEvent.CHANGE_END,this.move,this)},e.prototype.move=function(){var t=this.hisScrollor.viewport.scrollV-(this.hisScrollor.viewport.contentHeight-this.hisScrollor.viewport.height);0>t||1!=this.isLoading&&(Data.current_page++,Data.current_page>Data.last_page||(this.isLoading=!0,Http.get(Data.HISTORY_URL,{page:Data.current_page}).addEventListener(egret.Event.COMPLETE,this.moreHistory,this)))},e.prototype.moreHistory=function(t){this.isLoading=!1;for(var e=t.currentTarget,i=JSON.parse(e.response),n=0,o=i.data;n<o.length;n++){var s=o[n];this.collection.addItem(s)}},e.prototype.home=function(){this.parent.removeChild(this)},e}(eui.Component);__reflect(HistoryPanel.prototype,"HistoryPanel");var Item=function(t){function e(){var e=t.call(this)||this;return e.skinName="ItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){this.img0.source=this.data},e}(eui.ItemRenderer);__reflect(Item.prototype,"Item");var Menu=function(t){function e(){var e=t.call(this)||this;return e.skinName="MenuSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){if(Data.getCookies("music")){var t="true"==Data.getCookies("music")?!0:!1;this.music.selected=t}this.height=this.stage.stageHeight,this.history.addEventListener(egret.TouchEvent.TOUCH_TAP,this._history,this),this.help.addEventListener(egret.TouchEvent.TOUCH_TAP,this._help,this),this.music.addEventListener(eui.UIEvent.CHANGE,this._music,this),this.home.addEventListener(egret.TouchEvent.TOUCH_TAP,this._home,this),this.back.addEventListener(egret.TouchEvent.TOUCH_TAP,this._back,this)},e.prototype._history=function(){Music.PlayClick();var t=new HistoryPanel;this.addChild(t)},e.prototype._help=function(){Music.PlayClick();var t=new Rule;this.stage.addChild(t),this.dispatchEventWith("dele")},e.prototype._music=function(t){1==t.target.selected?(Data.setCookies("music",!0),this.dispatchEventWith("true")):(Data.setCookies("music",!1),this.dispatchEventWith("false"))},e.prototype._home=function(){Music.PlayClick(),window.location.href="/"},e.prototype._back=function(){Music.PlayBack(),this.parent.removeChild(this)},e}(eui.Component);__reflect(Menu.prototype,"Menu");var Rule=function(t){function e(){var e=t.call(this)||this;return e.index=0,e.skinName="RuleSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.height=this.stage.stageHeight,this.numBox.removeChildren(),this.init(),this.ruleScroller.scrollPolicyV="OFF",this.back.addEventListener(egret.TouchEvent.TOUCH_TAP,this._back,this),this.ruleList.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.begin,this),this.ruleList.addEventListener(egret.TouchEvent.TOUCH_END,this.end,this);var t=new eui.ArrayCollection;this.ruleList.dataProvider=t,this.ruleList.itemRenderer=Item;for(var e=0,i=Data.helpImg;e<i.length;e++){var n=i[e];t.addItem(n)}},e.prototype.like=function(){var t=RES.getRes("like_json"),e=RES.getRes("like_png"),i=new egret.MovieClipDataFactory(t,e),n=new egret.MovieClip(i.generateMovieClipData("like"));n.x=(this.stage.stageWidth-n.width)/2,n.y=(this.stage.stageHeight-n.height)/2-100,this.addChild(n),n.gotoAndPlay(0),n.play(-1)},e.prototype.init=function(){for(var t=0;t<Data.helpImg.length;t++){var e=new eui.ToggleButton;e.skinName="NumSkin",e.label=(t+1).toString(),e.addEventListener(eui.UIEvent.CHANGE,this.change,this),this.numBox.addChild(e),0==t&&(e.selected=!0)}},e.prototype.btnChange=function(t){for(var e=0;e<Data.helpImg.length;e++){var i=this.numBox.getChildAt(e);if(i.selected=i==t,1==i.selected){var n=Number(i.label);egret.Tween.get(this.ruleScroller.viewport).to({scrollH:750*(n-1)},700)}}},e.prototype.change=function(t){var e=t.target;this.btnChange(e)},e.prototype.begin=function(t){this.onOffsetX=t.stageX,this.ruleList.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.Move,this)},e.prototype.end=function(t){this.ruleList.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.Move,this)},e.prototype.Move=function(t){t.target.parent.parent;this.afterOffsetX=t.stageX,this.ruleScroller.scrollPolicyH="OFF",this.ruleList.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.Move,this);var e=this.afterOffsetX-this.onOffsetX;if(0>e){this.index++,this.index>=Data.helpImg.length&&(this.index=0);var i=this.numBox.getChildAt(this.index);this.btnChange(i)}else if(e>0){this.index--,this.index<=-1&&(this.index=Data.helpImg.length-1);var i=this.numBox.getChildAt(this.index);this.btnChange(i)}},e.prototype._back=function(){Music.PlayBack(),this.stage.removeChild(this)},e}(eui.Component);__reflect(Rule.prototype,"Rule");var ShowResult=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShowResultSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){var t=this;this.alpha=0,this.height=this.stage.stageHeight,this.star.stop(),this.star.play(),this._bouns(),this.back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBack,this),this.huahua.addEventListener("complete",function(){egret.Tween.get(t.hua).to({alpha:0},1e3)},this),egret.Tween.get(this).to({alpha:0}).to({alpha:1},500).wait(2e3).call(function(){t._back()})},e.prototype._bouns=function(){switch(Data.luckySp){case 0:this.currentState="index",this.sp.text=Data.common.toString(),this.bouns.text=Data.bouns.toString()+"金豆",Data.common>=10&&this.huaPlaying();break;case 2:this.setBouns(),this.luckySp.source=Data.luckySpImg[1];break;case 3:this.setBouns(),this.luckySp.source=Data.luckySpImg[2];break;case 4:this.setBouns(),this.luckySp.source=Data.luckySpImg[0];break;default:console.log("比对错误！")}},e.prototype.setBouns=function(){this.currentState="lucky",this.sp.text=Data.luckySp.toString(),this.bouns.text=Data.bouns.toString()+"金豆",this.huaPlaying()},e.prototype.huaPlaying=function(){this.hua.visible=!0,this.huahua.stop(),this.huahua.play(),Music.PlayHua()},e.prototype._back=function(){var t=this;egret.Tween.get(this).to({alpha:1}).to({alpha:0},1500).call(function(){t.dispatchEventWith("newGame"),egret.Tween.removeTweens(t),t.parent.removeChild(t)})},e.prototype.touchBack=function(){Music.PlayClick(),this.dispatchEventWith("newGame"),egret.Tween.removeTweens(this),this.parent.removeChild(this)},e}(eui.Component);__reflect(ShowResult.prototype,"ShowResult");var DiamondsItem=function(t){function e(e){var i=t.call(this)||this;return i.data={money:"10",diamonds:"6"},i.data=e,i.skinName="DiamondsItemSkin",i.addEventListener(egret.Event.ADDED_TO_STAGE,i.init,i),i}return __extends(e,t),e.prototype.init=function(){this.money.text="￥"+this.data.money+" 购买",this.diamonds.text=this.data.diamonds,this.award.text="额外赠送"+this.data.award+"金豆",this.money.addEventListener(egret.TouchEvent.TOUCH_TAP,this.go,this)},e.prototype.go=function(){window.top.location.href="/pay/pay/index/num/"+this.data.money+"/type/2"},e}(eui.Component);__reflect(DiamondsItem.prototype,"DiamondsItem");var PayItem=function(t){function e(e){var i=t.call(this)||this;return i.data={money:"10",award:"6",coin:"12"},i.data=e,i.skinName="PayItemSkin",i.addEventListener(egret.Event.ADDED_TO_STAGE,i.init,i),i}return __extends(e,t),e.prototype.init=function(){var t=this;this.money.text="￥"+this.data.money+" 购买",this.coin.text=this.data.coin,this.award.text="额外赠送"+this.data.award+"金豆",this.money.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){window.top.location.href="/pay/pay/index/num/"+t.data.money},this)},e}(eui.Component);__reflect(PayItem.prototype,"PayItem");var PayPanel=function(t){function e(){var e=t.call(this)||this;return e.host=Data.local_url,e.api="/index/Recharge/getRechargeList",e.userApi="/index/user/getInfo",e.content=[],e.api=e.host+e.api,e.userApi=e.host+e.userApi,e.skinName="PayPanelSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.init,e),e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.no,e),e.auto_zh.addEventListener(eui.UIEvent.CHANGE,e.reload,e),e}return __extends(e,t),e.prototype.no=function(t){t.stopImmediatePropagation()},e.prototype.init=function(){var t=this;this.width=this.stage.stageWidth,this.height=this.stage.stageHeight,this.close_bg.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.parent&&t.parent.removeChild(t)},this)},e.prototype.reload=function(){Http.get(this.userApi).addEventListener(egret.Event.COMPLETE,this.setCoin,this),this.clearChild(),this.scroller.viewport.scrollV=0;var t=this.auto_zh.selected;t?(Http.get(this.api).addEventListener(egret.Event.COMPLETE,this.createList,this),this.title.text="充值金豆"):(Http.get(this.api).addEventListener(egret.Event.COMPLETE,this.diamondsList,this),this.title.text="充值钻石")},e.prototype.setCoin=function(t){var e=t.currentTarget,i=JSON.parse(e.response);i.err||(this.coin.text=i.data.money,this.diamonds.text=i.data.diamonds)},e.prototype.clearChild=function(){this.loading_group.visible=!0;var t=this.content;if(0!=t.length)for(var e=0,i=t;e<i.length;e++){var n=i[e];n.parent.removeChild(n)}this.content=[]},e.prototype.createList=function(t){var e=t.currentTarget,i=JSON.parse(e.response);if(!i.err){this.loading_group.visible=!1;for(var n=0,o=i.data;n<o.length;n++){var s=o[n],a=new PayItem(s);this.content.push(a),this.scroller_box.addChild(a)}}},e.prototype.diamondsList=function(t){var e=t.currentTarget,i=JSON.parse(e.response);if(!i.err){this.loading_group.visible=!1;for(var n=0,o=i.data;n<o.length;n++){var s=o[n],a=new DiamondsItem(s);this.content.push(a),this.scroller_box.addChild(a)}}},e}(eui.Component);__reflect(PayPanel.prototype,"PayPanel");