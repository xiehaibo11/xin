var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},__awaiter=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function s(t){try{c(i.next(t))}catch(e){r(e)}}function a(t){try{c(i["throw"](t))}catch(e){r(e)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((i=i.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return i([t,e])}}function i(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,r&&(s=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(r,n[1])).done)return s;switch(r=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,r=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=e.call(t,c)}catch(i){n=[6,i],r=0}finally{o=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,r,s,a,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},CarImg=function(t){function e(){var e=t.call(this)||this;return e.skinName="CarImgSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e.prototype.setCarImg=function(t){this.car.source=t},e}(eui.Component);__reflect(CarImg.prototype,"CarImg");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function i(i){e.call(n,i,t)}if(RES.hasRes(t)){var o=RES.getRes(t);o?i(o):RES.getResAsync(t,i,this)}else RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Http=function(){function t(){}return t.get=function(t,e){if(e){var n=[];for(var i in e)n.push(i+"="+e[i]);t+="?"+n.join("&")}var o=new egret.HttpRequest;return o.responseType=egret.HttpResponseType.TEXT,o.open(t,egret.HttpMethod.GET),o.send(),o},t.POST=function(t,e){var n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT;var i="";for(var o in e)i+=o+"="+e[o]+"&";return i=i.slice(0,-1),n.open(t,egret.HttpMethod.POST),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(i),n},t.prototype.onGetComplete=function(t){t.currentTarget},t}();__reflect(Http.prototype,"Http");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="LoadingSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.omComplete()},e.prototype.omComplete=function(){this.width=this.stage.stageWidth,this.height=this.stage.stageHeight,this.playAnimation(this.load,!0)},e.prototype.onProgress=function(t,e){var n=Math.floor(t/e*100);this.loading.text="正在初始化。。。"+n+"%"},e.prototype.playAnimation=function(t,e){if(e)for(var n in t.items)t.items[n].props={loop:!0};t.play()},e}(eui.Component);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(n){switch(n.label){case 0:return[4,this.loadResource()];case 1:return n.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=n.sent(),[4,platform.login()];case 3:return n.sent(),[4,platform.getUserInfo()];case 4:return e=n.sent(),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,this.loadTheme()];case 2:return n.sent(),t=new LoadingUI,[4,RES.loadGroup("load",0)];case 3:return n.sent(),this.stage.addChild(t),[4,RES.loadGroup("preload",1,t)];case 4:return n.sent(),this.stage.removeChild(t),[3,6];case 5:return e=n.sent(),console.error(e),[3,6];case 6:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,n){var i=new eui.Theme("resource/default.thm.json",t.stage);i.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.createGameScene=function(){Music.init(),Data.initURL(),"ios"==egret.Capabilities.os.toLowerCase()?this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.checkCookies,this):this.checkCookies();var t=new GameUi;t.width=this.stage.stageWidth,this.height=this.stage.stageHeight,e.bg_skin=t,this.addChild(t)},e.prototype.checkCookies=function(){if(this.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.checkCookies,this),Data.getCookies("music"))switch(Data.getCookies("music")){case"false":Music.StopBGM();break;case"true":Music.PlayBGM()}else Music.PlayBGM()},e}(eui.UILayer);__reflect(Main.prototype,"Main");var Music=function(){function t(){}return t.init=function(){t.carDrive=RES.getRes("slot_start_mp3"),t.carLoop=RES.getRes("slot_loop_mp3"),t.carStop=RES.getRes("slot_stop_mp3"),t._bgm=RES.getRes("bgm_mp3"),t._bet=RES.getRes("bet_mp3"),t._lose=RES.getRes("lose_mp3"),t._cutDown=RES.getRes("starttime_mp3")},t.PlayBGM=function(){t.IsMusic&&(t._bgm_channel=t._bgm.play(0,0))},t.StopBGM=function(){t._bgm_channel&&t._bgm_channel.stop(),t.car_channel&&t.car_channel.stop(),t.car_loop_channel&&t.car_loop_channel.stop()},t.PlayBet=function(){t.IsMusic&&t._bet.play(0,1)},t.PlayGirl=function(){t.IsMusic&&t._cutDown.play(0,1)},t.CarStart=function(){t.IsMusic&&(t.car_channel=t.carDrive.play(0,1),t.car_channel.addEventListener(egret.Event.SOUND_COMPLETE,function(){t.CarLoop()},this))},t.CarLoop=function(){t.IsMusic&&(t.car_loop_channel=t.carLoop.play(0,1),t.car_loop_channel.addEventListener(egret.Event.SOUND_COMPLETE,function(){t.CarStop()},this))},t.CarStop=function(){t.IsMusic&&t.carStop.play(0,1)},Object.defineProperty(t,"IsMusic",{get:function(){var t=Data.getCookies("ismusic");return null==t||""==t?!0:"1"==t},set:function(e){e?(Data.setCookies("ismusic","1"),t.PlayBGM()):(Data.setCookies("ismusic","0"),t.StopBGM())},enumerable:!0,configurable:!0}),t}();__reflect(Music.prototype,"Music");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,i){function o(t){e.call(i,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),n.call(i))}"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(i,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var RandomUtils=function(){function t(){}return t.prototype.limit=function(t,e){t=Math.min(t,e),e=Math.max(t,e);var n=e-t;return t+Math.random()*n},t.prototype.limitInteger=function(t,e){return Math.round(this.limit(t,e))},t.prototype.randomArray=function(t){var e=Math.floor(Math.random()*t.length);return t[e]},t}();__reflect(RandomUtils.prototype,"RandomUtils");var Alert=function(t){function e(e){var n=t.call(this)||this;return n.txt=e,n.skinName="AlertSkin",n}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.width=this.stage.stageWidth,this.height=this.stage.stageHeight,this.lb_dialog_text.text=this.txt,this.x=(this.stage.stageWidth-this.width)/2,this.y=(this.stage.stageHeight-this.height)/2,this.btn_dialog_cancel.addEventListener(egret.TouchEvent.TOUCH_TAP,this._close,this),this.img_dialog_outer.addEventListener(egret.TouchEvent.TOUCH_TAP,this._close,this)},e.prototype._close=function(){this&&this.parent.removeChild(this)},e}(eui.Component);__reflect(Alert.prototype,"Alert");var Award=function(){function t(){}return t.prototype.init=function(){this.gameStart()},t.prototype.gameStart=function(){new CarTw(Data.award_index)},t}();__reflect(Award.prototype,"Award");var BetGroup=function(t){function e(){var e=t.call(this)||this;return e.skinName="BetGroupSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e.prototype.addToStage=function(){if(this.Continue(),this.initBetCar(),Data.getCookies("item")){var t=Number(Data.getCookies("item"));Data.chip=Data.sessionCode[t]}this.bets.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betList,this)},e.prototype.betList=function(){var t=new BetList;this.stage.addChild(t),this.codeList=t},e.prototype.initBetCar=function(){for(var t=0,e=0,n=this.betGroup.$children;e<n.length;e++){var i=n[e];t++,i.index=t,i.logo.source=Data.bet_data[t].img,i.logoBet.text="x"+Data.bet_data[t].sp,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchCar,this)}},e.prototype.touchCar=function(t){if(Music.PlayBet(),!Main.bg_skin.isOpen){var e=t.currentTarget;if(Data.balance<Data.chip)return void Main.bg_skin.recharge();this.go_on.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.setContinue,this),Data.bet_data[e.index].bet+=Data.chip,e.youBet.text=Data.bet_data[e.index].bet;var n={money:Data.chip,plan:e.index};Http.POST(Data.BETTING,n).addEventListener(egret.Event.COMPLETE,this.betting,this)}},e.prototype.betting=function(t){var e=t.currentTarget,n=JSON.parse(e.response);return 0!=n.err?void console.log(n.msg):(Data.balance=n.money,void(Main.bg_skin.balance.text=Data.balance.toString()))},e.prototype.Continue=function(){this.go_on.addEventListener(egret.TouchEvent.TOUCH_TAP,this.setContinue,this)},e.prototype.setContinue=function(){if(!Main.bg_skin.isOpen){for(var t=JSON.parse(egret.localStorage.getItem("sessBet")),e=this.betGroup.$children,n=[],i=0;i<this.betGroup.numChildren;i++){var o=Number(t[i+1].bet),r=e[i].index;o>0&&(Data.bet_data[r].bet=o,e[i].youBet.text=o.toString(),n.push({money:o,plan:r}))}Http.POST(Data.BETTING,{copy_last:JSON.stringify(n)}).addEventListener(egret.Event.COMPLETE,this.betting,this),this.go_on.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.setContinue,this)}},e}(eui.Component);__reflect(BetGroup.prototype,"BetGroup");var BetList=function(t){function e(){var e=t.call(this)||this;return e.skinName="BetListSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.percentWidth=100,this.percentHeight=100,this.setList(),this.home.addEventListener(egret.TouchEvent.TOUCH_TAP,this._home,this)},e.prototype.openingAnimation=function(){egret.Tween.get(this.codeList).to({height:this.codeList.height},500,egret.Ease.backIn)},e.prototype.setList=function(){var t=new eui.ArrayCollection;this.codeList.dataProvider=t,this.codeList.itemRenderer=Item,this.codeList.selectedIndex=Data.code.length-1,this.codeList.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseCode,this);for(var e=Data.code.length-1;e>=0;e--)t.addItem(Data.code[e]);this.readSession(),egret.setTimeout(this.openingAnimation,this,100)},e.prototype.readSession=function(){if(Data.getCookies("item")){var t=Number(Data.getCookies("item"));this.codeList.selectedIndex=t}else this.codeList.selectedIndex=Data.code.length-1},e.prototype.chooseCode=function(t){this.setBet(this.codeList.selectedItem)},e.prototype.setBet=function(t){var e=Number(t);Data.chip=e,Data.setCookies("item",this.codeList.selectedIndex)},e.prototype._home=function(){this.parent.removeChild(this)},e}(eui.Component);__reflect(BetList.prototype,"BetList");var Bets=function(t){function e(){var e=t.call(this)||this;return e.index=-1,e.skinName="BetsSkin",e.currentState="bet",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e}(eui.Component);__reflect(Bets.prototype,"Bets");var Bonus=function(t){function e(){var e=t.call(this)||this;return e.skinName="BonusSkin",e}return __extends(e,t),e.prototype.createChildren=function(){var e=this;t.prototype.createChildren.call(this),this.percentWidth=100,this.percentHeight=100,this._sure(),egret.setTimeout(function(){egret.Tween.get(e).to({alpha:0},500).call(e.back,e)},this,2e3)},e.prototype._sure=function(){var t=this;this.sure.addEventListener(egret.TouchEvent.TOUCH_TAP,this.back,this),this.sure.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.begin,this),this.sure.addEventListener(egret.TouchEvent.TOUCH_END,this.end,this),this.sure1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.back,this),this.sure1.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){egret.Tween.get(t.sure1).to({scaleX:.9,scaleY:.9},0,egret.Ease.backIn)},this),this.sure1.addEventListener(egret.TouchEvent.TOUCH_END,function(){egret.Tween.get(t.sure1).to({scaleX:1,scaleY:1},100,egret.Ease.backOut)},this)},e.prototype.begin=function(){egret.Tween.get(this.sure).to({scaleX:.9,scaleY:.9},0,egret.Ease.backIn)},e.prototype.end=function(){egret.Tween.get(this.sure).to({scaleX:1,scaleY:1},100,egret.Ease.backOut)},e.prototype.back=function(){egret.Tween.removeTweens(this),this&&this.parent&&this.parent.removeChild(this)},e}(eui.Component);__reflect(Bonus.prototype,"Bonus");var Data=function(){function t(){}return t.initURL=function(){var e=RES.getRes("data_config_json");t.API_URL=e.API_URL,t.USER_INFO_URL=t.API_URL+"cars/index/getInfo",t.BETTING=t.API_URL+"cars/index/join",t.ORDER_BEETING=t.API_URL+"cars/index/checkOrder",t.AWARD=t.API_URL+"cars/Prize/award",t.OPEN=t.API_URL+"cars/index/getOpen",t.GETTING_BOUNS=t.API_URL+"cars/index/getLastData",t.HISTORY=t.API_URL+"cars/index/getHis",t.LASTOPEN=t.API_URL+"cars/index/getOpenList"},t.setCookies=function(t,e){document.cookie=t+"="+e+";"},t.getCookies=function(t){for(var e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){var o=n[i].trim();if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""},t.API_URL="http://192.168.0.181:81/",t.USER_INFO_URL=t.API_URL+"cars/index/getInfo",t.BETTING=t.API_URL+"cars/index/join",t.ORDER_BEETING=t.API_URL+"cars/index/checkOrder",t.AWARD=t.API_URL+"cars/Prize/award",t.OPEN=t.API_URL+"cars/index/getOpen",t.HISTORY=t.API_URL+"cars/index/getHis",t.GETTING_BOUNS=t.API_URL+"cars/index/getLastData",t.LASTOPEN=t.API_URL+"cars/index/getOpenList",t.UPDATA_TING=t.API_URL+"cars/index/updateTime",t.open_time=0,t.pass_time=0,t.lost_time=0,t.award_index=0,t.open_index=-1,t.balance=123456,t.code=[100,500,1e3,5e3,1e4],t.sessionCode=[1e4,5e3,1e3,500,100],t.bonus=-1,t.chip=100,t.issue=0,t.now_page=0,t.all_page=0,t.Prompt=["play2_json.play0","play2_json.play1","play2_json.play3","play2_json.play4","play2_json.play5","play2_json.play6"],t.bet_data={1:{sp:0,img:"bet_json.bet8",bet:0,betImg:"bet_json.bet28"},2:{sp:0,img:"bet_json.bet20",bet:0,betImg:"bet_json.bet31"},3:{sp:0,img:"bet_json.bet32",bet:0,betImg:"bet_json.bet21"},4:{sp:0,img:"bet_json.bet35",bet:0,betImg:"bet_json.bet27"},5:{sp:0,img:"bet_json.bet12",bet:0,betImg:"bet_json.bet26"},6:{sp:0,img:"bet_json.bet19",bet:0,betImg:"bet_json.bet26"},7:{sp:0,img:"bet_json.bet23",bet:0,betImg:"bet_json.bet26"},8:{sp:0,img:"bet_json.bet29",bet:0,betImg:"bet_json.bet26"}},t.historyImg=["icon_cars_json.icon_cars8","icon_cars_json.icon_cars1","icon_cars_json.icon_cars0","icon_cars_json.icon_cars10","icon_cars_json.icon_cars13","icon_cars_json.icon_cars12","icon_cars_json.icon_cars8","icon_cars_json.icon_cars1","icon_cars_json.icon_cars9","icon_cars_json.icon_cars10","icon_cars_json.icon_cars13","icon_cars_json.icon_cars4","icon_cars_json.icon_cars8","icon_cars_json.icon_cars1","icon_cars_json.icon_cars9","icon_cars_json.icon_cars10","icon_cars_json.icon_cars13","icon_cars_json.icon_cars7","icon_cars_json.icon_cars8","icon_cars_json.icon_cars1","icon_cars_json.icon_cars11","icon_cars_json.icon_cars10","icon_cars_json.icon_cars13","icon_cars_json.icon_cars14","icon_cars_json.icon_cars8","icon_cars_json.icon_cars1","icon_cars_json.icon_cars5","icon_cars_json.icon_cars10","icon_cars_json.icon_cars13","icon_cars_json.icon_cars14"],t.carAwardXy={0:{x:270,y:120},1:{x:350,y:120},2:{x:430,y:120},3:{x:510,y:120},4:{x:590,y:120},5:{x:670,y:120},6:{x:750,y:120},7:{x:830,y:120},8:{x:910,y:10},9:{x:910,y:150},10:{x:966,y:106},11:{x:1080,y:270},12:{x:972,y:280},13:{x:926,y:324},14:{x:859,y:366},15:{x:840,y:376},16:{x:760,y:376},17:{x:680,y:376},18:{x:600,y:376},19:{x:520,y:376},20:{x:440,y:376},21:{x:360,y:376},22:{x:275,y:376},23:{x:220,y:376},24:{x:70,y:376},25:{x:23,y:275},26:{x:4,y:198},27:{x:19,y:119},28:{x:65,y:55},29:{x:200,y:120}},t.dazhong=[0,6,12,18,24],t.leikesasi=[1,7,13,19,25],t.benchi=[2,17],t.kaidilake=[3,9,15,21,27],t.xuefolan=[4,10,16,22,28],t.baoma=[5,20],t.jeep=[8,14,23,29],t.falali=[11,26],t.car_logo_data={1:{name:"法拉利",data:t.falali,open_img:"draw_json.draw4",open_img1:"play_json.play36",car_img:"icon_cars_json.icon_cars4"},2:{name:"奔驰",data:t.benchi,open_img:"draw_json.draw2",open_img1:"play_json.play26",car_img:"icon_cars_json.icon_cars0"},3:{name:"宝马",data:t.baoma,open_img:"draw_json.draw3",open_img1:"play_json.play25",car_img:"icon_cars_json.icon_cars11"},4:{name:"jeep",data:t.jeep,open_img:"draw_json.draw5",open_img1:"play_json.play41",car_img:"icon_cars_json.icon_cars14"},5:{name:"凯迪拉克",data:t.kaidilake,open_img:"draw_json.draw0",open_img1:"play_json.play63",car_img:"icon_cars_json.icon_cars10"},6:{name:"大众",data:t.dazhong,open_img:"draw_json.draw6",open_img1:"play_json.play52",car_img:"icon_cars_json.icon_cars8"},7:{name:"雷克萨斯",data:t.leikesasi,open_img:"draw_json.draw1",open_img1:"play_json.play23",car_img:"icon_cars_json.icon_cars2"},8:{name:"雪佛兰",data:t.xuefolan,open_img:"draw_json.draw7",open_img1:"play_json.play31",car_img:"icon_cars_json.icon_cars13"}},t}();__reflect(Data.prototype,"Data");var CarLogo=function(t){function e(){var e=t.call(this)||this;return e.skinName="CarLogoSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2},e.prototype.start=function(){this.currentState="run",this.run.play(0)},e.prototype.openAnimation=function(){var t=this;this.currentState="open",this.open.play(0),this.open.addEventListener("complete",function(){t.dispatchEventWith("open")},this)},e}(eui.Component);__reflect(CarLogo.prototype,"CarLogo");var CarTw=function(){function t(t){this.run_num=0,this.award_index=0,this.open_index=-1,this.run_lgo_num=0,this.run_stop=!1,this.car=Main.bg_skin.car,this.award_index=t,this.initPoints(),this.my_tw(),this.moveCarImg()}return t.prototype.initPoints=function(){var t=Data.car_logo_data[this.award_index],e=t.data;this.open_index=(new RandomUtils).randomArray(e),this.line_top_xy={start:{x:270,y:120},end:{x:888,y:120}},this.radian_right_xy={start:{x:888,y:123},middle:{x:1080,y:270},end:{x:888,y:376}},this.line_botttom_xy={start:{x:900,y:376},end:{x:230,y:376}},this.radian_left_xy={start:{x:220,y:376},middle:{x:30,y:270},end:{x:200,y:130}},this.car.x=this.line_top_xy.start.x,this.car.y=this.line_top_xy.start.y},t.prototype.my_tw=function(){var t=this;if(!this.run_num)return void egret.Tween.get(this.car).to({x:this.line_top_xy.end.x,y:this.line_top_xy.end.y},750,egret.Ease.cubicIn).call(function(){t.radian_right_tw()});if(2==this.run_num&&this.open_index>=0&&this.open_index<8){var e=this.award_stop(),n=93.7*(this.open_index+1);egret.Tween.get(this.car).to({x:e.x,y:e.y},n,egret.Ease.cubicOut).call(function(){t.stop()})}else egret.Tween.get(this.car).to({x:this.line_top_xy.start.x,y:this.line_top_xy.start.y},50).to({x:this.line_top_xy.end.x,y:this.line_top_xy.end.y},750).call(function(){t.radian_right_tw()})},t.prototype.radian_right_tw=function(){var t=this;if(2==this.run_num&&this.open_index>=8&&this.open_index<15){var e=(this.award_stop(),void 0),n=42.8*(this.open_index+1);this.open_index>=8&&this.open_index<12&&(e=11==this.open_index?.14*(this.open_index-8):.13*(this.open_index-8)),this.open_index>=12&&this.open_index<15&&(e=12==this.open_index?.13*(this.open_index-7):.14*(this.open_index-7)),egret.Tween.get(this).to({factor:e},n,egret.Ease.cubicOut).call(function(){t.stop()})}else egret.Tween.get(this).to({factor:1},300).call(function(){t.line_botttom()})},t.prototype.line_botttom=function(){var t=this;if(this.car.rotation=180,2==this.run_num&&this.open_index>=15&&this.open_index<23){var e=this.award_stop(),n=93.7*(this.open_index+1);egret.Tween.get(this.car).to({x:e.x,y:e.y},n,egret.Ease.cubicOut).call(function(){t.stop()})}else egret.Tween.get(this.car).to({x:this.line_botttom_xy.end.x,y:this.line_botttom_xy.end.y},750).call(function(){t.radian_left_tw()})},t.prototype.radian_left_tw=function(){var t=this;if(2==this.run_num&&this.open_index>=23&&this.open_index<30){var e=(this.award_stop(),42.8*(this.open_index+1)),n=void 0;this.open_index>=23&&this.open_index<26&&(n=.14*(this.open_index-23)),this.open_index>=26&&this.open_index<30&&(n=.17*(this.open_index-23)),egret.Tween.get(this).to({factor_l:n},e,egret.Ease.cubicOut).call(function(){t.stop()})}else egret.Tween.get(this).to({factor_l:1},300).call(function(){t.car.rotation=0,t.run_num++,t.my_tw()})},t.prototype.stop=function(){egret.Tween.removeTweens(this.car),this.resultAnimation(),Data.open_index=this.open_index},t.prototype.resultAnimation=function(){var t=this,e=Data.car_logo_data[this.award_index],n=Main.bg_skin.signs.getChildAt(this.open_index);n.openImg.source=e.open_img,n.openImg1.source=e.open_img1,n.openAnimation(),n.addEventListener("open",function(){t.showReuslt()},this)},t.prototype.showReuslt=function(){var t=this,e=new Result;e.show(this.award_index),e.addEventListener("newGame",function(){Main.bg_skin.show.source=Data.Prompt[4],Main.bg_skin.show1.source=Data.Prompt[4],t.lastOpen()},this),Main.bg_skin.addChild(e)},t.prototype.lastOpen=function(){Main.bg_skin.bonus();var t=Main.bg_skin.recent;t.lastOpen(),this.newGame()},t.prototype.newGame=function(){this.run_stop&&(Main.bg_skin.balance.text=Data.balance.toString(),this.run_num=0,this.run_lgo_num=0,this.run_stop=!1,this.nextCarTw())},t.prototype.nextCarTw=function(){this.car.rotation=0,this.car.x=this.line_top_xy.start.x,this.car.y=this.line_top_xy.start.y,Main.bg_skin.check(Data.open_time)},t.prototype.moveCarImg=function(){var t=this,e=Main.bg_skin.signs.$children,n=e.length,i=function(i){egret.setTimeout(function(){return t.run_stop?void 0:(t.now_car_index=parseInt(i),e[i].start(),-1!=t.open_index&&t.open_index==t.now_car_index&&2==t.run_lgo_num?void(t.run_stop=!0):void(parseInt(i)==n-1&&(t.run_lgo_num++,t.moveCarImg())))},o,73*parseInt(i))},o=this;for(var r in e)i(r)},t.prototype.award_stop=function(){if(2==this.run_num){var t=(Data.car_logo_data[this.award_index],this.open_index),e=Data.carAwardXy[t];return e}},Object.defineProperty(t.prototype,"factor",{get:function(){return 0},set:function(t){this.car.x=(1-t)*(1-t)*this.radian_right_xy.start.x+2*t*(1-t)*this.radian_right_xy.middle.x+t*t*this.radian_right_xy.end.x,this.car.y=(1-t)*(1-t)*this.radian_right_xy.start.y+2*t*(1-t)*this.radian_right_xy.middle.y+t*t*this.radian_right_xy.end.y,this.car.rotation=this.getAngle(850,250,this.car.x,this.car.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"factor_l",{get:function(){return 0},set:function(t){this.car.x=(1-t)*(1-t)*this.radian_left_xy.start.x+2*t*(1-t)*this.radian_left_xy.middle.x+t*t*this.radian_left_xy.end.x,this.car.y=(1-t)*(1-t)*this.radian_left_xy.start.y+2*t*(1-t)*this.radian_left_xy.middle.y+t*t*this.radian_left_xy.end.y,this.car.rotation=this.getAngle(256,250,this.car.x,this.car.y)},enumerable:!0,configurable:!0}),t.prototype.getAngle=function(t,e,n,i){var o=Math.abs(t-n),r=Math.abs(e-i),s=Math.sqrt(Math.pow(o,2)+Math.pow(r,2)),a=r/s,c=Math.acos(a),h=Math.floor(180/(Math.PI/c));return n>t&&i>e&&(h=180-h),n==t&&i>e&&(h=180),n>t&&i==e&&(h=90),t>n&&i>e&&(h=180+h),t>n&&i==e&&(h=270),t>n&&e>i&&(h=360-h),h},t}();__reflect(CarTw.prototype,"CarTw");var EButton=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,function(){e.w=e.width,e.h=e.height,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){e.width-=5,e.height-=5},e),e.addEventListener(egret.TouchEvent.TOUCH_END,function(){e.width=e.w,e.height=e.h},e),e.addEventListener(egret.TouchEvent.TOUCH_CANCEL,function(){e.width=e.w,e.height=e.h},e),e.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,function(){e.width=e.w,e.height=e.h},e)},e),e}return __extends(e,t),e.prototype.partAdded=function(e,n){t.prototype.partAdded.call(this,e,n)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(eui.Button);__reflect(EButton.prototype,"EButton",["eui.UIComponent","egret.DisplayObject"]);var GameUi=function(t){function e(){var e=t.call(this)||this;return e.isOpen=!1,e.skinName="GameUiSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.addToStage(),this.playAnimation(this.showTw,!0)},e.prototype.addToStage=function(){this.initCars(),this.pay(),this._home(),this._operate(),this.setUser()},e.prototype.setUser=function(){Http.get(Data.USER_INFO_URL).addEventListener(egret.Event.COMPLETE,this.setUserInfo,this)},e.prototype.setUserInfo=function(t){var e=t.currentTarget,n=JSON.parse(e.response);if(0==n.err){for(var i=1;9>i;i++)Data.bet_data[i].sp=n.data.cars[i];this.betGroup.initBetCar(),n.data.bet_his&&(this.keeping=n.data.bet_his,this.readKeep()),Data.pass_time=Number(n.data.pass_time),Data.lost_time=Number(n.data.lost_time),Data.open_time=Data.lost_time-Data.pass_time,Data.issue=Number(n.data.issue),Data.balance=Math.floor(n.data.money),this.balance.text=Data.balance.toString();var o=(new Date).getTime();this.endTime=new Date(o+1e3*Data.open_time).getTime(),this.judge()}},e.prototype.judge=function(){return Data.pass_time>=15&&!this.isOpen?(this.isOpen=!0,this.show.source=Data.Prompt[1],this.show1.source=Data.Prompt[1],void this.check(Data.open_time)):(this.isOpen=!1,void this.set_Time(15-Data.pass_time))},e.prototype.check=function(t){this.nextIssue=new egret.Timer(1e3,t),this.nextIssue.addEventListener(egret.TimerEvent.TIMER,this.checkIssue,this),this.nextIssue.start()},e.prototype.checkIssue=function(){var t=(new Date).getTime(),e=Math.floor((this.endTime-t)/1e3);0>=e&&this.newGame()},e.prototype.set_Time=function(t){this.setTime=new egret.Timer(1e3,t),this.setTime.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.setTime.start();var e=(new Date).getTime();this.open_time=new Date(e+1e3*t).getTime()},e.prototype.timerFunc=function(){var t=(new Date).getTime(),e=Math.floor((this.open_time-t)/1e3);0>=e?(this.cutDown.text="0"+e.toString(),this.timerComFunc()):(this.show.source=Data.Prompt[3],this.show1.source=Data.Prompt[3],10>e?this.cutDown.text="0"+e.toString():this.cutDown.text=e.toString())},e.prototype.timerComFunc=function(){this.setTime.stop(),Http.get(Data.ORDER_BEETING,{issue:Data.issue}).addEventListener(egret.Event.COMPLETE,this.orderBet,this)},e.prototype.readKeep=function(){for(var t in this.keeping.plan)for(var e=Number(t),n=0,i=this.betGroup.betGroup.$children;n<i.length;n++){var o=i[n];o.index==e&&(Data.bet_data[o.index].bet=this.keeping.plan[t],o.youBet.text=this.keeping.plan[t])}},e.prototype.getOpen=function(){var t=this;egret.setTimeout(function(){Http.get(Data.AWARD,{issue:Data.issue}).addEventListener(egret.Event.COMPLETE,t.award,t),Http.get(Data.OPEN,{issue:Data.issue}).addEventListener(egret.Event.COMPLETE,t.getOpenID,t)},this,1e3)},e.prototype.getOpenID=function(t){var e=t.currentTarget,n=JSON.parse(e.response);return 0!=n.err?void this.getOpen():(this.girlAnimation(),void(Data.award_index=Number(n.data)))},e.prototype.carAnimation=function(){this.show.source=Data.Prompt[0],this.show1.source=Data.Prompt[0];var t=new Award;t.init(),Music.CarStart()},e.prototype.girlAnimation=function(){var t=this;this.isOpen=!0;var e=new Girl;e.timeAnimation(),e.addEventListener("go",function(){Http.get(Data.GETTING_BOUNS,{issue:Data.issue}).addEventListener(egret.Event.COMPLETE,t.getBonus,t)},this),this.addChild(e),egret.setTimeout(function(){t.carAnimation()},this,3e3)},e.prototype.getBonus=function(t){var e=t.currentTarget,n=JSON.parse(e.response);0==n.err&&(Data.bonus=Number(n.money))},e.prototype._operate=function(){this.operate.addEventListener(egret.TouchEvent.TOUCH_TAP,this.operatePanel,this),this.operateList.addEventListener(egret.TouchEvent.TOUCH_TAP,this.operateListPanel,this)},e.prototype.operatePanel=function(){this.addChild(new Alert("敬请期待！"))},e.prototype.operateListPanel=function(){this.addChild(new Alert("敬请期待！"))},e.prototype._home=function(){this.setUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this._setUp,this),this.setUp.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.setBegin,this),this.setUp.addEventListener(egret.TouchEvent.TOUCH_END,this.setEnd,this)},e.prototype.homeTurn=function(){window.top.location.href="/"},e.prototype._setUp=function(){var t=new SetUp;this.addChild(t)},e.prototype.setBegin=function(){egret.Tween.get(this.setUp).to({scaleX:1.4,scaleY:1.4},0,egret.Ease.backIn)},e.prototype.setEnd=function(){egret.Tween.get(this.setUp).to({scaleX:1.5,scaleY:1.5},100,egret.Ease.backOut)},e.prototype.pay=function(){var t=this;this.balance.parent.addEventListener(egret.TouchEvent.TOUCH_TAP,this.recharge,this),this.payBacks.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.payPanel.parent.visible=!1},this)},e.prototype.recharge=function(){this.payPanel.parent.visible=!0,egret.Tween.get(this.payPanel.parent).to({alpha:0,scaleX:0}).to({alpha:1,scaleX:1},500),this.payPanel.reload()},e.prototype.initCars=function(){for(var t=0;t<this.signs.numChildren;t++){var e=this.signs.getChildAt(t);e.logo.source=Data.historyImg[t]}},e.prototype.orderBet=function(t){var e=t.currentTarget,n=JSON.parse(e.response);if(3==n.err)return void console.log(n.msg);this.getOpen();var i=Data.bet_data,o=JSON.stringify(i);egret.localStorage.setItem("sessBet",o)},e.prototype.award=function(t){var e=t.currentTarget,n=JSON.parse(e.response);0!=n.err},e.prototype.bonus=function(){var t=new Bonus;return this.addChild(t),Data.bonus<0?void(t.currentState="index"):void(0==Data.bonus?t.currentState="lose":(Data.balance+=Data.bonus,t.bonus.text=Data.bonus.toString(),t.currentState="win"))},e.prototype.newGame=function(){this.nextIssue.stop(),this.isOpen=!1,Data.bonus=-1,this.setUser(),this.betGroup.Continue();for(var t in Data.bet_data)Data.bet_data[t].bet=0;for(var e=0,n=this.betGroup.betGroup.$children;e<n.length;e++){var i=n[e];i.allBet.text="0",i.youBet.text="0"}},e.prototype.playAnimation=function(t,e){if(e)for(var n in t.items)t.items[n].props={loop:!0};t.play()},e.prototype.Shake=function(){var t=egret.Tween.get(this);t.to({width:this.stage.stageWidth+10},50).to({x:-10},50).to({x:0},50).to({width:this.stage.stageWidth},50).to({width:this.stage.stageWidth+10},50).to({x:-10},50).to({x:0},50).to({width:this.stage.stageWidth},50)
},e}(eui.Component);__reflect(GameUi.prototype,"GameUi");var Girl=function(t){function e(){var e=t.call(this)||this;return e.skinName="GirlSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.percentWidth=100,this.percentHeight=100,this.playAnimation(this.animation,!0)},e.prototype.addTosStage=function(){this.animation.play(0)},e.prototype.timeAnimation=function(){var t=this;this.times.play(0),Music.PlayGirl(),this.times.addEventListener("complete",function(){t.parent.removeChild(t),t.dispatchEventWith("go")},this)},e.prototype.playAnimation=function(t,e){if(e)for(var n in t.items)t.items[n].props={loop:!0};t.play()},e}(eui.Component);__reflect(Girl.prototype,"Girl");var Help=function(t){function e(){var e=t.call(this)||this;return e.skinName="HelpSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.percentWidth=100,this.percentHeight=100,this.back.addEventListener(egret.TouchEvent.TOUCH_TAP,this._back,this)},e.prototype._back=function(){this.parent.removeChild(this)},e}(eui.Component);__reflect(Help.prototype,"Help");var HisItem=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!0,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=Math.floor(Number(this.data.bouns));this.money=t,t>0?this.color():this.bouns.text="未中奖",this.create_time.text=this.data.create_time,this.issue.text=this.data.issue;var e=JSON.parse(this.data.code),n=[];for(var i in e)n.push(Data.car_logo_data[i].name+":"+e[i]+"金豆");this.code.text=n.join("\n\n")+"\n\n"},e.prototype.color=function(){this.bouns.text="获得"+this.money.toString()+"金豆",this.bouns.textColor=15713313},e}(eui.ItemRenderer);__reflect(HisItem.prototype,"HisItem");var HistoryPanel=function(t){function e(){var e=t.call(this)||this;return e.isLoading=!0,e.skinName="HistorySkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.percentWidth=100,this.percentHeight=100,this.getHis(),this.back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backHome,this)},e.prototype.getHis=function(){Http.get(Data.HISTORY).addEventListener(egret.Event.COMPLETE,this.hisPanel,this);var t=new eui.ArrayCollection;this.hisList.dataProvider=t,this.hisList.itemRenderer=HisItem,this.collection=t},e.prototype.hisPanel=function(t){this.isLoading=!1;var e=t.currentTarget,n=JSON.parse(e.response);return 0!=n.err?void console.log("获取数据失败"):(Data.now_page=Number(n.current_page),Data.all_page=Number(n.last_page),this.hisData=n.data,0==this.hisData.length?this.zero.visible=!0:this.setHis(),void this.hisScroller.addEventListener(eui.UIEvent.CHANGE_END,this.move,this))},e.prototype.setHis=function(){for(var t=0;t<this.hisData.length;t++)this.collection.addItem({create_time:this.hisData[t].create_time,issue:this.hisData[t].issue,bouns:this.hisData[t].bouns,code:this.hisData[t].code})},e.prototype.move=function(){var t=this.hisScroller.viewport.scrollV-(this.hisScroller.viewport.contentHeight-this.hisScroller.viewport.height);if(!(0>t||this.isLoading)){if(Data.now_page++,Data.now_page>Data.all_page)return void(this.loading.text="这里是有底线的!");this.loading.visible=!0,this.loading.text="正在加载中。。。",this.isLoading=!0,Http.get(Data.HISTORY,{page:Data.now_page}).addEventListener(egret.Event.COMPLETE,this.moreHistory,this)}},e.prototype.moreHistory=function(t){this.isLoading=!1;var e=t.currentTarget,n=JSON.parse(e.response);this.hisData=n.data,this.setHis()},e.prototype.backHome=function(){this.parent.removeChild(this)},e}(eui.Component);__reflect(HistoryPanel.prototype,"HistoryPanel");var Item=function(t){function e(){var e=t.call(this)||this;return e.skinName="ItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){this.txt.text=this.data},e}(eui.ItemRenderer);__reflect(Item.prototype,"Item");var LastOpen=function(t){function e(){var e=t.call(this)||this;return e.num=0,e.skinName="LastOpenSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.createdChildren=function(){t.prototype.createChildren.call(this)},e.prototype.addToStage=function(){this.car_scoller.scrollPolicyV="off",this.lastOpen()},e.prototype.lastOpen=function(){Http.get(Data.LASTOPEN).addEventListener(egret.Event.COMPLETE,this.lastOpenData,this)},e.prototype.lastOpenData=function(t){var e=t.currentTarget,n=JSON.parse(e.response);if(0==n.err){if(0==n.data.length)return void console.log("暂无记录");this.newImg.visible=!0,this.car_box.numChildren>=5&&this.car_box.removeChildren();for(var i=0;i<n.data.length;i++){var o=new CarImg;this.num=o.height;var r=Data.car_logo_data[n.data[i].code].car_img;o.setCarImg(r),this.car_box.addChild(o)}}},e}(eui.Component);__reflect(LastOpen.prototype,"LastOpen");var OperatePanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="OperatePanelSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.percentWidth=100,this.percentHeight=100,this.open.play(0),this.addToStage()},e.prototype.addToStage=function(){this.caopan(),this.setCancel(),this.setSure(),this._setPan(),this.question.addEventListener(egret.TouchEvent.TOUCH_TAP,this.setQuestion,this),this.back.addEventListener(egret.TouchEvent.TOUCH_TAP,this._sback,this)},e.prototype._setPan=function(){this.btnGroup=new eui.RadioButtonGroup;for(var t=0,e=this.setPan.$children;t<e.length;t++){var n=e[t],i=n.getChildAt(0);i.groupName="auto",i.group=this.btnGroup}},e.prototype.caopan=function(){this.caoMoney.text="500000",this.caoMoney.restrict="0-9",this.caoMoney.maxChars=7,this.caoMoney.addEventListener(egret.FocusEvent.FOCUS_OUT,this.setMoney,this)},e.prototype.setQuestion=function(){},e.prototype.setCancel=function(){var t=this;this.cancel.addEventListener(egret.TouchEvent.TOUCH_TAP,this._sback,this),this.cancel.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){egret.Tween.get(t.cancel).to({scaleX:.9,scaleY:.9},0,egret.Ease.backIn)},this),this.cancel.addEventListener(egret.TouchEvent.TOUCH_END,function(){egret.Tween.get(t.cancel).to({scaleX:1,scaleY:1},100,egret.Ease.backOut)},this)},e.prototype.setSure=function(){var t=this;this.sure.addEventListener(egret.TouchEvent.TOUCH_TAP,this._sure,this),this.sure.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){egret.Tween.get(t.sure).to({scaleX:.9,scaleY:.9},0,egret.Ease.backIn)},this),this.sure.addEventListener(egret.TouchEvent.TOUCH_END,function(){egret.Tween.get(t.sure).to({scaleX:1,scaleY:1},100,egret.Ease.backOut)},this)},e.prototype._sure=function(){var t=this.btnGroup.selection.hashCode;switch(t){case this.btnGroup.getRadioButtonAt(0).hashCode:this.getAutoTimes();break;case this.btnGroup.getRadioButtonAt(1).hashCode:console.log("持续补足");break;case this.btnGroup.getRadioButtonAt(2).hashCode:console.log("不补足");break;default:console.log("对比失败")}},e.prototype.getAutoTimes=function(){var t=Number(this.auto.text);console.log(t)},e.prototype.setMoney=function(){var t=Number(this.caoMoney.text);if(t>5e6){var e=new Alert("最大金额不能超过500W！");e.currentState="alert",this.addChild(e)}},e.prototype._sback=function(){var t=this;this.home.play(0),this.home.addEventListener("complete",function(){t.parent.removeChild(t)},this)},e}(eui.Component);__reflect(OperatePanel.prototype,"OperatePanel");var Result=function(t){function e(){var e=t.call(this)||this;return e.skinName="ResultSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.percentWidth=100,this.percentHeight=100},e.prototype.show=function(t){this.showImg.source=Data.car_logo_data[t].open_img,this.times.text=Data.bet_data[t].sp+"倍",this.lingt.stop(),this.lingt.play(),this.lingt.addEventListener("complete",this.back,this)},e.prototype.back=function(){this.dispatchEventWith("newGame"),this.parent.removeChild(this),egret.Tween.removeTweens(this)},e}(eui.Component);__reflect(Result.prototype,"Result");var SetUp=function(t){function e(){var e=t.call(this)||this;return e.skinName="SetUpSkin",e}return __extends(e,t),e.prototype.createChildren=function(){if(t.prototype.createChildren.call(this),this.percentWidth=100,this.percentHeight=100,Data.getCookies("music")){var e="true"==Data.getCookies("music")?!0:!1;this.music.selected=e}this.openingAnimation(),this.gethis(),this.back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.home,this),this.home_page.addEventListener(egret.TouchEvent.TOUCH_TAP,this._home_page,this),this.music.addEventListener(egret.TouchEvent.TOUCH_TAP,this.setMusic,this),this.help.addEventListener(egret.TouchEvent.TOUCH_TAP,this._help,this)},e.prototype._help=function(){var t=new Help;this.addChild(t)},e.prototype.gethis=function(){this.history.addEventListener(egret.TouchEvent.TOUCH_TAP,this.historyPanel,this)},e.prototype.historyPanel=function(){var t=new HistoryPanel;this.stage.addChild(t)},e.prototype.openingAnimation=function(){this.move.stop(),this.move.play()},e.prototype.setMusic=function(){1==this.music.selected?(Data.setCookies("music",!0),Music.IsMusic=!0):(Data.setCookies("music",!1),Music.StopBGM(),Music.IsMusic=!1)},e.prototype._home_page=function(){window.top.location.href="/"},e.prototype.home=function(){this.parent.removeChild(this)},e}(eui.Component);__reflect(SetUp.prototype,"SetUp");var PayItem=function(t){function e(e){var n=t.call(this)||this;return n.data={money:"10",award:"6",coin:"12",flower:"12"},n.data=e,n.skinName="PayItemSkin",n.addEventListener(egret.Event.ADDED_TO_STAGE,n.init,n),n}return __extends(e,t),e.prototype.init=function(){this.money.text="￥"+this.data.money+" 购买",this.award.text=this.data.award,this.coin.text=this.data.coin,this.flower.text=this.data.flower,this.money.addEventListener(egret.TouchEvent.TOUCH_TAP,this.go,this)},e.prototype.go=function(){window.top.location.href="/pay/pay/index/num/"+this.data.money},e}(eui.Component);__reflect(PayItem.prototype,"PayItem");var PayPanel=function(t){function e(e){void 0===e&&(e="");var n=t.call(this)||this;return n.host="",n.api="/index/Recharge/getRechargeList",n.userApi="/index/user/getInfo",n.api=n.host+n.api,n.userApi=n.host+n.userApi,n.skinName="PayPanelSkin",n.addEventListener(egret.Event.ADDED_TO_STAGE,n.init,n),n}return __extends(e,t),e.prototype.init=function(){Http.get(this.api).addEventListener(egret.Event.COMPLETE,this.createList,this)},e.prototype.reload=function(){Http.get(this.userApi).addEventListener(egret.Event.COMPLETE,this.setCoin,this)},e.prototype.setCoin=function(t){var e=t.currentTarget,n=JSON.parse(e.response);n.err||(this.coin.text=n.data.money,this.flower.text=n.data.flower)},e.prototype.createList=function(t){var e=t.currentTarget,n=JSON.parse(e.response);if(!n.err)for(var i=0,o=n.data;i<o.length;i++){var r=o[i];this.scroller_box.addChild(new PayItem(r))}},e}(eui.Component);__reflect(PayPanel.prototype,"PayPanel");